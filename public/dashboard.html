<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>AlgoHive — Dashboard (100vh, Split Layout)</title>

  <!-- Tailwind + Fonts + Icons -->
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"/>

  <style>
    :root{ --olive:#556B2F; --olive-700:#3e4f23; --olive-100:#ecf4e6; --page:#f7f8fb }
    html,body{ height:100%; overflow:hidden; font-family:Inter,system-ui,Segoe UI,Roboto,Helvetica,Arial,sans-serif; background:var(--page); color:#0f172a }
    .card{ @apply bg-white rounded-2xl shadow-sm border border-black/10; }
    .pill{ @apply inline-flex items-center justify-center gap-2 rounded-full border border-black/10 bg-white px-3 py-1.5 text-xs font-medium; }
    .pill-muted{ @apply inline-flex items-center gap-2 rounded-full bg-emerald-50 text-emerald-700 px-2.5 py-1 text-[11px] font-medium; }
    .muted{ @apply text-slate-500; }
  </style>
</head>
<body>
  <div id="app" class="h-[100svh] w-full flex overflow-hidden">

    <!-- MAIN SCROLL AREA (left content + right rail + settings column) -->
    <main class="flex-1 min-w-0 overflow-y-auto overflow-x-hidden">
      <div class="mx-auto max-w-7xl px-4 md:px-6 py-6">
        <!-- Greeting -->
        <header class="mb-4 flex items-start justify-between gap-3">
          <div>
            <h1 class="text-3xl md:text-4xl font-extrabold tracking-tight">Good <span id="greetTime">afternoon</span>, <span id="greetName">Mihle Matimba</span></h1>
            <p class="muted mt-1">Your strategy‑driven performance, risk and activity at a glance.</p>
          </div>
          <!-- profile quick card -->
          <div class="hidden md:flex items-center gap-3 card p-2">
            <img id="avatar" class="h-10 w-10 rounded-full object-cover bg-slate-100" alt="Profile" src=""/>
            <div class="min-w-0">
              <div id="quickName" class="text-sm font-semibold truncate">Mihle Matimba</div>
              <div id="quickEmail" class="text-xs muted truncate">—</div>
            </div>
            <button id="openSettingsBtn" class="pill"><i class="fa-solid fa-gear"></i> Settings</button>
          </div>
        </header>

        <!-- Split grid: main canvas + right rail + settings column -->
        <div class="grid grid-cols-1 xl:grid-cols-4 gap-4">
          <!-- LEFT: MAIN CANVAS (2 cols) -->
          <section class="xl:col-span-2 space-y-4">
            <!-- Equity Curve block -->
            <div class="card p-4">
              <div class="flex items-start justify-between gap-3">
                <div>
                  <div class="font-semibold">Equity Curve — <span class="muted">—</span></div>
                  <div class="text-2xl md:text-3xl font-extrabold mt-1">No data found <span class="pill-muted">—</span></div>
                </div>
                <!-- Segmented time selector -->
                <div id="rangeSeg" role="tablist" aria-label="Time range" class="inline-flex rounded-full border border-black/10 bg-white p-1">
                  <button class="px-3 py-1.5 text-xs font-medium rounded-full" role="tab" data-range="1M" aria-selected="true">1M</button>
                  <button class="px-3 py-1.5 text-xs font-medium rounded-full" role="tab" data-range="3M">3M</button>
                  <button class="px-3 py-1.5 text-xs font-medium rounded-full" role="tab" data-range="6M">6M</button>
                  <button class="px-3 py-1.5 text-xs font-medium rounded-full" role="tab" data-range="YTD">YTD</button>
                  <button class="px-3 py-1.5 text-xs font-medium rounded-full" role="tab" data-range="1Y">1Y</button>
                  <button class="px-3 py-1.5 text-xs font-medium rounded-full" role="tab" data-range="3Y">3Y</button>
                </div>
              </div>

              <!-- KPI mini tiles -->
              <div class="mt-4 grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-5 gap-3">
                <div class="card border-black/5 shadow-none p-3">
                  <div class="text-xs muted">Return</div>
                  <div class="font-semibold">No data found</div>
                </div>
                <div class="card border-black/5 shadow-none p-3">
                  <div class="text-xs muted">Max Drawdown</div>
                  <div class="font-semibold">No data found</div>
                </div>
                <div class="card border-black/5 shadow-none p-3">
                  <div class="text-xs muted">Sharpe (sim.)</div>
                  <div class="font-semibold">No data found</div>
                </div>
                <div class="card border-black/5 shadow-none p-3">
                  <div class="text-xs muted">Win Rate</div>
                  <div class="font-semibold">No data found</div>
                </div>
                <div class="card border-black/5 shadow-none p-3">
                  <div class="text-xs muted">Volatility</div>
                  <div class="font-semibold">No data found</div>
                </div>
              </div>

              <!-- Chart placeholder -->
              <div class="mt-4">
                <div class="h-64 md:h-72 w-full rounded-xl border border-black/10 bg-white grid place-items-center muted">
                  No data found
                </div>
                <div class="mt-4 flex justify-end">
                  <button class="pill"><i class="fa-solid fa-plus"></i> Add Benchmark</button>
                </div>
              </div>
            </div>

            <!-- Performance Summary block -->
            <div class="card p-4">
              <div class="font-semibold">Performance Summary — <span class="muted">—</span></div>
              <div class="mt-3 h-48 rounded-xl border border-black/10 grid place-items-center muted">No data found</div>
            </div>
          </section>

          <!-- MIDDLE RIGHT RAIL (1 col) -->
          <aside class="space-y-4">
            <!-- My Strategies -->
            <div class="card p-4">
              <div class="flex items-center justify-between">
                <div class="font-semibold">My Strategies</div>
                <a class="text-sm font-medium text-[var(--olive-700)] hover:underline" href="#">View OpenStrategies</a>
              </div>
              <div class="mt-3 h-28 rounded-xl border border-black/10 grid place-items-center muted">No data found</div>
            </div>

            <!-- Balance -->
            <div class="card p-4">
              <div class="grid grid-cols-2 gap-3">
                <div class="rounded-xl border border-black/10 p-3">
                  <div class="text-xs muted">Total Balance</div>
                  <div class="text-xl font-bold">—</div>
                </div>
                <div class="rounded-xl border border-black/10 p-3">
                  <div class="text-xs muted">Cash Available</div>
                  <div class="text-xl font-bold">—</div>
                </div>
              </div>
            </div>

            <!-- Strategy Rating -->
            <div class="card p-4">
              <div class="font-semibold">Strategy Rating — <span class="muted">—</span></div>
              <div class="mt-2 grid grid-cols-3 gap-3 items-center">
                <div class="col-span-1 muted text-sm">No data found</div>
                <div class="col-span-2">
                  <div class="text-2xl font-extrabold">No data found</div>
                  <div class="muted text-sm">Overall rating performance</div>
                  <div class="pill-muted mt-2"><i class="fa-solid fa-minus"></i> From last year</div>
                </div>
              </div>
            </div>

            <!-- Financial Health -->
            <div class="card p-4">
              <div class="flex items-center justify-between">
                <div class="font-semibold">Financial Health</div>
                <a class="text-sm font-medium text-[var(--olive-700)] hover:underline" href="#">View Financial Tracker</a>
              </div>
              <div class="mt-3 space-y-3">
                <div>
                  <div class="text-xs muted">Health Score</div>
                  <div class="flex items-center gap-2 mt-1">
                    <span class="h-2 flex-1 rounded-full bg-slate-200 overflow-hidden"><span class="block w-1/5 h-full bg-emerald-400"></span></span>
                    <span class="text-sm muted">No data</span>
                  </div>
                </div>
                <div class="rounded-xl border border-black/10 p-3 grid grid-cols-2 gap-3">
                  <div>
                    <div class="text-xs muted">Income</div>
                    <div class="font-semibold">—</div>
                  </div>
                  <div>
                    <div class="text-xs muted">Expenses</div>
                    <div class="font-semibold">—</div>
                  </div>
                </div>
              </div>
            </div>
          </aside>

          <!-- FAR RIGHT: SETTINGS COLUMN (toggle) -->
          <aside id="settingsCol" class="space-y-4 hidden xl:block">
            <div class="card p-4">
              <div class="flex items-center justify-between">
                <div class="font-semibold">Profile</div>
                <button class="pill" id="closeSettingsBtn"><i class="fa-solid fa-xmark"></i> Close</button>
              </div>
              <div class="mt-3 flex items-center gap-3">
                <img id="avatarBig" class="h-16 w-16 rounded-2xl object-cover bg-slate-100" alt="Avatar" src=""/>
                <div>
                  <div id="profileName" class="text-lg font-bold">Mihle Matimba</div>
                  <div id="profileEmail" class="muted text-sm">—</div>
                </div>
              </div>
              <div class="mt-3">
                <label class="text-xs muted">Update photo</label>
                <input id="avatarInput" type="file" accept="image/*" class="mt-1 block w-full text-sm" />
              </div>
            </div>

            <div class="card p-4">
              <div class="font-semibold">Account Settings</div>
              <div class="mt-3 space-y-3">
                <div>
                  <label class="text-xs muted">Display Name</label>
                  <input id="nameInput" class="mt-1 w-full rounded-xl border border-black/10 px-3 py-2 text-sm" placeholder="Your name"/>
                </div>
                <div>
                  <label class="text-xs muted">Timezone</label>
                  <select id="tzSelect" class="mt-1 w-full rounded-xl border border-black/10 px-3 py-2 text-sm">
                    <option value="Africa/Johannesburg">Africa/Johannesburg (SAST)</option>
                    <option value="UTC">UTC</option>
                    <option value="America/New_York">America/New_York</option>
                    <option value="Europe/London">Europe/London</option>
                  </select>
                </div>
                <div class="flex items-center justify-between">
                  <span class="text-sm">Dark Mode</span>
                  <label class="inline-flex items-center cursor-pointer">
                    <input id="darkToggle" type="checkbox" class="sr-only">
                    <span class="w-10 h-6 bg-slate-200 rounded-full p-1 flex items-center"><span class="w-4 h-4 bg-white rounded-full transition"></span></span>
                  </label>
                </div>
                <div class="flex items-center justify-between">
                  <span class="text-sm">Email Notifications</span>
                  <label class="inline-flex items-center cursor-pointer">
                    <input id="emailToggle" type="checkbox" class="sr-only" checked>
                    <span class="w-10 h-6 bg-slate-200 rounded-full p-1 flex items-center"><span class="w-4 h-4 bg-white rounded-full transition"></span></span>
                  </label>
                </div>
                <button class="pill w-full justify-center"><i class="fa-regular fa-floppy-disk"></i> Save</button>
              </div>
            </div>
          </aside>
        </div>
      </div>
    </main>
  </div>

  <script>
    // Greeting logic
    (function(){
      const name = 'Mihle Matimba'; // replace from auth when wired
      const hour = new Date().getHours();
      const greet = hour < 12 ? 'morning' : hour < 17 ? 'afternoon' : 'evening';
      document.getElementById('greetTime').textContent = greet;
      document.getElementById('greetName').textContent = name;
      document.getElementById('quickName').textContent = name;
      document.getElementById('profileName').textContent = name;
    })();

    // Avatar fallbacks
    function initialsSVG(name){
      const initials = (name||'GU').split(' ').map(s=>s[0]?.toUpperCase()).slice(0,2).join('') || 'GU';
      const svg = `<svg xmlns='http://www.w3.org/2000/svg' width='96' height='96'>
        <rect width='100%' height='100%' fill='#ecf4e6'/>
        <text x='50%' y='54%' dominant-baseline='middle' text-anchor='middle' font-size='36' font-family='Inter' fill='#3e4f23'>${initials}</text>
      </svg>`;
      return 'data:image/svg+xml;utf8,' + encodeURIComponent(svg);
    }
    const fallback = initialsSVG('Mihle Matimba');
    ['avatar','avatarBig'].forEach(id=>{ const el=document.getElementById(id); if(el) el.src = fallback; });

    // Open/close settings column
    const settingsCol = document.getElementById('settingsCol');
    document.getElementById('openSettingsBtn')?.addEventListener('click', ()=> settingsCol.classList.remove('hidden'));
    document.getElementById('closeSettingsBtn')?.addEventListener('click', ()=> settingsCol.classList.add('hidden'));

    // Avatar uploader preview (local only)
    document.getElementById('avatarInput')?.addEventListener('change', (e)=>{
      const file = e.target.files?.[0];
      if(!file) return;
      const url = URL.createObjectURL(file);
      const small = document.getElementById('avatar');
      const big = document.getElementById('avatarBig');
      if(small) small.src = url;
      if(big) big.src = url;
    });

    // Dark mode toggle (demo)
    const darkToggle = document.getElementById('darkToggle');
    if(darkToggle){
      darkToggle.addEventListener('change', ()=>{
        document.documentElement.classList.toggle('dark');
        document.body.style.background = darkToggle.checked ? '#0b0f14' : 'var(--page)';
      });
    }

    // Segmented control styling
    const seg = document.getElementById('rangeSeg');
    function styleSeg(btn){
      seg.querySelectorAll('button').forEach(b=>{
        b.classList.remove('bg-[var(--olive-100)]','text-[var(--olive-700)]','shadow');
        b.setAttribute('aria-selected','false');
      });
      btn.classList.add('bg-[var(--olive-100)]','text-[var(--olive-700)]','shadow');
      btn.setAttribute('aria-selected','true');
    }
    if(seg){
      const first = seg.querySelector('button[data-range="1M"]');
      if(first) styleSeg(first);
      seg.querySelectorAll('button').forEach(b=> b.addEventListener('click', ()=> styleSeg(b)));
    }
  </script>
</body>
</html>
