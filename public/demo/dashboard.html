<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>AlgoHive — Demo Dashboard</title>

  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js" nonce="ALGOHIVE"></script>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" />

  <style>
    :root {
      --page: #0b1220;
      --bg: #ffffff;
      --muted: #64748b;
      --ink: #0f172a;
      --olive: #556b2f;
      --olive-700: #3f4f21;
      --brand: #556b2f;
      --line: #e5e7ef
    }

      html,
      body {
        font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif;
      background: var(--bg);
      color: var(--ink)
    }

    .card {
      background: #fff;
      border: 1px solid var(--line);
      border-radius: 12px
    }

    .btn {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: .5rem;
      height: 40px;
      padding: 0 .875rem;
      border-radius: 10px;
      border: 1px solid var(--line);
      font-weight: 600
    }

    .btn-olive {
      background: var(--olive);
      border-color: var(--olive-700);
      color: #f8fafc;
      box-shadow: 0 14px 28px -18px rgba(63, 79, 33, 0.45);
      transition: transform .15s ease, box-shadow .2s ease, background .2s ease;
    }

    .btn-olive:hover {
      background: var(--olive-700);
      box-shadow: 0 18px 38px -18px rgba(63, 79, 33, 0.55);
      transform: translateY(-1px);
    }

    .tab {
      height: 36px;
      border-radius: 8px;
      padding: 0 .75rem
    }

    .tab-active {
      background: #111827;
      color: #fff
    }

    #layout {
      --sb: 275px;
      display: grid;
      grid-template-columns: 1fr;
      min-height: 100vh
    }

    #ah-sidebar {
      transition: transform .3s ease, width .2s ease;
      width: 350px;
      max-width: 85vw;
      position: fixed;
      top: 0;
      z-index: 50;
      height: 100vh;
      transform: translateX(-100%)
    }

    #ah-sidebar.is-open {
      transform: translateX(0)
    }

    @media (min-width: 768px) {
      #layout {
        grid-template-columns: var(--sb) 1fr
      }

      #layout.is-collapsed {
        --sb: 64px
      }

      #ah-sidebar {
        position: sticky;
        top: 0;
        width: var(--sb);
        max-width: none;
        height: 100vh;
        transform: translateX(0);
        z-index: auto
      }
    }

    #ah-sidebar[data-collapsed="true"] .label,
    #ah-sidebar[data-collapsed="true"] .chevron {
      display: none
    }

    #ah-sidebar[data-collapsed="true"] #main-nav {
      visibility: hidden;
      pointer-events: none;
    }

    #ah-sidebar[data-collapsed="true"] #ah-brand-switcher .brand-menu {
      display: none;
    }

    #ah-sidebar[data-collapsed="true"] details>.sub {
      display: none !important
    }

    #ah-sidebar[data-collapsed="true"] nav a,
    #ah-sidebar[data-collapsed="true"] details>summary {
      justify-content: center;
      gap: .25rem
    }

    #ah-sidebar[data-collapsed="true"] details>summary span {
      gap: 0
    }

    #ah-sidebar .footer {
      transition: all .2s ease
    }

    #ah-sidebar[data-collapsed="true"] .footer {
      justify-content: center;
      flex-direction: column;
      gap: 12px
    }

    #ah-sidebar[data-collapsed="true"] .btn-collapse :is(svg, i) {
      transform: rotate(180deg)
    }

    #ah-collapse {
      display: none
    }

    @media (min-width: 768px) {
      #ah-collapse {
        display: inline-flex
      }
    }

    .ps-tile {
      border: 1px solid #e5e7eb;
      border-radius: 14px;
      padding: 14px 16px;
      background: #fff
    }

    .ps-label {
      color: #64748b;
      font-weight: 500;
      font-size: .85rem
    }

    .ps-value {
      font-weight: 600;
      font-size: 1rem;
      margin-top: 2px
    }

    .no-scrollbar::-webkit-scrollbar {
      display: none
    }

    .no-scrollbar {
      -ms-overflow-style: none;
      scrollbar-width: none
    }

    .scrollbar-hide::-webkit-scrollbar {
      display: none
    }

    .scrollbar-hide {
      -ms-overflow-style: none;
      scrollbar-width: none
    }

    .stat-card {
      box-shadow: 0 16px 44px -24px rgba(12, 18, 31, 0.32);
      transition: transform .18s ease, box-shadow .22s ease;
    }

    .stat-card:hover {
      transform: translateY(-2px);
      box-shadow: 0 20px 52px -26px rgba(12, 18, 31, 0.38);
    }

    .skeleton {
      position: relative;
      overflow: hidden;
      background: #e5e7eb;
    }

    .skeleton::after {
      content: '';
      position: absolute;
      inset: 0;
      transform: translateX(-100%);
      background: linear-gradient(90deg, rgba(255, 255, 255, 0) 0%, rgba(255, 255, 255, 0.6) 50%, rgba(255, 255, 255, 0) 100%);
      animation: shimmer 1.25s infinite;
    }

    @keyframes shimmer {
      100% {
        transform: translateX(100%);
      }
    }

    #dashboard-skeleton {
      position: absolute;
      inset: 0;
      z-index: 20;
      background: rgba(255, 255, 255, 0.9);
      backdrop-filter: blur(1px);
      transition: opacity .25s ease;
    }

    /* Brand switcher */
    #ah-brand-switcher {
      position: relative;
    }

    #ah-brand-switcher summary {
      list-style: none;
    }

    #ah-brand-switcher summary::-webkit-details-marker {
      display: none;
    }

    .brand-toggle {
      margin: 10px 12px;
      border: 1px solid #e2e8f0;
      border-radius: 14px;
      background: linear-gradient(135deg, #f8fafc, #eef2ff);
      box-shadow: 0 10px 30px -18px rgba(15, 23, 42, 0.4);
      display: flex;
      align-items: center;
      gap: 10px;
      padding: 10px 12px;
      cursor: pointer;
      transition: all .2s ease;
    }

    #ah-brand-switcher[open] .brand-toggle {
      border-color: #cbd5e1;
      background: #fff;
      box-shadow: 0 14px 36px -18px rgba(15, 23, 42, 0.55);
    }

    .brand-marker {
      width: 42px;
      height: 42px;
      border-radius: 12px;
      background: #111827;
      display: grid;
      place-items: center;
      box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.12);
    }

    .brand-menu {
      position: absolute;
      left: 12px;
      right: 12px;
      top: calc(100% - 6px);
      border: 1px solid #e2e8f0;
      border-radius: 16px;
      background: #fff;
      box-shadow: 0 24px 48px -20px rgba(15, 23, 42, 0.5);
      padding: 12px;
      display: grid;
      gap: 8px;
      z-index: 10;
    }

    .brand-menu-header {
      font-size: 12px;
      text-transform: uppercase;
      letter-spacing: .08em;
      font-weight: 700;
      color: #475569;
      padding: 4px 4px 2px;
    }

    .brand-option {
        display: flex;
        flex-direction: row;
        align-items: center;
        gap: 12px;
        padding: 12px;
        border-radius: 12px;
        transition: background-color .2s ease, color .2s ease, filter .2s ease;
    }

    .brand-option:hover {
      background: linear-gradient(135deg, #000000, #7c3aed);
    }

    .brand-option:hover img {
      filter: brightness(0) invert(1);
    }

    .brand-option:hover .algomoney-word {
      color: #fff;
    }

    .brand-option img {
        width: 38px;
        height: 38px;
        border-radius: 10px;
        object-fit: contain;
        background: transparent;
    }

    .brand-option .algomoney-word {
        font-weight: 800;
        letter-spacing: 0.14em;
        text-transform: uppercase;
        font-size: 13px;
        color: #0f172a;
    }

    #ah-sidebar[data-collapsed="true"] #ah-brand-switcher .brand-toggle {
        margin: 12px;
        padding: 0;
        border: none;
        background: transparent;
        box-shadow: none;
        justify-content: center;
        gap: 0;
    }

    #ah-sidebar[data-collapsed="true"] #ah-brand-switcher .brand-toggle .label,
    #ah-sidebar[data-collapsed="true"] #ah-brand-switcher .brand-toggle .fa-chevron-down {
        display: none;
    }

    #ah-sidebar[data-collapsed="true"] #ah-brand-switcher .brand-marker {
        background: transparent;
        width: 38px;
        height: 38px;
        box-shadow: none;
    }

    #ah-sidebar[data-collapsed="true"] #ah-brand-switcher .brand-marker img {
        width: 38px;
        height: 38px;
        border-radius: 10px;
    }

    .watch-strip {
      display: flex;
      gap: 12px;
      overflow-x: auto;
      scroll-snap-type: x mandatory;
    }

    .watch-strip > article {
      scroll-snap-align: start;
    }

    .watch-fade {
      pointer-events: none;
      position: absolute;
      top: 0;
      bottom: 0;
      width: 48px;
    }

    .watch-fade-left {
      left: 0;
      background: linear-gradient(90deg, rgba(255, 255, 255, 1), rgba(255, 255, 255, 0));
    }

    .watch-fade-right {
      right: 0;
      background: linear-gradient(270deg, rgba(255, 255, 255, 1), rgba(255, 255, 255, 0));
    }

    .allocation-card {
      background: radial-gradient(circle at 10% 20%, rgba(190, 242, 100, 0.18), transparent 35%),
        radial-gradient(circle at 90% 10%, rgba(190, 242, 100, 0.16), transparent 30%),
        linear-gradient(135deg, #1a2a15, #2f4a2a);
      border: 1px solid rgba(163, 190, 90, 0.35);
      box-shadow: 0 24px 60px -32px rgba(137, 168, 72, 0.5);
      color: #f8fafc;
    }

    .chip {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      padding: 0.35rem 0.65rem;
      border-radius: 9999px;
      font-weight: 700;
    }

    .toast-stack {
      position: fixed;
      top: 1.5rem;
      right: 1.5rem;
      display: flex;
      flex-direction: column;
      gap: 0.75rem;
      z-index: 400;
      pointer-events: none;
    }

    .toast-card {
      pointer-events: auto;
      display: flex;
      align-items: flex-start;
      gap: 0.75rem;
      min-width: 240px;
      max-width: 360px;
      padding: 0.9rem 1rem;
      border-radius: 1rem;
      background-image: linear-gradient(135deg, #0b1215, #1c2714);
      color: #f8fafc;
      box-shadow: 0 18px 42px -18px rgba(11, 18, 21, 0.7);
      border: 1px solid rgba(126, 141, 82, 0.45);
      transform: translateX(120%);
      opacity: 0;
      animation: toastIn 0.45s cubic-bezier(.22, 1, .36, 1) forwards;
    }

    .toast-card[data-tone="err"],
    .toast-card[data-tone="warn"] {
      background-image: linear-gradient(135deg, #231312, #261a12);
      border-color: rgba(248, 113, 113, 0.35);
    }

    .toast-card[data-tone="ok"] {
      background-image: linear-gradient(135deg, #0d1b10, #14200f);
      border-color: rgba(52, 211, 153, 0.35);
    }

    .toast-icon {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      width: 40px;
      height: 40px;
      border-radius: 12px;
      background: rgba(126, 141, 82, 0.12);
      color: #f8fafc;
      border: 1px solid rgba(126, 141, 82, 0.35);
      flex-shrink: 0;
    }

    .toast-card[data-tone="err"] .toast-icon,
    .toast-card[data-tone="warn"] .toast-icon {
      background: rgba(248, 113, 113, 0.12);
      border-color: rgba(248, 113, 113, 0.35);
    }

    .toast-card[data-tone="ok"] .toast-icon {
      background: rgba(52, 211, 153, 0.12);
      border-color: rgba(52, 211, 153, 0.35);
    }

    .toast-content {
      flex: 1;
      display: flex;
      flex-direction: column;
      gap: 0.15rem;
    }

    .toast-message {
      font-weight: 600;
      line-height: 1.3;
    }

    .toast-dismiss {
      color: #cbd5e1;
      background: transparent;
      border: none;
      cursor: pointer;
      padding: 0.1rem;
      transition: color .2s ease;
    }

    .toast-dismiss:hover {
      color: #f8fafc;
    }

    .toast-card--leaving {
      animation: toastOut 0.32s ease forwards;
    }

    @keyframes toastIn {
      0% { transform: translateX(120%); opacity: 0; }
      100% { transform: translateX(0); opacity: 1; }
    }

    @keyframes toastOut {
      0% { transform: translateX(0); opacity: 1; }
      100% { transform: translateX(120%); opacity: 0; }
    }

    .top-gainers-marquee {
      width: 100%;
      overflow: hidden;
      position: relative;
      background: #fff;
      border: 1px solid #e2e8f0;
      border-radius: 16px;
      padding: 18px;
      box-shadow: 0 12px 30px -18px rgba(15, 23, 42, 0.35);
    }

    .top-gainers-marquee::-webkit-scrollbar {
      display: none;
    }

    .top-gainers-track {
      display: flex;
      align-items: stretch;
      gap: 14px;
      width: max-content;
    }

    .top-gainers-track.is-looping {
      animation: tg-scroll var(--tg-duration, 24s) linear infinite;
    }

    .top-gainers-track.is-looping:hover {
      animation-play-state: paused;
    }

    @keyframes tg-scroll {
      0% { transform: translateX(0); }
      100% { transform: translateX(-50%); }
    }

    .tg-card {
      min-width: 220px;
      background: linear-gradient(135deg, #f8fafc, #ffffff);
      border: 1px solid #e2e8f0;
      border-radius: 14px;
      padding: 14px;
      color: #0f172a;
      box-shadow: 0 18px 42px -18px rgba(15, 23, 42, 0.25);
    }

    .tg-card-header {
      display: flex;
      align-items: center;
      gap: 10px;
      margin-bottom: 8px;
    }

    .tg-logo-img {
      width: 38px;
      height: 38px;
      border-radius: 12px;
      object-fit: contain;
      background: #fff;
      border: 1px solid rgba(226, 232, 240, 0.6);
      padding: 6px;
    }

    .tg-logo-fallback {
      width: 38px;
      height: 38px;
      border-radius: 12px;
      display: grid;
      place-items: center;
      font-weight: 700;
      color: #0f172a;
      background: #e2e8f0;
    }

    .tg-card-meta {
      min-width: 0;
    }

    .tg-symbol {
      font-weight: 700;
      letter-spacing: 0.04em;
    }

    .tg-name {
      font-size: 13px;
      color: #475569;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    .tg-value {
      font-size: 13px;
      color: #0f172a;
    }

    .tg-change {
      margin-top: 6px;
      font-weight: 700;
      font-size: 14px;
      display: inline-flex;
      align-items: center;
      gap: 6px;
      padding: 6px 10px;
      border-radius: 999px;
      background: rgba(15, 23, 42, 0.06);
    }

    .tg-change.is-up { color: #22c55e; }
    .tg-change.is-down { color: #ef4444; }

    .ph-item {
      display: grid;
      grid-template-columns: auto 1fr 1fr auto;
      gap: 10px;
      align-items: center;
      padding: 10px 12px;
      border-radius: 12px;
      border: 1px solid #e2e8f0;
      background: #fff;
    }

    .ph-symbol { font-weight: 700; color: #0f172a; }
    .ph-name { font-size: 13px; color: #475569; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; }
    .ph-weight { font-weight: 700; color: #0f172a; }

    .ph-logo-fallback {
      width: 36px;
      height: 36px;
      border-radius: 12px;
      display: grid;
      place-items: center;
      font-weight: 700;
      color: #0f172a;
      background: #e2e8f0;
    }
  </style>
</head>

<body class="min-h-screen overflow-x-hidden bg-white">
  <div id="layout">
    <div id="ah-overlay" class="fixed inset-0 bg-black/40 z-40 hidden md:hidden"></div>
    <aside id="ah-sidebar" data-collapsed="false" class="border-r border-slate-200 h-[100vh] bg-white flex flex-col overflow-hidden">
      <details class="group border-b border-slate-200 pb-2" id="ah-brand-switcher">
        <summary class="brand-toggle">
          <div class="brand-marker">
            <img src="https://static.wixstatic.com/media/ac771e_af06d86a7a1f4abd87e52e45f3bcbd96~mv2.png" alt="AlgoHive Logo" class="w-7 h-7 object-contain" />
          </div>
          <div class="min-w-0">
            <div class="font-bold text-[15px] text-slate-900 label">AlgoHive</div>
            <div class="text-[11px] text-slate-500 label">Markets</div>
          </div>
          <i class="fa-solid fa-chevron-down text-slate-400 ml-auto transition-transform group-open:rotate-180"></i>
        </summary>
        <div class="brand-menu">
          <div class="brand-menu-header">Switch workspace</div>
          <a href="#" class="brand-option">
            <img src="https://aazofjsssobejhkyyiqv.supabase.co/storage/v1/object/public/AlgoHive/ICON%20AHM.svg" alt="AlgoMoney Logo" />
            <div class="min-w-0 font-semibold text-slate-900 label algomoney-word">AlgoMoney</div>
          </a>
        </div>
      </details>

        <nav id="main-nav" class="p-2 text-[14px] flex-1 overflow-y-auto">
          <p class="px-3 py-2 text-[12px] font-semibold uppercase tracking-[0.14em] text-slate-500 label">Overview</p>

          <a class="flex items-center gap-3 px-3 py-2 rounded-lg hover:bg-slate-50 font-medium text-slate-900" href="/demo/dashboard.html" title="Home">
            <img src="https://aazofjsssobejhkyyiqv.supabase.co/storage/v1/object/public/AlgoHive/icons/home-01-stroke-rounded.svg" alt="" class="w-4 h-4 shrink-0" /><span class="label">Home</span>
          </a>

          <p class="mt-4 px-3 py-2 text-[12px] font-semibold uppercase tracking-[0.14em] text-slate-500 label">Markets</p>

          <details class="group mt-1">
            <summary class="flex items-center justify-between px-3 py-2 rounded-lg hover:bg-slate-50 cursor-pointer font-medium text-slate-900">
              <span class="flex items-center gap-3">
                <img src="https://aazofjsssobejhkyyiqv.supabase.co/storage/v1/object/public/AlgoHive/icons/market-analysis-stroke-rounded.svg" alt="" class="w-4 h-4" /><span class="label">Invest</span>
              </span>
              <i class="fa-solid fa-chevron-down text-slate-400 group-open:rotate-180 transition-transform chevron"></i>
            </summary>
            <div class="ml-8 mt-1 flex flex-col sub">
              <a class="px-3 py-2 rounded-lg hover:bg-slate-50 flex items-center gap-2" href="/demo/strategies.html" title="OpenStrategies">
                <img src="https://aazofjsssobejhkyyiqv.supabase.co/storage/v1/object/public/AlgoHive/icons/analysis-text-link-stroke-rounded.svg" alt="" class="w-4 h-4" /><span class="label">OpenStrategies</span>
              </a>
              <a class="px-3 py-2 rounded-lg hover:bg-slate-50 flex items-center gap-2" href="#" title="Funds">
                <img src="https://aazofjsssobejhkyyiqv.supabase.co/storage/v1/object/public/AlgoHive/icons/corporate-stroke-rounded.svg" alt="" class="w-4 h-4" />
                <span class="flex items-center gap-2">
                  <span class="label">Funds</span>
                  <span class="text-[10px] font-semibold uppercase tracking-[0.14em] text-slate-500 border border-slate-200 rounded-full px-2 py-[2px]">Coming Soon</span>
                </span>
              </a>
            <a class="px-3 py-2 rounded-lg hover:bg-slate-50 flex items-center gap-2" href="/demo/markets.html" title="Markets">
                <img src="https://aazofjsssobejhkyyiqv.supabase.co/storage/v1/object/public/AlgoHive/icons/earth-stroke-rounded.svg" alt="" class="w-4 h-4" /><span class="label">Markets</span>
              </a>
            </div>
          </details>

          <a class="mt-1 px-3 py-2 rounded-lg flex items-center gap-2 hover:bg-slate-50 font-medium text-slate-900" href="/demo/news-insights.html" title="News &amp; Insights">
            <img src="https://aazofjsssobejhkyyiqv.supabase.co/storage/v1/object/public/AlgoHive/icons/news-stroke-rounded.svg" alt="" class="w-4 h-4" /><span class="label">News &amp; Insights</span>
          </a>

          <p class="mt-4 px-3 py-2 text-[12px] font-semibold uppercase tracking-[0.14em] text-slate-500 label">Account</p>
          <a class="px-3 py-2 rounded-lg hover:bg-slate-50 flex items-center gap-2 font-medium text-slate-900" href="/demo/holdings.html" title="Holdings">
            <img src="https://aazofjsssobejhkyyiqv.supabase.co/storage/v1/object/public/AlgoHive/icons/pie-chart-09-stroke-rounded.svg" alt="" class="w-4 h-4" /><span class="label">Holdings</span>
          </a>
          <a class="px-3 py-2 rounded-lg hover:bg-slate-50 flex items-center gap-2 font-medium text-slate-900" href="/demo/account-statements.html" title="Account Statements">
            <img src="https://aazofjsssobejhkyyiqv.supabase.co/storage/v1/object/public/AlgoHive/icons/invoice-01-stroke-rounded.svg" alt="" class="w-4 h-4" /><span class="label">Account Statements</span>
          </a>
          <a class="px-3 py-2 rounded-lg hover:bg-slate-50 flex items-center gap-2 font-medium text-slate-900" href="#" title="Rewards">
            <img src="https://aazofjsssobejhkyyiqv.supabase.co/storage/v1/object/public/AlgoHive/icons/gift-stroke-rounded.svg" alt="" class="w-4 h-4" />
            <span class="flex items-center gap-2">
              <span class="label">Rewards</span>
              <span class="text-[10px] font-semibold uppercase tracking-[0.14em] text-slate-500 border border-slate-200 rounded-full px-2 py-[2px]">Coming Soon</span>
            </span>
          </a>
        <details class="group mt-4">
          <summary class="flex items-center justify-between px-3 py-2 rounded-lg hover:bg-slate-50 cursor-pointer font-medium text-slate-900">
            <span class="flex items-center">
              <span class="label">Other</span>
            </span>
            <i class="fa-solid fa-chevron-down text-slate-400 group-open:rotate-180 transition-transform chevron"></i>
          </summary>
          <div class="ml-8 mt-1 flex flex-col sub">
            <a class="px-3 py-2 rounded-lg flex items-center gap-2 hover:bg-slate-50 font-medium text-slate-900" href="#" title="Help">
              <img src="https://aazofjsssobejhkyyiqv.supabase.co/storage/v1/object/public/AlgoHive/icons/help-circle-stroke-rounded.svg" alt="" class="w-4 h-4" /><span class="label">Help</span>
            </a>
            <a class="px-3 py-2 rounded-lg flex items-center gap-2 hover:bg-slate-50 font-medium text-slate-900" href="#" title="Legal">
              <img src="https://aazofjsssobejhkyyiqv.supabase.co/storage/v1/object/public/AlgoHive/icons/audit-01-stroke-rounded.svg" alt="" class="w-4 h-4" /><span class="label">Legal</span>
            </a>
            <a class="px-3 py-2 rounded-lg flex items-center gap-2 hover:bg-slate-50 font-medium text-slate-900" href="#" title="Learn">
              <img src="https://aazofjsssobejhkyyiqv.supabase.co/storage/v1/object/public/AlgoHive/icons/pencil-stroke-rounded.svg" alt="" class="w-4 h-4" /><span class="flex items-center gap-2"><span class="label">Learn</span><span class="text-[10px] font-semibold uppercase tracking-[0.14em] text-slate-500 border border-slate-200 rounded-full px-2 py-[2px]">Coming Soon</span></span>
            </a>
          </div>
        </details>
      </nav>

      <div class="p-3 border-t border-slate-200 footer flex items-center justify-between gap-2">
        <a id="ah-settings" class="btn btn-settings h-10 w-10 p-0 rounded-xl bg-slate-100 hover:bg-slate-200 border-0" href="/demo/settings.html" title="Settings">
          <i class="fa-solid fa-gear"></i>
        </a>
        <button id="ah-collapse" class="btn btn-collapse h-10 w-10 p-0 rounded-xl bg-slate-100 hover:bg-slate-200 border-0" title="Collapse">
          <i class="fa-solid fa-arrow-left"></i>
        </button>
      </div>
    </aside>

    <main class="relative flex-1 min-w-0 bg-white">
      <div id="dashboard-skeleton" class="overflow-y-auto px-4 md:px-6 pt-4 pb-10">
        <div class="flex items-center justify-between gap-4">
          <div class="flex items-start md:items-center gap-3 flex-1 min-w-0">
            <div class="h-11 w-11 rounded-xl skeleton"></div>
            <div class="h-10 w-32 rounded-full skeleton"></div>
          </div>
          <div class="h-11 w-32 rounded-full skeleton"></div>
        </div>

        <div class="px-6 md:px-10 py-6 space-y-6">
          <div class="space-y-2">
            <div class="h-8 w-72 rounded-lg skeleton"></div>
            <div class="h-4 w-80 max-w-full rounded-lg skeleton"></div>
          </div>

          <div class="grid gap-6 sm:grid-cols-2 xl:grid-cols-4">
            <div class="bg-white rounded-xl shadow-sm p-5 space-y-3">
              <div class="h-4 w-24 rounded skeleton"></div>
              <div class="h-8 w-24 rounded skeleton"></div>
              <div class="h-4 w-32 rounded skeleton"></div>
            </div>
            <div class="bg-white rounded-xl shadow-sm p-5 space-y-3">
              <div class="h-4 w-20 rounded skeleton"></div>
              <div class="h-8 w-24 rounded skeleton"></div>
              <div class="h-4 w-28 rounded skeleton"></div>
            </div>
            <div class="bg-white rounded-xl shadow-sm p-5 space-y-3">
              <div class="h-4 w-28 rounded skeleton"></div>
              <div class="h-8 w-28 rounded skeleton"></div>
              <div class="h-4 w-24 rounded skeleton"></div>
            </div>
            <div class="bg-white rounded-xl shadow-sm p-5 space-y-3">
              <div class="h-4 w-24 rounded skeleton"></div>
              <div class="h-8 w-24 rounded skeleton"></div>
              <div class="h-4 w-24 rounded skeleton"></div>
            </div>
          </div>

          <div class="grid gap-6 lg:grid-cols-3">
            <div class="bg-white rounded-xl shadow-sm p-6 lg:col-span-2 space-y-4">
              <div class="h-5 w-56 rounded skeleton"></div>
              <div class="h-4 w-72 rounded skeleton"></div>
              <div class="h-[240px] rounded-lg skeleton"></div>
            </div>
            <div class="bg-white rounded-xl shadow-sm p-5 space-y-4">
              <div class="h-5 w-40 rounded skeleton"></div>
              <div class="h-4 w-52 rounded skeleton"></div>
              <div class="grid grid-cols-3 gap-3">
                <div class="h-16 rounded-lg skeleton"></div>
                <div class="h-16 rounded-lg skeleton"></div>
                <div class="h-16 rounded-lg skeleton"></div>
              </div>
              <div class="space-y-3">
                <div class="h-12 rounded-lg skeleton"></div>
                <div class="h-12 rounded-lg skeleton"></div>
                <div class="h-12 rounded-lg skeleton"></div>
              </div>
            </div>
          </div>

          <div class="bg-white rounded-xl shadow-sm p-5 space-y-4">
            <div class="h-5 w-48 rounded skeleton"></div>
            <div class="h-4 w-64 rounded skeleton"></div>
            <div class="flex flex-wrap gap-2">
              <div class="h-11 w-full md:w-64 rounded-lg skeleton"></div>
              <div class="h-11 w-28 rounded-lg skeleton"></div>
              <div class="h-11 w-28 rounded-lg skeleton"></div>
            </div>
            <div class="h-[260px] rounded-lg skeleton"></div>
          </div>
        </div>
      </div>
      <div class="px-4 md:px-6 pt-4">
        <div class="flex items-center justify-between gap-4">
          <div class="flex items-start md:items-center gap-3 flex-1 min-w-0">
            <button id="ah-mobile-menu-btn" class="md:hidden btn h-11 w-11 p-0 rounded-xl border-0" title="Open Menu">
              <i class="fa-solid fa-bars"></i>
            </button>
            <div class="inline-flex items-center gap-3 rounded-full border border-blue-200 bg-blue-50 px-4 py-2 text-sm text-blue-800 font-semibold">
              <div class="h-8 w-8 rounded-full border border-blue-200 bg-white grid place-items-center text-blue-600 text-base">ⓘ</div>
              <p class="whitespace-normal">Demo Account</p>
            </div>
          </div>

          <button id="profile-btn" class="shrink-0 inline-flex items-center gap-2 rounded-full border border-slate-200 bg-white px-3 py-1.5 shadow-sm hover:bg-slate-50">
            <img id="profile-avatar" src="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='36' height='36'><rect width='100%' height='100%' fill='%23f1f5f9'/></svg>" alt="Profile" class="w-9 h-9 rounded-full object-cover border border-slate-200" />
            <span id="profile-name" class="text-sm font-semibold text-slate-900 hidden sm:inline">Demo User</span>
            <i class="fa-solid fa-chevron-down text-slate-500 text-xs"></i>
          </button>
        </div>
      </div>

      <div class="px-6 md:px-10 py-6 space-y-6">
        <section class="space-y-2" id="header-section">
          <h1 id="dashboard-title" class="text-[28px] md:text-[32px] font-semibold text-slate-900">Dashboard</h1>
          <p class="text-sm md:text-base text-slate-500">Here's your financial snapshot for today.</p>
        </section>

        <section id="stats-cards" class="grid gap-6 sm:grid-cols-2 xl:grid-cols-4"></section>

        <section class="grid gap-6 lg:grid-cols-12" id="performance-grid">
          <article id="portfolio-card" class="card border border-slate-200 shadow-none col-span-12 lg:col-span-8 min-w-0">
            <div class="flex items-center justify-between px-5 py-4 border-b border-slate-200">
              <div>
                <h3 class="font-normal text-slate-800">Your portfolio</h3>
                <div class="mt-1 text-sm text-slate-500" id="pf-updated">—</div>
              </div>
              <div class="flex items-center gap-2">
                <button data-range="1D" class="tab tab-active text-[13px]">1D</button>
                <button data-range="1M" class="tab text-[13px]">1M</button>
                <button data-range="1Y" class="tab text-[13px]">1Y</button>
                <button data-range="ALL" class="tab text-[13px]">All</button>
                <button id="pf-refresh"
                  class="ml-2 h-9 w-9 rounded-lg border border-slate-200 hover:bg-slate-50 grid place-items-center"
                  title="Refresh">
                  <i class="fa-solid fa-rotate-right"></i>
                </button>
              </div>
            </div>
            <div class="px-5 pt-4">
              <div class="flex items-baseline gap-3">
                <div class="text-2xl font-bold" id="pf-value">—</div>
                <div class="text-lg font-normal" id="pf-change" data-sign="-">—</div>
              </div>
            </div>
            <div class="px-2 pb-4 pt-2">
              <div class="h-[260px]"><canvas id="pf-chart" class="max-w-full"></canvas></div>
              <div class="px-3 mt-1 text-[12px] text-slate-400 flex justify-between select-none">
                <span>10 AM</span><span>11 AM</span><span>2 PM</span><span>4 PM</span>
              </div>
            </div>
          </article>

          <aside class="col-span-12 lg:col-span-4 grid gap-6 lg:sticky lg:top-4 self-start min-w-0">
            <div class="card p-5 border border-slate-200" id="strategy-card">
              <div class="flex items-start justify-between gap-3 mb-4">
                <div>
                  <p class="text-xs font-semibold uppercase tracking-[0.12em] text-slate-500">Strategy spotlight</p>
                  <h3 id="strategy-name" class="text-base font-semibold text-slate-900">—</h3>
                  <p id="strategy-code" class="text-xs text-slate-500">Loading your strategies…</p>
                </div>
                <div class="flex gap-2">
                  <button id="strategy-prev" class="h-9 w-9 rounded-lg border border-slate-200 grid place-items-center hover:bg-slate-50" aria-label="Previous strategy">
                    <i class="fa-solid fa-chevron-left text-slate-500"></i>
                  </button>
                  <button id="strategy-next" class="h-9 w-9 rounded-lg border border-slate-200 grid place-items-center hover:bg-slate-50" aria-label="Next strategy">
                    <i class="fa-solid fa-chevron-right text-slate-500"></i>
                  </button>
                </div>
              </div>

              <div class="space-y-4">
                <div class="grid grid-cols-1 sm:grid-cols-3 gap-3">
                  <div class="rounded-lg border border-slate-200 bg-slate-50/60 p-3">
                    <p class="text-xs text-slate-500 font-medium">Allocations</p>
                    <p id="strategy-allocations" class="text-lg font-semibold text-slate-900">—</p>
                  </div>
                  <div class="rounded-lg border border-slate-200 bg-slate-50/60 p-3">
                    <p class="text-xs text-slate-500 font-medium">Allocated</p>
                    <p id="strategy-allocated" class="text-lg font-semibold text-slate-900">—</p>
                  </div>
                  <div class="rounded-lg border border-slate-200 bg-slate-50/60 p-3">
                    <p class="text-xs text-slate-500 font-medium">% Return</p>
                    <p id="strategy-return" class="text-lg font-semibold text-emerald-700">—</p>
                  </div>
                </div>

                <div class="flex items-center justify-between gap-3 rounded-lg border border-slate-200 bg-white p-3 shadow-sm">
                  <div class="flex items-center gap-3 min-w-0">
                    <div id="strategy-asset-logo" class="h-10 w-10 rounded-full bg-slate-100 grid place-items-center text-sm font-semibold text-slate-700">—</div>
                    <div class="min-w-0">
                      <p id="strategy-asset-symbol" class="text-sm font-semibold text-slate-900 truncate">—</p>
                      <p class="text-xs text-slate-500">Top performing asset</p>
                    </div>
                  </div>
                  <span id="strategy-asset-change" class="text-sm font-semibold text-emerald-600">—</span>
                </div>
              </div>
            </div>
          </aside>
        </section>

        <section class="col-span-12 lg:col-span-9 min-w-0">
          <div class="card p-6 rounded-2xl border border-slate-200">
            <div class="flex items-center justify-between mb-5">
              <h3 class="text-lg font-medium text-slate-900">Current holdings</h3>
              <div class="flex gap-2">
                <button id="hold-prev"
                  class="h-9 w-9 rounded-lg border border-slate-200 grid place-items-center hover:bg-slate-50"
                  aria-label="Previous">
                  <i class="fa-solid fa-chevron-left text-slate-500"></i>
                </button>
                <button id="hold-next"
                  class="h-9 w-9 rounded-lg border border-slate-200 grid place-items-center hover:bg-slate-50"
                  aria-label="Next">
                  <i class="fa-solid fa-chevron-right text-slate-500"></i>
                </button>
              </div>
            </div>
            <div id="hold-track" class="flex gap-4 overflow-x-auto no-scrollbar snap-x"></div>
          </div>
        </section>

        <section class="bg-white rounded-xl shadow-sm p-5">
          <div class="flex flex-col gap-3 md:flex-row md:items-center md:justify-between">
            <div>
              <p class="text-lg font-semibold text-slate-900">Top Holdings</p>
              <p class="text-sm text-slate-500">Largest positions across your demo portfolio.</p>
            </div>
            <a href="/demo/holdings.html" class="text-sm font-semibold text-[var(--olive)] hover:text-[var(--olive-700)]">View Holdings</a>
          </div>

          <div class="mt-4 hidden md:block">
            <div class="overflow-x-auto rounded-lg border border-slate-200">
              <table class="min-w-full divide-y divide-slate-200 text-sm" aria-label="Top holdings table">
                <thead class="bg-slate-50 text-left text-xs font-semibold uppercase tracking-wide text-slate-500">
                  <tr>
                    <th class="px-4 py-3">Asset</th>
                    <th class="px-4 py-3">Allocation</th>
                    <th class="px-4 py-3">Market value</th>
                    <th class="px-4 py-3">Strategy mix</th>
                    <th class="px-4 py-3">P/L</th>
                  </tr>
                </thead>
                <tbody id="holdings-rows" class="divide-y divide-slate-100 bg-white"></tbody>
              </table>
            </div>
          </div>

          <div class="mt-4 space-y-3 md:hidden" id="holdings-cards" aria-label="Top holdings list"></div>
        </section>
      </div>
    </main>
  </div>

  <div id="toast-stack" class="toast-stack" aria-live="polite" aria-atomic="true"></div>

  <div id="transaction-modal" class="fixed inset-0 z-50 hidden items-center justify-center bg-black/40 px-4">
    <div class="w-full max-w-lg rounded-2xl bg-white shadow-2xl">
      <div class="flex items-start justify-between gap-3 border-b border-slate-200 px-5 py-4">
        <div>
          <p class="text-xs font-semibold uppercase tracking-[0.14em] text-slate-500">Transaction Details</p>
          <h3 id="modal-title" class="text-lg font-semibold text-slate-900"></h3>
        </div>
        <button id="close-modal" class="text-slate-400 hover:text-slate-600" aria-label="Close modal">
          <i class="fa-solid fa-xmark"></i>
        </button>
      </div>
      <div id="modal-body" class="space-y-3 px-5 py-4 text-sm text-slate-700"></div>
      <div class="flex items-center justify-end gap-2 border-t border-slate-200 px-5 py-4">
        <button id="modal-close-btn" class="h-11 rounded-lg border border-slate-200 bg-white px-4 text-sm font-semibold text-slate-700 hover:bg-slate-50">Close</button>
        <button class="h-11 rounded-lg bg-slate-900 px-4 text-sm font-semibold text-white hover:bg-slate-800">View in ledger</button>
      </div>
    </div>
  </div>

  <div id="funds-modal" class="fixed inset-0 z-50 hidden">
    <div id="funds-overlay" class="absolute inset-0 bg-black/40"></div>
    <div class="absolute inset-0 flex items-center justify-center p-4">
      <div class="w-full max-w-md overflow-hidden rounded-2xl border border-slate-200 bg-white shadow-2xl">
        <div class="flex items-start justify-between gap-3 border-b border-slate-200 px-5 py-4">
          <div>
            <p class="text-xs font-semibold uppercase tracking-[0.2em] text-slate-500">Add funds</p>
            <h3 class="text-lg font-semibold text-slate-900">Top up a demo account</h3>
          </div>
          <button id="funds-close" type="button" class="text-slate-500 hover:text-slate-800" aria-label="Close">
            <i class="fa-solid fa-xmark"></i>
          </button>
        </div>
        <div class="px-5 py-4 space-y-4">
          <label class="block text-sm font-medium text-slate-700">
            Choose account
            <select id="funds-account" class="mt-1 w-full rounded-lg border border-slate-200 px-3 py-2 text-[15px] font-semibold text-slate-900 focus:outline-none focus:ring-2 focus:ring-slate-900">
              <option value="">Loading…</option>
            </select>
          </label>
          <label class="block text-sm font-medium text-slate-700">
            Amount (USD)
            <input id="funds-amount" type="number" inputmode="decimal" min="1" max="100000" step="1" placeholder="500" class="mt-1 w-full rounded-lg border border-slate-200 px-3 py-2 text-[15px] font-semibold text-slate-900 focus:outline-none focus:ring-2 focus:ring-slate-900" />
            <p class="mt-1 text-xs text-slate-500">Minimum $1 — Maximum $100,000.</p>
          </label>
        </div>
        <div class="flex items-center justify-between gap-3 border-t border-slate-200 bg-slate-50/80 px-5 py-3">
          <p class="text-xs text-slate-500">Funds apply to your selected demo account.</p>
          <div class="flex items-center gap-3">
            <button id="funds-cancel" type="button" class="btn bg-white text-slate-700">Cancel</button>
            <button id="funds-submit" type="button" class="btn bg-slate-900 text-white border-slate-900 hover:bg-slate-800">Confirm</button>
          </div>
        </div>
      </div>
    </div>
  </div>

    <script type="module" nonce="ALGOHIVE">
    import { supabase } from '/js/supabase.js';

    const dashboardTitle = document.getElementById('dashboard-title');
    const profileNameEl = document.getElementById('profile-name');
    const profileAvatarEl = document.getElementById('profile-avatar');
    const pfValue = document.getElementById('pf-value');
    const pfChange = document.getElementById('pf-change');
    const pfUpdated = document.getElementById('pf-updated');
    const pfTabs = Array.from(document.querySelectorAll('#portfolio-card .tab'));
    const pfRefresh = document.getElementById('pf-refresh');
    const holdTrack = document.getElementById('hold-track');
    const holdPrev = document.getElementById('hold-prev');
    const holdNext = document.getElementById('hold-next');
    const strategyNameEl = document.getElementById('strategy-name');
    const strategyCodeEl = document.getElementById('strategy-code');
    const strategyAllocationsEl = document.getElementById('strategy-allocations');
    const strategyAllocatedEl = document.getElementById('strategy-allocated');
    const strategyReturnEl = document.getElementById('strategy-return');
    const strategyAssetLogoEl = document.getElementById('strategy-asset-logo');
    const strategyAssetSymbolEl = document.getElementById('strategy-asset-symbol');
    const strategyAssetChangeEl = document.getElementById('strategy-asset-change');
    const strategyPrev = document.getElementById('strategy-prev');
    const strategyNext = document.getElementById('strategy-next');
    const fallbackFirstName = 'Trader';

    const getGreeting = () => {
      const hour = new Date().getHours();
      if (hour < 12) return 'Good Morning';
      if (hour < 18) return 'Good Afternoon';
      return 'Good Evening';
    };

    const setGreetingName = (firstName = fallbackFirstName) => {
      if (dashboardTitle) dashboardTitle.textContent = `${getGreeting()} ${firstName}`;
    };

    const setProfileName = (fullName) => {
      if (profileNameEl && fullName) {
        profileNameEl.textContent = fullName;
      }
    };

    let baseCurrency = 'USD';
    let profileBalance = 0;
    let currentUserId = null;
    let cachedAllocations = [];
    let cachedMetricsMap = new Map();

    const statsData = [
      { title: 'Total Balance', value: '$0.00', changePercent: 0, changeDirection: 'up', subtitle: 'Funds available in demo wallet' },
      { title: 'Total Transactions', value: '179', changePercent: -1.1, changeDirection: 'down', subtitle: 'Number of trades this period' },
      { title: 'Total Revenue', value: '$7,209.29', changePercent: 2.3, changeDirection: 'up', subtitle: 'Net revenue' },
      { title: 'Active Investments', value: '234', changePercent: 6.4, changeDirection: 'up', subtitle: 'Live portfolios following strategies' },
    ];

    const equityRanges = {
      '1D': {
        labels: ['10 AM', '11 AM', '12 PM', '1 PM', '2 PM', '3 PM', '4 PM'],
        data: [14650, 14690, 14710, 14780, 14810, 14840, 14860],
        updated: () => new Date(),
      },
      '1M': {
        labels: ['Week 1', 'Week 2', 'Week 3', 'Week 4'],
        data: [13650, 14020, 14310, 14860],
        updated: () => new Date(),
      },
      '1Y': {
        labels: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'],
        data: [9200, 9600, 10150, 10780, 11240, 11810, 12360, 12840, 13320, 13780, 14240, 14860],
        updated: () => new Date('2024-12-31'),
      },
      ALL: {
        labels: ['2021', '2022', '2023', '2024'],
        data: [6200, 8200, 10900, 14860],
        updated: () => new Date('2024-12-31'),
      },
    };

    const fallbackHoldings = [
      { symbol: 'BTC', name: 'Bitcoin', weightPct: 24.8, value: 18250, changePct: 1.8, breakdown: [{ strategyName: 'Momentum BTC', weightPct: 14.4, value: 10600 }] },
      { symbol: 'ETH', name: 'Ethereum', weightPct: 21.6, value: 15850, changePct: 2.3, breakdown: [{ strategyName: 'ETH Growth', weightPct: 12.2, value: 8950 }] },
      { symbol: 'QQQ', name: 'Invesco QQQ', weightPct: 18.2, value: 13420, changePct: 0.7, breakdown: [{ strategyName: 'Tech Momentum', weightPct: 10.5, value: 7750 }] },
      { symbol: 'GLD', name: 'SPDR Gold Shares', weightPct: 17.4, value: 12820, changePct: -0.4, breakdown: [{ strategyName: 'Defensive', weightPct: 9.2, value: 6780 }] },
      { symbol: 'SPY', name: 'SPDR S&P 500', weightPct: 15.3, value: 11240, changePct: 1.1, breakdown: [{ strategyName: 'Index Core', weightPct: 8.1, value: 5960 }] },
    ];

    const fallbackStrategies = [
      {
        id: 'demo-strat-1',
        name: 'Momentum BTC',
        code: 'MOM-BTC',
        allocationsCount: 3,
        allocated: 12000,
        latestValue: 13250,
        currency: 'USD',
        topAsset: { symbol: 'BTC', logo: null, changePct: 2.4 },
      },
      {
        id: 'demo-strat-2',
        name: 'Tech Momentum',
        code: 'TECH-MOM',
        allocationsCount: 2,
        allocated: 9800,
        latestValue: 10340,
        currency: 'USD',
        topAsset: { symbol: 'QQQ', logo: null, changePct: 1.2 },
      },
    ];

    const strategyMetricsCache = new Map();
    let strategySpotlights = [];
    let strategyIndex = 0;

    function normalizeWeight(weight = 0) {
      const value = Number(weight);
      if (!Number.isFinite(value) || value <= 0) return 0;
      return value > 1 ? value / 100 : value;
    }

    function formatMoney(value = 0, currency = 'USD') {
      try {
        return Number(value || 0).toLocaleString('en-US', {
          style: 'currency',
          currency,
          minimumFractionDigits: 2,
          maximumFractionDigits: 2,
        });
      } catch (error) {
        return `$${Number(value || 0).toFixed(2)}`;
      }
    }

    async function fetchDemoAllocations(profileId = '') {
      if (!profileId) return [];
      try {
        const { data, error } = await supabase
          .from('demo_allocations')
          .select('id, strategy_id, amount_invested, latest_value, base_currency, status, strategies(name, code)')
          .eq('demo_profile_id', profileId);

        if (error) throw error;
        return data || [];
      } catch (error) {
        console.warn('demo_allocations fetch failed', error);
        return [];
      }
    }

    async function fetchStrategyMetrics(strategyIds = []) {
      const ids = Array.from(new Set(strategyIds.filter(Boolean)));
      const results = new Map();
      const uncached = ids.filter((id) => !strategyMetricsCache.has(id));

      if (uncached.length) {
        try {
          const { data, error } = await supabase
            .from('strategy_metrics')
            .select('strategy_id, portfolio_holdings')
            .in('strategy_id', uncached);

          if (error) throw error;
          (data || []).forEach((row) => strategyMetricsCache.set(row.strategy_id, row));
        } catch (error) {
          console.warn('strategy_metrics fetch failed', error);
        }
      }

      ids.forEach((id) => {
        if (strategyMetricsCache.has(id)) results.set(id, strategyMetricsCache.get(id));
      });
      return results;
    }

    function aggregateHoldings(allocations = [], metricsMap = new Map()) {
      const activeAllocs = allocations.filter((row) => (row?.status || '').toLowerCase() === 'active');
      const rows = activeAllocs.length ? activeAllocs : allocations;
      const holdingsMap = new Map();

      let totalAmount = 0;
      let currency = 'USD';

      rows.forEach((allocation) => {
        const amount = Number(allocation?.latest_value ?? allocation?.amount_invested ?? 0) || 0;
        if (amount <= 0) return;

        currency = allocation?.base_currency || currency;
        totalAmount += amount;

        const metrics = metricsMap.get(allocation?.strategy_id) || {};
        const strategyName = allocation?.strategies?.name || allocation?.strategies?.code || `Strategy ${allocation?.strategy_id || ''}`;
        const holdings = Array.isArray(metrics?.portfolio_holdings) ? metrics.portfolio_holdings : [];

        holdings.forEach((holding) => {
          const weight = normalizeWeight(holding?.weight_pct ?? holding?.weight);
          if (!weight) return;

          const value = amount * weight;
          const symbol = (holding?.symbol || holding?.name || '—').toString().trim();
          if (!symbol) return;

          if (!holdingsMap.has(symbol)) {
            holdingsMap.set(symbol, {
              symbol,
              name: (holding?.company_name || holding?.name || symbol || 'Unknown').toString().trim() || 'Unknown',
              logo: holding?.logo_url || holding?.logo || null,
              value: 0,
              changePct: holding?.daily_change_pct ?? holding?.change_pct ?? null,
              breakdown: [],
            });
          }

          const record = holdingsMap.get(symbol);
          record.value += value;
          const existing = record.breakdown.find((item) => item.strategyId === allocation?.strategy_id);
          const contribution = { strategyId: allocation?.strategy_id, strategyName, weightPct: weight * 100, value };
          if (existing) {
            existing.value += value;
            existing.weightPct = weight * 100;
          } else {
            record.breakdown.push(contribution);
          }
          if (record.changePct == null && holding?.daily_change_pct != null) {
            record.changePct = holding.daily_change_pct;
          }
        });
      });

      const holdings = Array.from(holdingsMap.values())
        .map((item) => ({
          ...item,
          weightPct: totalAmount ? (item.value / totalAmount) * 100 : 0,
        }))
        .sort((a, b) => b.value - a.value);

      return { holdings, totalAmount, currency };
    }

    let chartInstance = null;
    let currentRange = '1D';

    function formatCurrency(value = 0, currency = 'USD') {
      try {
        return value.toLocaleString('en-US', {
          style: 'currency',
          currency,
          minimumFractionDigits: 2,
          maximumFractionDigits: 2,
        });
      } catch (error) {
        return `$${Number(value || 0).toFixed(2)}`;
      }
    }

    function setBalanceCard(value = 0, currency = baseCurrency) {
      profileBalance = Number(value) || 0;
      baseCurrency = currency || 'USD';
      statsData[0].value = formatCurrency(profileBalance, baseCurrency);
      renderStats();
    }

    async function hydrateBalanceFromDemo(userId = '') {
      if (!userId) {
        setBalanceCard(profileBalance, baseCurrency);
        return;
      }
      try {
        const { data, error } = await supabase
          .from('demo_profiles')
          .select('balance, base_currency')
          .eq('id', userId)
          .maybeSingle();

        if (error) throw error;
        setBalanceCard(data?.balance ?? 0, data?.base_currency || 'USD');
      } catch (error) {
        console.warn('demo_profiles balance fetch failed; using fallback balance', error);
        setBalanceCard(profileBalance, baseCurrency);
      }
    }

    async function hydrateProfileFromLive() {
      try {
        const { data: userWrap } = await supabase.auth.getUser();
        const user = userWrap?.user;
        if (!user) {
          setGreetingName();
          setProfileName('Demo User');
          hydrateBalanceFromDemo();
          return;
        }

        currentUserId = user.id;

        const { data: profile } = await supabase
          .from('profiles')
          .select('first_name, last_name, avatar_url')
          .eq('id', user.id)
          .maybeSingle();

        const firstName = profile?.first_name || user.user_metadata?.first_name || fallbackFirstName;
        const lastName = profile?.last_name || user.user_metadata?.last_name || '';
        const fullName = [firstName, lastName].filter(Boolean).join(' ').trim();

        setGreetingName(firstName);
        setProfileName(fullName || firstName);

        const avatarUrl = profile?.avatar_url || user.user_metadata?.avatar_url;
        if (avatarUrl && profileAvatarEl) profileAvatarEl.src = avatarUrl;

        hydrateBalanceFromDemo(user.id);
      } catch (error) {
        console.warn('Profile hydration failed; using defaults', error);
      }
    }

    setGreetingName();
    const profileReady = hydrateProfileFromLive().catch(() => null);

    const statsContainer = document.getElementById('stats-cards');
    const holdingsRows = document.getElementById('holdings-rows');
    const holdingsCards = document.getElementById('holdings-cards');
    const skeletonLayer = document.getElementById('dashboard-skeleton');
    const fundsModal = document.getElementById('funds-modal');
    const fundsOverlay = document.getElementById('funds-overlay');
    const fundsClose = document.getElementById('funds-close');
    const fundsAccount = document.getElementById('funds-account');
    const fundsAmount = document.getElementById('funds-amount');
    const fundsCancel = document.getElementById('funds-cancel');
    const fundsSubmit = document.getElementById('funds-submit');
    const toastStack = document.getElementById('toast-stack');

    function showToast(message, tone = 'ok') {
      if (!toastStack || !message) return;

      const iconMap = {
        ok: 'fa-check',
        warn: 'fa-triangle-exclamation',
        err: 'fa-circle-xmark',
      };

      const toneKey = ['ok', 'warn', 'err'].includes(tone) ? tone : 'ok';
      const toast = document.createElement('article');
      toast.className = 'toast-card';
      toast.dataset.tone = toneKey;

      toast.innerHTML = `
        <span class="toast-icon"><i class="fa-solid ${iconMap[toneKey]}"></i></span>
        <div class="toast-content"><p class="toast-message">${message}</p></div>
        <button class="toast-dismiss" aria-label="Dismiss notification"><i class="fa-solid fa-xmark"></i></button>
      `;

      const removeToast = () => {
        toast.classList.add('toast-card--leaving');
        setTimeout(() => toast.remove(), 320);
      };

      toast.querySelector('.toast-dismiss')?.addEventListener('click', removeToast);
      toastStack.appendChild(toast);
      setTimeout(removeToast, 4200);
    }

    function renderStats() {
      if (!statsContainer) return;
      statsContainer.innerHTML = statsData
        .map((item) => {
          const positive = item.changeDirection === 'up';
          const pillClass = positive ? 'bg-green-100 text-green-700' : 'bg-red-100 text-red-700';
          const arrow = positive ? '↑' : '↓';
          const isBalanceCard = item.title === 'Total Balance';
          const addFundsCta = isBalanceCard
              ? `<div class="pt-2"><button data-add-funds class="btn btn-olive w-full justify-center text-sm">
                  <i class="fa-solid fa-plus text-xs"></i><span>Add funds</span>
                </button></div>`
              : '';
          return `
            <article class="bg-white rounded-xl stat-card p-5 space-y-3 border border-slate-100">
              <p class="text-sm font-semibold text-slate-500">${item.title}</p>
              <div class="flex items-center justify-between gap-3">
                <p class="text-[28px] md:text-[32px] font-bold text-slate-900">${item.value}</p>
                <span class="inline-flex items-center gap-1 rounded-full px-3 py-1 text-xs font-semibold ${pillClass}">${arrow} ${item.changePercent}%</span>
              </div>
              <p class="text-sm text-slate-500">${item.subtitle}</p>
              ${addFundsCta}
            </article>`;
        })
        .join('');

      attachAddFundsHandler();
    }

    function setActiveRange(range = '1D') {
      currentRange = range;
      pfTabs.forEach((btn) => {
        const isActive = btn.dataset.range === range;
        btn.classList.toggle('tab-active', isActive);
      });
    }

    function renderEquityChart(rangeKey = '1D') {
      const cfg = equityRanges[rangeKey] || equityRanges['1D'];
      if (!cfg) return;
      setActiveRange(rangeKey);

      const labels = cfg.labels || [];
      const points = cfg.data || [];
      const first = points[0] || 0;
      const last = points[points.length - 1] || 0;
      const changePct = first ? ((last - first) / first) * 100 : 0;

      if (pfValue) pfValue.textContent = formatCurrency(last, baseCurrency);
      if (pfChange) {
        pfChange.textContent = `${changePct >= 0 ? '+' : ''}${changePct.toFixed(2)}%`;
        pfChange.classList.toggle('text-green-600', changePct >= 0);
        pfChange.classList.toggle('text-rose-600', changePct < 0);
      }
      if (pfUpdated) {
        const ts = cfg.updated ? cfg.updated() : new Date();
        pfUpdated.textContent = new Date(ts).toLocaleString('en-ZA', {
          month: 'long',
          day: '2-digit',
          hour: '2-digit',
          minute: '2-digit',
        });
      }

      const ctxEl = document.getElementById('pf-chart');
      if (!ctxEl) return;
      const ctx = ctxEl.getContext('2d');
      const gradient = ctx.createLinearGradient(0, 0, 0, 260);
      gradient.addColorStop(0, 'rgba(85,107,47,0.35)');
      gradient.addColorStop(1, 'rgba(85,107,47,0.06)');

      if (chartInstance) chartInstance.destroy();

      chartInstance = new Chart(ctx, {
        type: 'line',
        data: {
          labels,
          datasets: [
            {
              data: points,
              tension: 0.35,
              borderWidth: 2,
              borderColor: '#556B2F',
              backgroundColor: gradient,
              fill: true,
              pointRadius: 0,
            },
          ],
        },
        options: {
          responsive: true,
          maintainAspectRatio: false,
          plugins: { legend: { display: false }, tooltip: { enabled: true, displayColors: false } },
          scales: { x: { grid: { display: false } }, y: { grid: { color: 'rgba(148, 163, 184, 0.3)' }, ticks: { color: '#94a3b8', maxTicksLimit: 4 } } },
        },
      });
    }

    const buildLogo = (symbol = '', logoUrl = null, size = 'h-11 w-11', bgTone = 'bg-slate-100') => {
      const clean = (symbol || '—').toString();
      if (logoUrl) {
        return `<img src="${logoUrl}" alt="${clean} logo" class="${size} rounded-full object-cover border border-slate-200" loading="lazy" />`;
      }
      return `<div class="${size} rounded-full ${bgTone} grid place-items-center text-slate-800 font-semibold">${clean.slice(0, 2).toUpperCase()}</div>`;
    };

    function renderHoldingsCarousel(data = [], currency = baseCurrency) {
      if (!holdTrack) return;
      const rows = Array.isArray(data) ? data.slice(0, 8) : [];
      if (!rows.length) {
        holdTrack.innerHTML = '<div class="text-sm text-slate-500">No holdings yet.</div>';
        return;
      }

      const chip = (pct = 0) => {
        const tone = pct >= 0 ? 'bg-emerald-50 text-emerald-700' : 'bg-rose-50 text-rose-700';
        const label = `${pct >= 0 ? '+' : ''}${Number(pct || 0).toFixed(2)}%`;
        return `<span class="inline-flex items-center rounded-full px-2.5 py-1 text-xs font-semibold ${tone}">${label}</span>`;
      };

      holdTrack.innerHTML = rows
        .map((h, idx) => {
          const bg = idx % 2 === 0 ? '#eef2ff' : '#e2f3ec';
          const price = formatMoney(h.value || 0, currency);
          return `
            <article class="min-w-[280px] max-w-[280px] snap-start bg-white border border-slate-200 rounded-2xl p-5 flex justify-between items-center">
              <div class="flex items-center gap-3">
                ${buildLogo(h.symbol || h.ticker, h.logo, 'h-11 w-11', 'bg-indigo-50')}
                <div>
                  <div class="text-sm font-normal text-slate-900">${h.symbol || h.ticker || 'Asset'}</div>
                  <div class="text-xs text-slate-500">${h.name || 'Holding'}</div>
                </div>
              </div>
              <div class="text-right">
                <div class="text-lg font-normal text-slate-900">${price}</div>
                <div class="mt-2">${chip(h.changePct ?? 0)}</div>
              </div>
            </article>
          `;
        })
        .join('');

      const CARD_W = 284;
      if (holdPrev) holdPrev.onclick = () => holdTrack.scrollBy({ left: -CARD_W, behavior: 'smooth' });
      if (holdNext) holdNext.onclick = () => holdTrack.scrollBy({ left: CARD_W, behavior: 'smooth' });
    }

    function summarizeMix(asset) {
      const mix = (asset.breakdown || []).slice(0, 2);
      if (!mix.length) return '—';
      return mix
        .map((row) => `${row.strategyName || 'Strategy'} (${row.weightPct?.toFixed?.(1) || '0.0'}%)`)
        .join(', ');
    }

    function renderHoldingsView(data = [], currency = 'USD') {
      const rows = Array.isArray(data) ? data.slice(0, 5) : [];
      holdingsRows.innerHTML = '';
      holdingsCards.innerHTML = '';

      if (!rows.length) {
        holdingsRows.innerHTML = '<tr><td class="px-4 py-4 text-sm text-slate-500" colspan="5">No holdings available yet.</td></tr>';
        holdingsCards.innerHTML = '<div class="rounded-lg border border-slate-200 bg-white p-4 text-sm text-slate-500">No holdings available yet.</div>';
        return;
      }

      rows.forEach((asset, idx) => {
        const tone = asset.changePct == null ? 'text-slate-600' : asset.changePct >= 0 ? 'text-emerald-600' : 'text-rose-600';
        const changeLabel = asset.changePct == null ? '—' : `${asset.changePct >= 0 ? '+' : ''}${Number(asset.changePct).toFixed(2)}%`;
        const mixLabel = summarizeMix(asset);
        const logo = buildLogo(asset.symbol, asset.logo, 'h-10 w-10');

        const tr = document.createElement('tr');
        tr.className = idx % 2 === 1 ? 'bg-slate-50/50' : '';
        tr.innerHTML = `
          <td class="px-4 py-3 font-semibold text-slate-900">
            <div class="flex items-center gap-3">
              ${logo}
              <div>
                <div class="text-[var(--olive)] font-semibold">${asset.symbol}</div>
                <div class="text-xs text-slate-500">${asset.name || asset.symbol}</div>
              </div>
            </div>
          </td>
          <td class="px-4 py-3 text-slate-700">${(asset.weightPct || 0).toFixed(2)}%</td>
          <td class="px-4 py-3 text-slate-700">${formatMoney(asset.value, currency)}</td>
          <td class="px-4 py-3 text-slate-700">${mixLabel}</td>
          <td class="px-4 py-3 font-semibold ${tone}">${changeLabel}</td>
        `;
        holdingsRows.appendChild(tr);

        const card = document.createElement('div');
        card.className = 'rounded-lg border border-slate-200 bg-white p-4 shadow-sm space-y-2';
        card.innerHTML = `
          <div class="flex items-center gap-3">
            ${buildLogo(asset.symbol, asset.logo, 'h-10 w-10')}
            <div class="flex-1">
              <div class="flex items-center justify-between">
                <p class="text-base font-semibold text-slate-900">${asset.symbol}</p>
                <span class="text-xs font-semibold ${tone}">${changeLabel}</span>
              </div>
              <p class="text-xs text-slate-500">${asset.name || asset.symbol}</p>
            </div>
          </div>
          <div class="flex items-center justify-between text-sm text-slate-700 mt-2">
            <span>${(asset.weightPct || 0).toFixed(2)}% alloc</span>
            <span class="font-semibold">${formatMoney(asset.value, currency)}</span>
          </div>
          <p class="text-xs text-slate-500">${mixLabel}</p>
        `;
        holdingsCards.appendChild(card);
      });
    }

    async function loadTopHoldings() {
      try {
        const allocations = await fetchDemoAllocations(currentUserId || '');
        cachedAllocations = allocations;
        let holdingsSet = fallbackHoldings;
        let metricsMap = new Map();

        if (allocations.length) {
          const strategyIds = allocations.map((row) => row?.strategy_id).filter(Boolean);
          metricsMap = await fetchStrategyMetrics(strategyIds);
          cachedMetricsMap = metricsMap;
          const { holdings, currency } = aggregateHoldings(allocations, metricsMap);
          baseCurrency = currency || baseCurrency;
          holdingsSet = holdings.length ? holdings : fallbackHoldings;
        }

        renderHoldingsView(holdingsSet, baseCurrency);
        renderHoldingsCarousel(holdingsSet, baseCurrency);
        const strategyData = buildStrategySpotlights(allocations, metricsMap);
        strategySpotlights = strategyData.length ? strategyData : [];
        renderStrategySpotlight(strategyIndex);
      } catch (error) {
        console.warn('Top holdings load failed; showing fallback', error);
        renderHoldingsView(fallbackHoldings, baseCurrency);
        renderHoldingsCarousel(fallbackHoldings, baseCurrency);
        strategySpotlights = [];
        renderStrategySpotlight(strategyIndex);
      }
    }

    function computeReturnPct(allocated = 0, latestValue = 0) {
      const alloc = Number(allocated) || 0;
      const latest = Number(latestValue) || 0;
      if (!alloc || alloc <= 0) return 0;
      return (latest / alloc) * 100;
    }

    function deriveTopAsset(holdings = []) {
      if (!Array.isArray(holdings) || !holdings.length) return null;
      let winner = null;
      holdings.forEach((holding) => {
        const symbol = (holding?.symbol || holding?.name || '').toString().trim();
        if (!symbol) return;
        const change = Number(holding?.change_pct ?? holding?.daily_change_pct);
        const weight = normalizeWeight(holding?.weight_pct ?? holding?.weight) * 100;
        const score = Number.isFinite(change) ? change : weight;
        if (winner == null || score > winner.score) {
          winner = {
            symbol,
            logo: holding?.logo_url || holding?.logo || null,
            changePct: Number.isFinite(change) ? change : null,
            score,
          };
        }
      });
      return winner;
    }

    function buildStrategySpotlights(allocations = [], metricsMap = new Map()) {
      const grouped = new Map();

      allocations.forEach((allocation) => {
        const strategyId = allocation?.strategy_id;
        if (!strategyId) return;

        const group = grouped.get(strategyId) || {
          id: strategyId,
          name: allocation?.strategies?.name || allocation?.strategies?.code || `Strategy ${strategyId}`,
          code: allocation?.strategies?.code || '',
          allocationsCount: 0,
          allocated: 0,
          latestValue: 0,
          currency: allocation?.base_currency || baseCurrency,
          topAsset: null,
        };

        group.allocationsCount += 1;
        group.allocated += Number(allocation?.amount_invested ?? 0) || 0;
        group.latestValue += Number(allocation?.latest_value ?? allocation?.amount_invested ?? 0) || 0;
        group.currency = allocation?.base_currency || group.currency;

        const metrics = metricsMap.get(strategyId);
        if (metrics?.portfolio_holdings) {
          const top = deriveTopAsset(metrics.portfolio_holdings);
          if (top) group.topAsset = top;
        }

        grouped.set(strategyId, group);
      });

      return Array.from(grouped.values()).map((item) => ({
        ...item,
        returnPct: computeReturnPct(item.allocated, item.latestValue),
        topAsset: item.topAsset || { symbol: '—', logo: null, changePct: null },
      }));
    }

    function renderTopAsset(asset = { symbol: '—', logo: null, changePct: null }) {
      if (strategyAssetLogoEl) {
        strategyAssetLogoEl.style.backgroundImage = asset.logo ? `url('${asset.logo}')` : 'none';
        strategyAssetLogoEl.style.backgroundSize = 'cover';
        strategyAssetLogoEl.style.backgroundPosition = 'center';
        strategyAssetLogoEl.textContent = asset.logo ? '' : (asset.symbol || '—').slice(0, 3).toUpperCase();
      }
      if (strategyAssetSymbolEl) strategyAssetSymbolEl.textContent = asset.symbol || '—';

      if (strategyAssetChangeEl) {
        if (asset.changePct == null || Number.isNaN(asset.changePct)) {
          strategyAssetChangeEl.textContent = '—';
          strategyAssetChangeEl.classList.remove('text-emerald-600', 'text-rose-600');
        } else {
          const positive = Number(asset.changePct) >= 0;
          strategyAssetChangeEl.textContent = `${positive ? '+' : ''}${Number(asset.changePct).toFixed(2)}%`;
          strategyAssetChangeEl.classList.toggle('text-emerald-600', positive);
          strategyAssetChangeEl.classList.toggle('text-rose-600', !positive);
        }
      }
    }

    function renderStrategySpotlight(index = 0) {
      const list = (strategySpotlights.length ? strategySpotlights : fallbackStrategies).map((item) => ({
        ...item,
        returnPct: item.returnPct != null ? item.returnPct : computeReturnPct(item.allocated, item.latestValue),
        topAsset: item.topAsset || { symbol: '—', logo: null, changePct: null },
      }));

      if (!list.length) return;

      const len = list.length;
      const safeIndex = ((index % len) + len) % len;
      strategyIndex = safeIndex;
      const current = list[safeIndex];

      if (strategyNameEl) strategyNameEl.textContent = current?.name || 'Strategy';
      if (strategyCodeEl) strategyCodeEl.textContent = current?.code ? `Code: ${current.code}` : 'demo_allocation';
      if (strategyAllocationsEl) strategyAllocationsEl.textContent = `${current?.allocationsCount || 0}`;
      if (strategyAllocatedEl) strategyAllocatedEl.textContent = formatCurrency(current?.allocated || 0, current?.currency || baseCurrency);
      if (strategyReturnEl) strategyReturnEl.textContent = `${Number(current?.returnPct || 0).toFixed(2)}%`;

      renderTopAsset(current?.topAsset);
    }

    function wireStrategyNav() {
      strategyPrev?.addEventListener('click', () => {
        const len = (strategySpotlights.length ? strategySpotlights : fallbackStrategies).length;
        if (!len) return;
        renderStrategySpotlight(strategyIndex - 1);
      });

      strategyNext?.addEventListener('click', () => {
        const len = (strategySpotlights.length ? strategySpotlights : fallbackStrategies).length;
        if (!len) return;
        renderStrategySpotlight(strategyIndex + 1);
      });
    }

    function wirePortfolioCard() {
      pfTabs.forEach((btn) => {
        btn.addEventListener('click', () => renderEquityChart(btn.dataset.range || '1D'));
      });

      pfRefresh?.addEventListener('click', () => renderEquityChart(currentRange));
    }

    function populateFundsAccount() {
      if (!fundsAccount) return;
      const label = profileNameEl?.textContent?.trim() || 'Demo account';
      const optionValue = currentUserId || 'demo-account';
      fundsAccount.innerHTML = '';
      const opt = document.createElement('option');
      opt.value = optionValue;
      opt.textContent = optionValue === 'demo-account' ? `${label} (local)` : label;
      fundsAccount.appendChild(opt);
    }

    function openFundsModal() {
      populateFundsAccount();
      fundsModal?.classList.remove('hidden');
      if (fundsAmount) {
        fundsAmount.value = '';
        fundsAmount.focus();
      }
    }

    function closeFundsModal() {
      fundsModal?.classList.add('hidden');
    }

    async function submitFunds() {
      if (!fundsAccount || !fundsAmount) return;

      const amount = Number.parseFloat(fundsAmount.value);
      if (!Number.isFinite(amount) || amount <= 0) {
        showToast('Enter a valid amount above 0.', 'warn');
        return;
      }

      const nextBalance = profileBalance + amount;
      setBalanceCard(nextBalance, baseCurrency);

      if (currentUserId) {
        try {
          const { data, error } = await supabase
            .from('demo_profiles')
            .update({ balance: nextBalance })
            .eq('id', currentUserId)
            .select('balance, base_currency')
            .maybeSingle();

          if (error) throw error;
          setBalanceCard(data?.balance ?? nextBalance, data?.base_currency || baseCurrency);
          showToast('Funds added successfully.', 'ok');
        } catch (error) {
          console.warn('Add funds failed', error);
          showToast('Unable to add funds right now. Please try again later.', 'err');
        }
      } else {
        console.warn('Add funds attempted without a signed-in user.');
        showToast('Demo balance updated locally.', 'ok');
      }

      closeFundsModal();
    }

    function attachAddFundsHandler() {
      const addFundsBtn = document.querySelector('[data-add-funds]');
      if (!addFundsBtn) return;
      addFundsBtn.addEventListener('click', openFundsModal);
    }

    function wireFundsModal() {
      fundsClose?.addEventListener('click', closeFundsModal);
      fundsOverlay?.addEventListener('click', closeFundsModal);
      fundsCancel?.addEventListener('click', closeFundsModal);
      fundsSubmit?.addEventListener('click', submitFunds);
    }

    function hideSkeleton() {
      if (!skeletonLayer) return;
      skeletonLayer.style.opacity = '0';
      setTimeout(() => skeletonLayer.remove(), 260);
    }

    function wireSidebar() {
      const sidebar = document.getElementById('ah-sidebar');
      const overlay = document.getElementById('ah-overlay');
      const mobileBtn = document.getElementById('ah-mobile-menu-btn');
      const collapseBtn = document.getElementById('ah-collapse');

      mobileBtn?.addEventListener('click', () => {
        sidebar?.classList.add('is-open');
        overlay?.classList.remove('hidden');
      });

      overlay?.addEventListener('click', () => {
        sidebar?.classList.remove('is-open');
        overlay?.classList.add('hidden');
      });

      collapseBtn?.addEventListener('click', () => {
        const layout = document.getElementById('layout');
        const isCollapsed = sidebar?.dataset.collapsed === 'true';
        const next = !isCollapsed;
        sidebar.dataset.collapsed = String(next);
        layout?.classList.toggle('is-collapsed', next);
      });
    }

    async function init() {
      await profileReady;
      renderStats();
      renderEquityChart(currentRange);
      await loadTopHoldings();
      wirePortfolioCard();
      wireStrategyNav();
      wireFundsModal();
      wireSidebar();
      hideSkeleton();
    }

    document.addEventListener('DOMContentLoaded', () => { init(); });
  </script>
</body>

</html>
