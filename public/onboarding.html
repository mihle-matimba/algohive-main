<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>AlgoHive — Onboarding</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    :root {
      --olive: #7e8d52;
      --olive-700: #576138;
      --ink: #0B1215;
    }
    body { background: #f6f7f6; }
    .preloader {
      position: fixed;
      inset: 0;
      z-index: 50;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      gap: 0.5rem;
      background: #f6f7f6;
      color: var(--ink);
      font-family: 'Inter', system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      transition: opacity .45s ease;
    }
    .preloader__logo {
      height: 3rem;
      width: auto;
      animation: heroSlideUp .6s ease-out, preloaderPulse 2.4s ease-in-out .45s infinite;
    }
    .preloader__brand {
      font-size: 1.25rem;
      font-weight: 600;
      letter-spacing: -0.01em;
      animation: heroSlideUp .6s ease-out .08s both;
    }
    .preloader__tagline {
      font-size: .95rem;
      color: rgba(11, 18, 21, 0.68);
      animation: heroSlideUp .6s ease-out .14s both;
    }
    .preloader--hide {
      opacity: 0;
      pointer-events: none;
    }
    .btn-shine { position: relative; overflow: hidden; transition: transform .25s ease, box-shadow .25s ease; }
    .btn-shine::before { content: ""; position: absolute; inset: 0; pointer-events: none; background: linear-gradient(120deg, transparent 0%, rgba(255,255,255,.7) 50%, transparent 100%); transform: translateX(-120%); transition: transform .8s ease; }
    .btn-shine:hover::before { transform: translateX(120%); }
    .btn-shine:hover { transform: translateY(-1px); box-shadow: 0 10px 24px -16px rgba(11,18,21,0.4); }
    .btn-shine:disabled { box-shadow: none; transform: none; }
    .btn-shine:disabled::before { display: none; }
    .auth-left { animation: heroSlideUp .7s ease-out .25s both; }
    .auth-right { animation: heroScaleIn .9s cubic-bezier(.2,.8,.2,1) .35s both; }
    @keyframes heroScaleIn { 0% { transform: scale(1.06); opacity: 0; } 100% { transform: scale(1); opacity: 1; } }
    @keyframes heroSlideUp { 0% { transform: translateY(16px); opacity: 0; } 100% { transform: translateY(0); opacity: 1; } }
    @keyframes preloaderPulse { 0%, 100% { opacity: .45; } 50% { opacity: 1; } }
    .swap-anim { animation: heroSlideUp .5s ease both; }
    .orb-gradient {
      background-image: radial-gradient(circle at 20% 20%, rgba(255,255,255,0.75), rgba(255,255,255,0) 60%),
                        radial-gradient(circle at 80% 20%, rgba(126,141,82,0.18), rgba(255,255,255,0) 55%),
                        radial-gradient(circle at 50% 80%, rgba(126,141,82,0.12), rgba(255,255,255,0) 55%);
    }
    .no-scrollbar::-webkit-scrollbar { display: none; }
    .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
    .input-error {
      border-color: rgba(248, 113, 113, 0.55) !important;
      box-shadow: 0 0 0 1px rgba(248, 113, 113, 0.28);
    }
    .field-error {
      outline: 2px solid rgba(248, 113, 113, 0.35);
      outline-offset: 4px;
      border-radius: 1.25rem;
    }
    .step-flow {
      position: relative;
      margin-left: 0.75rem;
    }
    .step-flow li {
      position: relative;
      list-style: none;
      padding-left: 3rem;
    }
    .step-flow li::before {
      content: "";
      position: absolute;
      left: 1.125rem;
      top: 2.5rem;
      bottom: -2.5rem;
      width: 1px;
      background: linear-gradient(to bottom, rgba(148,163,184,0.28), rgba(148,163,184,0.08));
    }
    .step-flow li:last-child::before {
      bottom: 0.75rem;
      background: linear-gradient(to bottom, rgba(148,163,184,0.28), rgba(148,163,184,0));
    }
    .step-circle {
      transition: all .25s ease;
    }
    .step-item--active .step-circle {
      border-color: var(--olive);
      background: rgba(126, 141, 82, 0.12);
      color: var(--olive-700);
    }
    .step-item--complete .step-circle {
      background: var(--olive);
      color: #fff;
      border-color: var(--olive);
    }
    .toast-stack {
      position: fixed;
      top: 1.5rem;
      right: 1.5rem;
      display: flex;
      flex-direction: column;
      gap: 0.75rem;
      z-index: 400;
      pointer-events: none;
    }
    .toast-card {
      pointer-events: auto;
      display: flex;
      align-items: flex-start;
      gap: 0.75rem;
      min-width: 260px;
      max-width: 360px;
      padding: 0.9rem 1rem;
      border-radius: 1rem;
      background-image: linear-gradient(135deg, #0b1215, #1c2714);
      color: #f8fafc;
      box-shadow: 0 18px 42px -18px rgba(11, 18, 21, 0.7);
      border: 1px solid rgba(126, 141, 82, 0.45);
      transform: translateX(120%);
      opacity: 0;
      animation: toastIn 0.45s cubic-bezier(.22, 1, .36, 1) forwards;
    }
    .toast-card[data-tone="err"],
    .toast-card[data-tone="warn"] {
      border-color: rgba(248, 113, 113, 0.55);
    }
    .toast-icon {
      flex-shrink: 0;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      width: 2.15rem;
      height: 2.15rem;
      border-radius: 9999px;
      background: rgba(126, 141, 82, 0.18);
      border: 1px solid rgba(126, 141, 82, 0.45);
      color: rgba(226, 232, 240, 0.95);
    }
    .toast-card[data-tone="err"] .toast-icon,
    .toast-card[data-tone="warn"] .toast-icon {
      background: rgba(248, 113, 113, 0.12);
      border-color: rgba(248, 113, 113, 0.45);
      color: rgba(254, 226, 226, 0.95);
    }
    .toast-card[data-tone="ok"] .toast-icon {
      color: rgba(190, 242, 100, 0.95);
    }
    .toast-message {
      margin: 0;
      font-size: 0.95rem;
      line-height: 1.45;
      font-weight: 500;
      color: inherit;
    }
    .toast-content {
      flex: 1;
      display: flex;
      align-items: center;
      padding-top: 0.1rem;
    }
    .toast-dismiss {
      margin-left: auto;
      margin-top: 0.1rem;
      background: transparent;
      border: 0;
      color: rgba(248, 250, 252, 0.75);
      display: inline-flex;
      align-items: center;
      justify-content: center;
      width: 2rem;
      height: 2rem;
      border-radius: 9999px;
      transition: background 0.2s ease, color 0.2s ease;
      cursor: pointer;
    }
    .toast-dismiss:hover {
      background: rgba(15, 23, 42, 0.22);
      color: rgba(248, 250, 252, 0.95);
    }
    .toast-card--leaving {
      animation: toastOut 0.32s ease forwards;
    }
    @keyframes toastIn {
      0% {
        transform: translateX(120%);
        opacity: 0;
      }
      100% {
        transform: translateX(0);
        opacity: 1;
      }
    }
    @keyframes toastOut {
      0% {
        transform: translateX(0);
        opacity: 1;
      }
      100% {
        transform: translateX(120%);
        opacity: 0;
      }
    }
  </style>
</head>
<body class="min-h-screen antialiased text-slate-900">
  <div id="preloader" class="preloader">
    <img src="https://static.wixstatic.com/media/ac771e_af06d86a7a1f4abd87e52e45f3bcbd96~mv2.png" alt="AlgoHive logo" class="preloader__logo" />
    <span class="preloader__brand">AlgoHive</span>
    <span class="preloader__tagline">Where Smart Capital Gathers</span>
  </div>
  <div class="flex min-h-screen flex-col bg-transparent lg:flex-row lg:items-stretch">
    <!-- Left: Onboarding -->
    <main class="auth-left relative hidden w-full max-w-2xl bg-white px-6 py-12 shadow-sm sm:px-10 sm:py-14 no-scrollbar lg:flex lg:h-screen lg:max-w-lg lg:flex-col lg:overflow-y-auto lg:px-16 lg:py-20 lg:shadow lg:sticky lg:top-0">
      <!-- Brand -->
      <div class="flex items-center gap-2">
        <img src="https://static.wixstatic.com/media/ac771e_af06d86a7a1f4abd87e52e45f3bcbd96~mv2.png" alt="AlgoHive" class="h-8 w-auto" />
        <span class="text-lg font-semibold tracking-tight text-[var(--ink)]">AlgoHive</span>
      </div>

      <!-- Onboarding content -->
      <div class="mt-10 flex flex-1 flex-col gap-12 pr-3 lg:mt-16 lg:pr-6">
        <header class="space-y-3 pr-1">
          <p class="text-xs font-semibold uppercase tracking-[0.35em] text-[var(--olive)]">Start here</p>
          <h1 class="text-3xl font-semibold text-slate-900 sm:text-[34px]">Connect your AlgoHive accounts</h1>
          <p class="text-sm text-slate-500">Complete each onboarding step to tailor AlgoHive to your personal investing experience.</p>
        </header>

        <section class="text-left text-slate-700">
          <ol class="step-flow space-y-10">
            <li data-step-item="1">
              <span data-step-indicator="1" class="step-circle absolute left-0 top-0 flex h-9 w-9 items-center justify-center rounded-full border border-[var(--olive)]/40 bg-white text-sm font-semibold text-[var(--olive-700)] shadow-sm">1</span>
              <div class="space-y-1">
                <h2 class="text-base font-semibold text-slate-900">Basic info</h2>
                <p class="text-sm text-slate-500">Share your personal details to set up your profile.</p>
              </div>
            </li>
            <li data-step-item="2">
              <span data-step-indicator="2" class="step-circle absolute left-0 top-0 flex h-9 w-9 items-center justify-center rounded-full border border-[var(--olive)]/40 bg-white text-sm font-semibold text-[var(--olive-700)] shadow-sm">2</span>
              <div class="space-y-1">
                <h2 class="text-base font-semibold text-slate-900">Employment &amp; income</h2>
                <p class="text-sm text-slate-500">Confirm your employment status and income sources.</p>
              </div>
            </li>
            <li data-step-item="3">
              <span data-step-indicator="3" class="step-circle absolute left-0 top-0 flex h-9 w-9 items-center justify-center rounded-full border border-[var(--olive)]/40 bg-white text-sm font-semibold text-[var(--olive-700)] shadow-sm">3</span>
              <div class="space-y-1">
                <h2 class="text-base font-semibold text-slate-900">Compliance</h2>
                <p class="text-sm text-slate-500">Provide your declarations and regulatory acknowledgements.</p>
              </div>
            </li>
            <li data-step-item="4">
              <span data-step-indicator="4" class="step-circle absolute left-0 top-0 flex h-9 w-9 items-center justify-center rounded-full border border-[var(--olive)]/40 bg-white text-sm font-semibold text-[var(--olive-700)] shadow-sm">4</span>
              <div class="space-y-1">
                <h2 class="text-base font-semibold text-slate-900">KYC</h2>
                <p class="text-sm text-slate-500">Upload your identity documents for quick verification.</p>
              </div>
            </li>
            <li data-step-item="5">
              <span data-step-indicator="5" class="step-circle absolute left-0 top-0 flex h-9 w-9 items-center justify-center rounded-full border border-[var(--olive)]/40 bg-white text-sm font-semibold text-[var(--olive-700)] shadow-sm">5</span>
              <div class="space-y-1">
                <h2 class="text-base font-semibold text-slate-900">Subscription plans</h2>
                <p class="text-sm text-slate-500">Choose the strategies and billing that suit you best.</p>
              </div>
            </li>
          </ol>
        </section>
      </div>

    </main>

    <!-- Right: Workspace -->
    <aside class="auth-right relative flex w-full flex-1 bg-[#f7f9ff] lg:items-stretch lg:rounded-none">
      <div class="absolute inset-0 orb-gradient opacity-90"></div>
      <div class="relative z-10 flex w-full items-start justify-center px-4 py-12 sm:px-8 lg:px-16 lg:py-20">
        <div class="w-full max-w-3xl space-y-8">
          <header class="space-y-2 text-left text-slate-800">
            <p class="text-xs font-semibold uppercase tracking-[0.35em] text-[var(--olive)]">Onboarding</p>
            <h1 class="text-3xl font-semibold sm:text-[34px]">Complete your AlgoHive profile</h1>
            <p class="text-sm text-slate-600">Share the information we need to tailor AlgoHive to your individual investing needs.</p>
          </header>

          <section class="rounded-3xl border border-white/40 bg-white/90 p-6 shadow-[0_20px_50px_-28px_rgba(15,23,42,0.55)] backdrop-blur sm:p-8">
            <div class="flex flex-col gap-6">
              <div class="flex flex-col gap-4 sm:flex-row sm:items-start sm:justify-between">
                <div>
                  <p id="currentStepLabel" class="text-xs font-semibold uppercase tracking-[0.4em] text-[var(--olive-700)]">Step 1 of 5 · Basic info</p>
                  <h2 id="currentStepTitle" class="text-xl font-semibold text-slate-900">Tell us about yourself</h2>
                </div>
                <div class="flex flex-col items-start gap-2 text-left sm:items-end sm:text-right">
                  <span class="text-[11px] font-semibold uppercase tracking-[0.35em] text-slate-400">Having trouble?</span>
                  <a href="mailto:support@algohive.io" class="inline-flex items-center justify-center gap-2 rounded-full border border-[var(--olive)] px-4 py-2 text-xs font-semibold text-[var(--olive-700)] transition hover:bg-[var(--olive)] hover:text-white">Contact us</a>
                </div>
              </div>

              <div id="onboardingFlow" class="space-y-10">
                <form data-panel="1" class="tab-panel space-y-10" novalidate>
                  <div class="grid gap-6 md:grid-cols-2">
                    <label class="flex flex-col gap-2 text-sm font-medium text-slate-700">
                      First name
                      <input type="text" id="first_name" name="first_name" placeholder="e.g. Buyusiphe" class="h-11 rounded-xl border border-slate-200 px-4 text-base font-normal text-slate-900 shadow-sm focus:border-[var(--olive)] focus:outline-none focus:ring-2 focus:ring-[var(--olive)]/20" />
                    </label>
                    <label class="flex flex-col gap-2 text-sm font-medium text-slate-700">
                      Last name
                      <input type="text" id="last_name" name="last_name" placeholder="e.g. Maimbra" class="h-11 rounded-xl border border-slate-200 px-4 text-base font-normal text-slate-900 shadow-sm focus:border-[var(--olive)] focus:outline-none focus:ring-2 focus:ring-[var(--olive)]/20" />
                    </label>
                  </div>

                  <div class="grid gap-6 md:grid-cols-[minmax(0,360px)_1fr]">
                    <div class="flex flex-col gap-2">
                      <span class="text-sm font-medium text-slate-700">Avatar</span>
                      <div class="flex items-center gap-4 rounded-2xl border border-dashed border-slate-200 bg-slate-50/60 p-4">
                        <div class="flex h-16 w-16 items-center justify-center overflow-hidden rounded-full bg-slate-200">
                          <img id="avatar-preview" src="data:image/svg+xml;utf8,&lt;svg xmlns='http://www.w3.org/2000/svg' width='64' height='64'&gt;&lt;rect width='100%' height='100%' fill='%23e2e8f0'/&gt;&lt;/svg&gt;" alt="Profile avatar preview" class="h-16 w-16 object-cover" />
                        </div>
                        <div class="flex flex-1 flex-col gap-2 text-sm text-slate-500">
                          <input type="file" id="avatar-file" name="avatar" accept="image/png,image/jpeg" class="hidden" />
                          <label for="avatar-file" class="inline-flex cursor-pointer items-center justify-center gap-2 rounded-full border border-[var(--olive)] px-4 py-1.5 text-xs font-semibold text-[var(--olive-700)] transition hover:bg-[var(--olive)] hover:text-white">
                            Choose file
                          </label>
                          <span id="avatar-filename" class="text-xs text-slate-400">No file chosen</span>
                          <p class="text-xs text-slate-400">JPG/PNG, 2 MB. Best results: 512×512px.</p>
                          <button type="button" id="remove-avatar" class="self-start text-xs font-medium text-rose-500 hover:underline hidden">Remove avatar</button>
                        </div>
                      </div>
                    </div>
                    <label class="flex flex-col gap-2 text-sm font-medium text-slate-700">
                      Contact phone
                      <input type="tel" id="phone" name="phone" placeholder="+27 81 750 8624" class="h-11 rounded-xl border border-slate-200 px-4 text-base font-normal text-slate-900 shadow-sm focus:border-[var(--olive)] focus:outline-none focus:ring-2 focus:ring-[var(--olive)]/20" />
                    </label>
                  </div>

                  <div class="grid gap-6 md:grid-cols-2">
                    <label class="flex flex-col gap-2 text-sm font-medium text-slate-700">
                      Date of birth
                      <input type="date" id="dob" name="dob" class="h-11 rounded-xl border border-slate-200 px-4 text-base font-normal text-slate-900 shadow-sm focus:border-[var(--olive)] focus:outline-none focus:ring-2 focus:ring-[var(--olive)]/20" />
                    </label>
                    <label class="flex flex-col gap-2 text-sm font-medium text-slate-700">
                      ID / Passport number
                      <input type="text" id="id_number" name="id_number" placeholder="0405238097086" class="h-11 rounded-xl border border-slate-200 px-4 text-base font-normal text-slate-900 shadow-sm focus:border-[var(--olive)] focus:outline-none focus:ring-2 focus:ring-[var(--olive)]/20" />
                    </label>
                    <label class="flex flex-col gap-2 text-sm font-medium text-slate-700">
                      Nationality
                      <select id="nationality" name="nationality" class="h-11 rounded-xl border border-slate-200 px-4 text-base font-normal text-slate-900 shadow-sm focus:border-[var(--olive)] focus:outline-none focus:ring-2 focus:ring-[var(--olive)]/20">
                        <option value="">Select a country…</option>
                        <option value="Afghanistan">Afghanistan</option>
                        <option value="Albania">Albania</option>
                        <option value="Algeria">Algeria</option>
                        <option value="Andorra">Andorra</option>
                        <option value="Angola">Angola</option>
                        <option value="Antigua and Barbuda">Antigua and Barbuda</option>
                        <option value="Argentina">Argentina</option>
                        <option value="Armenia">Armenia</option>
                        <option value="Australia">Australia</option>
                        <option value="Austria">Austria</option>
                        <option value="Azerbaijan">Azerbaijan</option>
                        <option value="Bahamas">Bahamas</option>
                        <option value="Bahrain">Bahrain</option>
                        <option value="Bangladesh">Bangladesh</option>
                        <option value="Barbados">Barbados</option>
                        <option value="Belarus">Belarus</option>
                        <option value="Belgium">Belgium</option>
                        <option value="Belize">Belize</option>
                        <option value="Benin">Benin</option>
                        <option value="Bhutan">Bhutan</option>
                        <option value="Bolivia">Bolivia</option>
                        <option value="Bosnia and Herzegovina">Bosnia and Herzegovina</option>
                        <option value="Botswana">Botswana</option>
                        <option value="Brazil">Brazil</option>
                        <option value="Brunei">Brunei</option>
                        <option value="Bulgaria">Bulgaria</option>
                        <option value="Burkina Faso">Burkina Faso</option>
                        <option value="Burundi">Burundi</option>
                        <option value="Cabo Verde">Cabo Verde</option>
                        <option value="Cambodia">Cambodia</option>
                        <option value="Cameroon">Cameroon</option>
                        <option value="Canada">Canada</option>
                        <option value="Central African Republic">Central African Republic</option>
                        <option value="Chad">Chad</option>
                        <option value="Chile">Chile</option>
                        <option value="China">China</option>
                        <option value="Colombia">Colombia</option>
                        <option value="Comoros">Comoros</option>
                        <option value="Congo">Congo</option>
                        <option value="Costa Rica">Costa Rica</option>
                        <option value="Côte d'Ivoire">Côte d'Ivoire</option>
                        <option value="Croatia">Croatia</option>
                        <option value="Cuba">Cuba</option>
                        <option value="Cyprus">Cyprus</option>
                        <option value="Czechia">Czechia</option>
                        <option value="Democratic Republic of the Congo">Democratic Republic of the Congo</option>
                        <option value="Denmark">Denmark</option>
                        <option value="Djibouti">Djibouti</option>
                        <option value="Dominica">Dominica</option>
                        <option value="Dominican Republic">Dominican Republic</option>
                        <option value="Ecuador">Ecuador</option>
                        <option value="Egypt">Egypt</option>
                        <option value="El Salvador">El Salvador</option>
                        <option value="Equatorial Guinea">Equatorial Guinea</option>
                        <option value="Eritrea">Eritrea</option>
                        <option value="Estonia">Estonia</option>
                        <option value="Eswatini">Eswatini</option>
                        <option value="Ethiopia">Ethiopia</option>
                        <option value="Fiji">Fiji</option>
                        <option value="Finland">Finland</option>
                        <option value="France">France</option>
                        <option value="Gabon">Gabon</option>
                        <option value="Gambia">Gambia</option>
                        <option value="Georgia">Georgia</option>
                        <option value="Germany">Germany</option>
                        <option value="Ghana">Ghana</option>
                        <option value="Greece">Greece</option>
                        <option value="Grenada">Grenada</option>
                        <option value="Guatemala">Guatemala</option>
                        <option value="Guinea">Guinea</option>
                        <option value="Guinea-Bissau">Guinea-Bissau</option>
                        <option value="Guyana">Guyana</option>
                        <option value="Haiti">Haiti</option>
                        <option value="Holy See">Holy See</option>
                        <option value="Honduras">Honduras</option>
                        <option value="Hungary">Hungary</option>
                        <option value="Iceland">Iceland</option>
                        <option value="India">India</option>
                        <option value="Indonesia">Indonesia</option>
                        <option value="Iran">Iran</option>
                        <option value="Iraq">Iraq</option>
                        <option value="Ireland">Ireland</option>
                        <option value="Israel">Israel</option>
                        <option value="Italy">Italy</option>
                        <option value="Jamaica">Jamaica</option>
                        <option value="Japan">Japan</option>
                        <option value="Jordan">Jordan</option>
                        <option value="Kazakhstan">Kazakhstan</option>
                        <option value="Kenya">Kenya</option>
                        <option value="Kiribati">Kiribati</option>
                        <option value="Kuwait">Kuwait</option>
                        <option value="Kyrgyzstan">Kyrgyzstan</option>
                        <option value="Laos">Laos</option>
                        <option value="Latvia">Latvia</option>
                        <option value="Lebanon">Lebanon</option>
                        <option value="Lesotho">Lesotho</option>
                        <option value="Liberia">Liberia</option>
                        <option value="Libya">Libya</option>
                        <option value="Liechtenstein">Liechtenstein</option>
                        <option value="Lithuania">Lithuania</option>
                        <option value="Luxembourg">Luxembourg</option>
                        <option value="Madagascar">Madagascar</option>
                        <option value="Malawi">Malawi</option>
                        <option value="Malaysia">Malaysia</option>
                        <option value="Maldives">Maldives</option>
                        <option value="Mali">Mali</option>
                        <option value="Malta">Malta</option>
                        <option value="Marshall Islands">Marshall Islands</option>
                        <option value="Mauritania">Mauritania</option>
                        <option value="Mauritius">Mauritius</option>
                        <option value="Mexico">Mexico</option>
                        <option value="Micronesia">Micronesia</option>
                        <option value="Moldova">Moldova</option>
                        <option value="Monaco">Monaco</option>
                        <option value="Mongolia">Mongolia</option>
                        <option value="Montenegro">Montenegro</option>
                        <option value="Morocco">Morocco</option>
                        <option value="Mozambique">Mozambique</option>
                        <option value="Myanmar">Myanmar</option>
                        <option value="Namibia">Namibia</option>
                        <option value="Nauru">Nauru</option>
                        <option value="Nepal">Nepal</option>
                        <option value="Netherlands">Netherlands</option>
                        <option value="New Zealand">New Zealand</option>
                        <option value="Nicaragua">Nicaragua</option>
                        <option value="Niger">Niger</option>
                        <option value="Nigeria">Nigeria</option>
                        <option value="North Korea">North Korea</option>
                        <option value="North Macedonia">North Macedonia</option>
                        <option value="Norway">Norway</option>
                        <option value="Oman">Oman</option>
                        <option value="Pakistan">Pakistan</option>
                        <option value="Palau">Palau</option>
                        <option value="Palestine State">Palestine State</option>
                        <option value="Panama">Panama</option>
                        <option value="Papua New Guinea">Papua New Guinea</option>
                        <option value="Paraguay">Paraguay</option>
                        <option value="Peru">Peru</option>
                        <option value="Philippines">Philippines</option>
                        <option value="Poland">Poland</option>
                        <option value="Portugal">Portugal</option>
                        <option value="Qatar">Qatar</option>
                        <option value="Romania">Romania</option>
                        <option value="Russia">Russia</option>
                        <option value="Rwanda">Rwanda</option>
                        <option value="Saint Kitts and Nevis">Saint Kitts and Nevis</option>
                        <option value="Saint Lucia">Saint Lucia</option>
                        <option value="Saint Vincent and the Grenadines">Saint Vincent and the Grenadines</option>
                        <option value="Samoa">Samoa</option>
                        <option value="San Marino">San Marino</option>
                        <option value="Sao Tome and Principe">Sao Tome and Principe</option>
                        <option value="Saudi Arabia">Saudi Arabia</option>
                        <option value="Senegal">Senegal</option>
                        <option value="Serbia">Serbia</option>
                        <option value="Seychelles">Seychelles</option>
                        <option value="Sierra Leone">Sierra Leone</option>
                        <option value="Singapore">Singapore</option>
                        <option value="Slovakia">Slovakia</option>
                        <option value="Slovenia">Slovenia</option>
                        <option value="Solomon Islands">Solomon Islands</option>
                        <option value="Somalia">Somalia</option>
                        <option value="South Africa">South Africa</option>
                        <option value="South Korea">South Korea</option>
                        <option value="South Sudan">South Sudan</option>
                        <option value="Spain">Spain</option>
                        <option value="Sri Lanka">Sri Lanka</option>
                        <option value="Sudan">Sudan</option>
                        <option value="Suriname">Suriname</option>
                        <option value="Sweden">Sweden</option>
                        <option value="Switzerland">Switzerland</option>
                        <option value="Syria">Syria</option>
                        <option value="Tajikistan">Tajikistan</option>
                        <option value="Tanzania">Tanzania</option>
                        <option value="Thailand">Thailand</option>
                        <option value="Timor-Leste">Timor-Leste</option>
                        <option value="Togo">Togo</option>
                        <option value="Tonga">Tonga</option>
                        <option value="Trinidad and Tobago">Trinidad and Tobago</option>
                        <option value="Tunisia">Tunisia</option>
                        <option value="Turkey">Turkey</option>
                        <option value="Turkmenistan">Turkmenistan</option>
                        <option value="Tuvalu">Tuvalu</option>
                        <option value="Uganda">Uganda</option>
                        <option value="Ukraine">Ukraine</option>
                        <option value="United Arab Emirates">United Arab Emirates</option>
                        <option value="United Kingdom">United Kingdom</option>
                        <option value="United States">United States</option>
                        <option value="Uruguay">Uruguay</option>
                        <option value="Uzbekistan">Uzbekistan</option>
                        <option value="Vanuatu">Vanuatu</option>
                        <option value="Venezuela">Venezuela</option>
                        <option value="Vietnam">Vietnam</option>
                        <option value="Yemen">Yemen</option>
                        <option value="Zambia">Zambia</option>
                        <option value="Zimbabwe">Zimbabwe</option>
                      </select>
                    </label>
                    <label class="flex flex-col gap-2 text-sm font-medium text-slate-700">
                      Country of residence
                      <input type="text" id="country_residence" name="country_residence" placeholder="South Africa" class="h-11 rounded-xl border border-slate-200 px-4 text-base font-normal text-slate-900 shadow-sm focus:border-[var(--olive)] focus:outline-none focus:ring-2 focus:ring-[var(--olive)]/20" />
                    </label>
                  </div>

                  <div class="flex flex-col gap-4 border-t border-slate-100 pt-6 sm:flex-row sm:items-center sm:justify-between">
                    <div class="flex items-center gap-2">
                      <button type="button" data-step-delta="1" data-save-profile class="btn-shine inline-flex items-center justify-center gap-2 rounded-full bg-[var(--olive)] px-5 py-2.5 text-sm font-semibold text-white shadow-lg shadow-[var(--olive)]/30 transition hover:shadow-xl hover:shadow-[var(--olive)]/40">Save &amp; continue</button>
                    </div>
                  </div>
                </form>

                <form data-panel="2" class="tab-panel hidden space-y-10" novalidate>
                  <div class="space-y-6">
                    <div class="grid gap-6 md:grid-cols-2">
                      <label class="flex flex-col gap-2 text-sm font-medium text-slate-700">
                        Employment status
                        <select id="employment_status" name="employment_status" class="h-11 rounded-xl border border-slate-200 px-4 text-base font-normal text-slate-900 shadow-sm focus:border-[var(--olive)] focus:outline-none focus:ring-2 focus:ring-[var(--olive)]/20">
                          <option value="">Select…</option>
                          <option value="employed">Employed</option>
                          <option value="self-employed">Self-employed</option>
                          <option value="student">Student</option>
                          <option value="unemployed">Unemployed</option>
                          <option value="retired">Retired</option>
                        </select>
                      </label>
                      <label class="flex flex-col gap-2 text-sm font-medium text-slate-700">
                        Occupation
                        <input type="text" id="occupation" name="occupation" placeholder="e.g. Quantitative analyst" class="h-11 rounded-xl border border-slate-200 px-4 text-base font-normal text-slate-900 shadow-sm focus:border-[var(--olive)] focus:outline-none focus:ring-2 focus:ring-[var(--olive)]/20" />
                      </label>
                    </div>

                    <div class="grid gap-6 md:grid-cols-2">
                      <label class="flex flex-col gap-2 text-sm font-medium text-slate-700">
                        Employer
                        <input type="text" id="employer" name="employer" placeholder="Company or trading entity" class="h-11 rounded-xl border border-slate-200 px-4 text-base font-normal text-slate-900 shadow-sm focus:border-[var(--olive)] focus:outline-none focus:ring-2 focus:ring-[var(--olive)]/20" />
                      </label>
                      <label class="flex flex-col gap-2 text-sm font-medium text-slate-700">
                        Annual income bracket
                        <select id="income_bracket" name="income_bracket" class="h-11 rounded-xl border border-slate-200 px-4 text-base font-normal text-slate-900 shadow-sm focus:border-[var(--olive)] focus:outline-none focus:ring-2 focus:ring-[var(--olive)]/20">
                          <option value="">Select…</option>
                          <option value="lt_250k">&lt; R250k</option>
                          <option value="250k_500k">R250k–R500k</option>
                          <option value="500k_1m">R500k–R1m</option>
                          <option value="1m_2m">R1m–R2m</option>
                          <option value="gt_2m">&gt; R2m</option>
                        </select>
                      </label>
                      <label class="flex flex-col gap-2 text-sm font-medium text-slate-700">
                        Source of funds
                        <select id="source_of_funds" name="source_of_funds" class="h-11 rounded-xl border border-slate-200 px-4 text-base font-normal text-slate-900 shadow-sm focus:border-[var(--olive)] focus:outline-none focus:ring-2 focus:ring-[var(--olive)]/20">
                          <option value="">Select…</option>
                          <option value="salary">Salary</option>
                          <option value="business">Business income</option>
                          <option value="investments">Investments</option>
                          <option value="inheritance">Inheritance</option>
                          <option value="gift">Gift</option>
                          <option value="other">Other</option>
                        </select>
                      </label>
                      <label class="flex flex-col gap-2 text-sm font-medium text-slate-700">
                        Net worth range
                        <select id="net_worth_range" name="net_worth_range" class="h-11 rounded-xl border border-slate-200 px-4 text-base font-normal text-slate-900 shadow-sm focus:border-[var(--olive)] focus:outline-none focus:ring-2 focus:ring-[var(--olive)]/20">
                          <option value="">Select…</option>
                          <option value="lt_500k">&lt; R500k</option>
                          <option value="500k_1m">R500k–R1m</option>
                          <option value="1m_5m">R1m–R5m</option>
                          <option value="5m_10m">R5m–R10m</option>
                          <option value="gt_10m">&gt; R10m</option>
                        </select>
                      </label>
                    </div>

                    <div class="grid gap-6 md:grid-cols-2">
                      <label class="flex flex-col gap-2 text-sm font-medium text-slate-700">
                        Experience level
                        <select id="experience_level" name="experience_level" class="h-11 rounded-xl border border-slate-200 px-4 text-base font-normal text-slate-900 shadow-sm focus:border-[var(--olive)] focus:outline-none focus:ring-2 focus:ring-[var(--olive)]/20">
                          <option value="">Select…</option>
                          <option value="none">None</option>
                          <option value="beginner">Beginner</option>
                          <option value="intermediate">Intermediate</option>
                          <option value="advanced">Advanced</option>
                        </select>
                      </label>
                      <label class="flex flex-col gap-2 text-sm font-medium text-slate-700">
                        Risk tolerance
                        <select id="risk_tolerance" name="risk_tolerance" class="h-11 rounded-xl border border-slate-200 px-4 text-base font-normal text-slate-900 shadow-sm focus:border-[var(--olive)] focus:outline-none focus:ring-2 focus:ring-[var(--olive)]/20">
                          <option value="">Select…</option>
                          <option value="low">Low</option>
                          <option value="moderate">Moderate</option>
                          <option value="high">High</option>
                        </select>
                      </label>
                    </div>

                    <div class="space-y-3">
                      <span class="text-sm font-medium text-slate-700">Investment objectives</span>
                      <div id="objectives-group" class="grid gap-3 rounded-2xl sm:grid-cols-2">
                        <label class="flex items-center gap-3 rounded-xl border border-slate-200 bg-white px-4 py-3 text-sm font-medium text-slate-600 shadow-sm">
                          <input type="checkbox" name="objectives" value="Growth" class="h-4 w-4 rounded border-slate-300 text-[var(--olive)] focus:ring-[var(--olive)]/20" />
                          Growth
                        </label>
                        <label class="flex items-center gap-3 rounded-xl border border-slate-200 bg-white px-4 py-3 text-sm font-medium text-slate-600 shadow-sm">
                          <input type="checkbox" name="objectives" value="Income" class="h-4 w-4 rounded border-slate-300 text-[var(--olive)] focus:ring-[var(--olive)]/20" />
                          Income
                        </label>
                        <label class="flex items-center gap-3 rounded-xl border border-slate-200 bg-white px-4 py-3 text-sm font-medium text-slate-600 shadow-sm">
                          <input type="checkbox" name="objectives" value="Preservation" class="h-4 w-4 rounded border-slate-300 text-[var(--olive)] focus:ring-[var(--olive)]/20" />
                          Capital preservation
                        </label>
                        <label class="flex items-center gap-3 rounded-xl border border-slate-200 bg-white px-4 py-3 text-sm font-medium text-slate-600 shadow-sm">
                          <input type="checkbox" name="objectives" value="Speculation" class="h-4 w-4 rounded border-slate-300 text-[var(--olive)] focus:ring-[var(--olive)]/20" />
                          Speculation
                        </label>
                        <label class="flex items-center gap-3 rounded-xl border border-slate-200 bg-white px-4 py-3 text-sm font-medium text-slate-600 shadow-sm">
                          <input type="checkbox" name="objectives" value="Hedging" class="h-4 w-4 rounded border-slate-300 text-[var(--olive)] focus:ring-[var(--olive)]/20" />
                          Hedging
                        </label>
                        <label class="flex items-center gap-3 rounded-xl border border-slate-200 bg-white px-4 py-3 text-sm font-medium text-slate-600 shadow-sm">
                          <input type="checkbox" name="objectives" value="Other" class="h-4 w-4 rounded border-slate-300 text-[var(--olive)] focus:ring-[var(--olive)]/20" />
                          Other
                        </label>
                      </div>
                    </div>
                  </div>

                  <div class="flex flex-col gap-4 border-t border-slate-100 pt-6 sm:flex-row sm:items-center sm:justify-between">
                    <div class="flex flex-col gap-2 sm:flex-row sm:items-center">
                      <button type="button" data-step-delta="-1" class="inline-flex items-center justify-center rounded-full border border-slate-300 px-5 py-2.5 text-sm font-semibold text-slate-600 transition hover:bg-slate-100">Back</button>
                      <button type="button" data-step-delta="1" data-save-profile class="btn-shine inline-flex items-center justify-center gap-2 rounded-full bg-[var(--olive)] px-5 py-2.5 text-sm font-semibold text-white shadow-lg shadow-[var(--olive)]/30 transition hover:shadow-xl hover:shadow-[var(--olive)]/40">Save &amp; continue</button>
                    </div>
                  </div>
                </form>

                <form data-panel="3" class="tab-panel hidden space-y-10" novalidate>
                  <div class="space-y-6">
                    <div class="space-y-3">
                      <p class="text-sm font-medium text-slate-700">Regulatory declarations</p>
                      <label class="flex items-start gap-3 rounded-2xl border border-slate-200 bg-white px-4 py-3 text-left text-sm text-slate-600 shadow-sm">
                        <input type="checkbox" id="pep" name="pep" class="mt-1 h-4 w-4 rounded border-slate-300 text-[var(--olive)] focus:ring-[var(--olive)]/20" />
                        <span> I confirm I am <span class="font-semibold">not</span> a Politically Exposed Person (PEP), or I have disclosed this to AlgoHive.</span>
                      </label>
                      <label class="flex items-start gap-3 rounded-2xl border border-slate-200 bg-white px-4 py-3 text-left text-sm text-slate-600 shadow-sm">
                        <input type="checkbox" id="fatca_crs" name="fatca_crs" class="mt-1 h-4 w-4 rounded border-slate-300 text-[var(--olive)] focus:ring-[var(--olive)]/20" />
                        <span>I confirm my FATCA/CRS status and will notify AlgoHive of any changes.</span>
                      </label>
                      <label class="flex items-start gap-3 rounded-2xl border border-slate-200 bg-white px-4 py-3 text-left text-sm text-slate-600 shadow-sm">
                        <input type="checkbox" name="aml" class="mt-1 h-4 w-4 rounded border-slate-300 text-[var(--olive)] focus:ring-[var(--olive)]/20" />
                        <span>I acknowledge AlgoHive’s anti-money laundering policies and agree to provide any supporting documentation if requested.</span>
                      </label>
                    </div>

                    <div class="space-y-3">
                      <p class="text-sm font-medium text-slate-700">Suitability acknowledgements</p>
                      <label class="flex items-start gap-3 rounded-2xl border border-slate-200 bg-white px-4 py-3 text-left text-sm text-slate-600 shadow-sm">
                        <input type="checkbox" name="objectives_ack" class="mt-1 h-4 w-4 rounded border-slate-300 text-[var(--olive)] focus:ring-[var(--olive)]/20" />
                        <span>I understand AlgoHive’s strategies involve market risk and have considered my investment objectives and tolerance.</span>
                      </label>
                      <label class="flex items-start gap-3 rounded-2xl border border-slate-200 bg-white px-4 py-3 text-left text-sm text-slate-600 shadow-sm">
                        <input type="checkbox" name="disclosures" class="mt-1 h-4 w-4 rounded border-slate-300 text-[var(--olive)] focus:ring-[var(--olive)]/20" />
                        <span>I confirm all the information supplied is accurate and I will update AlgoHive if anything changes.</span>
                      </label>
                    </div>

                  </div>

                  <div class="flex flex-col gap-4 border-t border-slate-100 pt-6 sm:flex-row sm:items-center sm:justify-between">
                    <div class="flex flex-col gap-2 sm:flex-row sm:items-center">
                      <button type="button" data-step-delta="-1" class="inline-flex items-center justify-center rounded-full border border-slate-300 px-5 py-2.5 text-sm font-semibold text-slate-600 transition hover:bg-slate-100">Back</button>
                      <button type="button" data-step-delta="1" data-save-profile class="btn-shine inline-flex items-center justify-center gap-2 rounded-full bg-[var(--olive)] px-5 py-2.5 text-sm font-semibold text-white shadow-lg shadow-[var(--olive)]/30 transition hover:shadow-xl hover:shadow-[var(--olive)]/40">Save &amp; continue</button>
                    </div>
                  </div>
                </form>

                <form data-panel="4" class="tab-panel hidden space-y-10" novalidate>
                  <div class="space-y-6">
                    <div class="grid gap-6 md:grid-cols-2">
                      <label class="flex flex-col gap-3 rounded-2xl border border-dashed border-slate-200 bg-slate-50/80 p-6 text-sm text-slate-600 shadow-sm">
                        <span class="text-sm font-semibold text-slate-800">Identity document</span>
                        <span>Upload a clear copy of your ID or passport.</span>
                        <button type="button" class="inline-flex items-center justify-center gap-2 rounded-full border border-[var(--olive)] px-4 py-2 text-xs font-semibold text-[var(--olive-700)] transition hover:bg-[var(--olive)] hover:text-white">
                          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="h-4 w-4">
                            <path fill-rule="evenodd" d="M10 3a1 1 0 0 1 1 1v5h3a1 1 0 1 1 0 2h-3v5a1 1 0 1 1-2 0v-5H6a1 1 0 1 1 0-2h3V4a1 1 0 0 1 1-1Z" clip-rule="evenodd" />
                          </svg>
                          Upload file
                        </button>
                        <span class="text-xs text-slate-400">Accepted: JPG, PNG, PDF · Max 5 MB</span>
                      </label>
                      <label class="flex flex-col gap-3 rounded-2xl border border-dashed border-slate-200 bg-slate-50/80 p-6 text-sm text-slate-600 shadow-sm">
                        <span class="text-sm font-semibold text-slate-800">Proof of address</span>
                        <span>Provide a recent utility bill or bank statement (issued in the last 3 months).</span>
                        <button type="button" class="inline-flex items-center justify-center gap-2 rounded-full border border-[var(--olive)] px-4 py-2 text-xs font-semibold text-[var(--olive-700)] transition hover:bg-[var(--olive)] hover:text-white">
                          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="h-4 w-4">
                            <path fill-rule="evenodd" d="M10 3a1 1 0 0 1 1 1v5h3a1 1 0 1 1 0 2h-3v5a1 1 0 1 1-2 0v-5H6a1 1 0 1 1 0-2h3V4a1 1 0 0 1 1-1Z" clip-rule="evenodd" />
                          </svg>
                          Upload file
                        </button>
                        <span class="text-xs text-slate-400">Accepted: JPG, PNG, PDF · Max 5 MB</span>
                      </label>
                    </div>

                    <div class="rounded-2xl border border-slate-200 bg-white px-6 py-5 shadow-sm">
                      <p class="text-sm font-medium text-slate-700">Verification tips</p>
                      <ul class="mt-3 list-disc space-y-2 pl-5 text-sm text-slate-500">
                        <li>Ensure all four corners of your documents are visible.</li>
                        <li>Use high-resolution scans or well-lit photos without glare.</li>
                        <li>Double-check that your full name and address match the details you provided.</li>
                      </ul>
                    </div>
                  </div>

                  <div class="flex flex-col gap-4 border-t border-slate-100 pt-6 sm:flex-row sm:items-center sm:justify-between">
                    <div class="flex flex-col gap-2 sm:flex-row sm:items-center">
                      <button type="button" data-step-delta="-1" class="inline-flex items-center justify-center rounded-full border border-slate-300 px-5 py-2.5 text-sm font-semibold text-slate-600 transition hover:bg-slate-100">Back</button>
                      <button type="button" data-step-delta="1" data-save-profile class="btn-shine inline-flex items-center justify-center gap-2 rounded-full bg-[var(--olive)] px-5 py-2.5 text-sm font-semibold text-white shadow-lg shadow-[var(--olive)]/30 transition hover:shadow-xl hover:shadow-[var(--olive)]/40">Save &amp; continue</button>
                    </div>
                  </div>
                </form>

                <form data-panel="5" class="tab-panel hidden space-y-10" novalidate>
                  <div class="space-y-6">
                    <div class="grid gap-6 md:grid-cols-2">
                      <label class="relative flex cursor-pointer flex-col gap-4 rounded-3xl border border-slate-200 bg-white p-6 text-left shadow-sm transition hover:border-[var(--olive)] hover:shadow-lg">
                        <input type="radio" name="plan" value="core" class="peer absolute right-6 top-6 h-4 w-4 border-slate-300 text-[var(--olive)] focus:ring-[var(--olive)]/20" />
                        <div class="flex items-center justify-between">
                          <span class="text-sm font-semibold uppercase tracking-[0.25em] text-[var(--olive)]">Core</span>
                          <span class="rounded-full bg-[var(--olive)]/10 px-3 py-1 text-xs font-semibold text-[var(--olive-700)]">R899/mo</span>
                        </div>
                        <div>
                          <p class="text-lg font-semibold text-slate-900">Starter strategies</p>
                          <p class="mt-2 text-sm text-slate-500">Access diversified quant strategies, monthly reporting, and community sessions.</p>
                        </div>
                        <ul class="mt-3 space-y-1 text-sm text-slate-500">
                          <li>• 3 live strategies</li>
                          <li>• Monthly alpha brief</li>
                          <li>• Community Q&amp;A</li>
                        </ul>
                      </label>

                      <label class="relative flex cursor-pointer flex-col gap-4 rounded-3xl border border-slate-200 bg-white p-6 text-left shadow-sm transition hover:border-[var(--olive)] hover:shadow-lg">
                        <input type="radio" name="plan" value="professional" class="peer absolute right-6 top-6 h-4 w-4 border-slate-300 text-[var(--olive)] focus:ring-[var(--olive)]/20" />
                        <div class="flex items-center justify-between">
                          <span class="text-sm font-semibold uppercase tracking-[0.25em] text-[var(--olive)]">Professional</span>
                          <span class="rounded-full bg-[var(--olive)]/10 px-3 py-1 text-xs font-semibold text-[var(--olive-700)]">R1 699/mo</span>
                        </div>
                        <div>
                          <p class="text-lg font-semibold text-slate-900">Expanded access</p>
                          <p class="mt-2 text-sm text-slate-500">Unlock higher-frequency models, weekly performance intel, and priority support.</p>
                        </div>
                        <ul class="mt-3 space-y-1 text-sm text-slate-500">
                          <li>• 6+ live strategies</li>
                          <li>• Weekly desk commentary</li>
                          <li>• Dedicated manager check-ins</li>
                        </ul>
                      </label>
                    </div>

                    <div class="rounded-3xl border border-slate-200 bg-white px-6 py-5 shadow-sm">
                      <p class="text-sm font-medium text-slate-700">Billing preferences</p>
                      <div class="mt-4 grid gap-4 sm:grid-cols-2">
                        <label class="flex items-center gap-3 rounded-2xl border border-slate-200 bg-slate-50 px-4 py-3 text-sm font-medium text-slate-600 shadow-sm">
                          <input type="radio" name="billing" value="monthly" class="h-4 w-4 border-slate-300 text-[var(--olive)] focus:ring-[var(--olive)]/20" />
                          Monthly billing
                        </label>
                        <label class="flex items-center gap-3 rounded-2xl border border-slate-200 bg-slate-50 px-4 py-3 text-sm font-medium text-slate-600 shadow-sm">
                          <input type="radio" name="billing" value="annual" class="h-4 w-4 border-slate-300 text-[var(--olive)] focus:ring-[var(--olive)]/20" />
                          Annual billing (save 2 months)
                        </label>
                      </div>
                      <p class="mt-3 text-xs text-slate-400">You can upgrade, downgrade, or cancel anytime from your AlgoHive dashboard.</p>
                    </div>
                  </div>

                  <div class="flex flex-col gap-4 border-t border-slate-100 pt-6 sm:flex-row sm:items-center sm:justify-between">
                    <div class="flex flex-col gap-2 sm:flex-row sm:items-center">
                      <button type="button" data-step-delta="-1" class="inline-flex items-center justify-center rounded-full border border-slate-300 px-5 py-2.5 text-sm font-semibold text-slate-600 transition hover:bg-slate-100">Back</button>
                      <button type="button" data-complete data-save-profile class="btn-shine inline-flex items-center justify-center gap-2 rounded-full bg-[var(--olive)] px-6 py-3 text-sm font-semibold text-white shadow-lg shadow-[var(--olive)]/30 transition hover:shadow-xl hover:shadow-[var(--olive)]/40">Complete onboarding</button>
                    </div>
                  </div>
                </form>
              </div>

              <div id="onboardingComplete" class="hidden space-y-8 rounded-3xl border border-white/40 bg-white/90 p-6 text-left shadow-[0_20px_50px_-28px_rgba(15,23,42,0.55)] backdrop-blur sm:p-8">
                <div class="space-y-4">
                  <p class="text-xs font-semibold uppercase tracking-[0.35em] text-[var(--olive)]">All done</p>
                  <h2 class="text-2xl font-semibold text-slate-900 sm:text-3xl">You're ready to explore AlgoHive</h2>
                  <p class="text-sm text-slate-600">Every onboarding checklist item is complete—let's get you to the right products.</p>
                </div>

                <ul class="space-y-3">
                  <li class="flex items-start gap-3 rounded-2xl border border-slate-200 bg-white px-4 py-3 shadow-sm">
                    <span class="mt-1 inline-flex h-6 w-6 items-center justify-center rounded-full bg-[var(--olive)] text-sm font-semibold text-white">✓</span>
                    <div>
                      <p class="text-sm font-semibold text-slate-800">Profile details saved</p>
                      <p class="text-sm text-slate-500">Your personal and employment information is on file.</p>
                    </div>
                  </li>
                  <li class="flex items-start gap-3 rounded-2xl border border-slate-200 bg-white px-4 py-3 shadow-sm">
                    <span class="mt-1 inline-flex h-6 w-6 items-center justify-center rounded-full bg-[var(--olive)] text-sm font-semibold text-white">✓</span>
                    <div>
                      <p class="text-sm font-semibold text-slate-800">Compliance confirmed</p>
                      <p class="text-sm text-slate-500">We have your declarations and KYC documents.</p>
                    </div>
                  </li>
                  <li class="flex items-start gap-3 rounded-2xl border border-slate-200 bg-white px-4 py-3 shadow-sm">
                    <span class="mt-1 inline-flex h-6 w-6 items-center justify-center rounded-full bg-[var(--olive)] text-sm font-semibold text-white">✓</span>
                    <div>
                      <p class="text-sm font-semibold text-slate-800">Plan selected</p>
                      <p class="text-sm text-slate-500">Your AlgoHive subscription preferences are locked in.</p>
                    </div>
                  </li>
                </ul>

                <div class="rounded-2xl border border-dashed border-[var(--olive)]/40 bg-[var(--olive)]/5 px-5 py-4">
                  <p class="text-base font-semibold text-[var(--olive-700)]">Your AlgoHive onboarding is complete.</p>
                </div>

                <div class="space-y-4">
                  <p class="text-sm font-semibold uppercase tracking-[0.25em] text-slate-400">Next up</p>
                  <div class="space-y-2">
                    <h3 class="text-lg font-semibold text-slate-900">What products are you interested in?</h3>
                    <p class="text-sm text-slate-500">Choose a path to continue exploring tailored AlgoHive solutions.</p>
                  </div>
                  <div class="grid gap-4 sm:grid-cols-2">
                    <button type="button" class="flex h-full flex-col items-start gap-4 rounded-3xl border border-slate-200 bg-white p-6 text-left shadow-sm transition hover:-translate-y-1 hover:border-[var(--olive)] hover:shadow-lg">
                      <span class="inline-flex items-center gap-2 rounded-full bg-[var(--olive)]/10 px-3 py-1 text-xs font-semibold uppercase tracking-[0.25em] text-[var(--olive-700)]">Investing</span>
                      <div class="space-y-2">
                        <p class="text-lg font-semibold text-slate-900">Grow with data-driven strategies</p>
                        <p class="text-sm text-slate-500">Explore diversified quant portfolios, regular insights, and performance tracking.</p>
                      </div>
                      <span class="mt-auto inline-flex items-center gap-2 text-sm font-semibold text-[var(--olive)]">Continue <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="none" class="h-4 w-4"><path d="M7.5 5L12.5 10L7.5 15" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"/></svg></span>
                    </button>
                    <button type="button" class="flex h-full flex-col items-start gap-4 rounded-3xl border border-slate-200 bg-white p-6 text-left shadow-sm transition hover:-translate-y-1 hover:border-[var(--olive)] hover:shadow-lg">
                      <span class="inline-flex items-center gap-2 rounded-full bg-[var(--olive)]/10 px-3 py-1 text-xs font-semibold uppercase tracking-[0.25em] text-[var(--olive-700)]">Loans</span>
                      <div class="space-y-2">
                        <p class="text-lg font-semibold text-slate-900">Access flexible AlgoHive lending</p>
                        <p class="text-sm text-slate-500">Review funding options, competitive rates, and repayment schedules.</p>
                      </div>
                      <span class="mt-auto inline-flex items-center gap-2 text-sm font-semibold text-[var(--olive)]">Continue <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="none" class="h-4 w-4"><path d="M7.5 5L12.5 10L7.5 15" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"/></svg></span>
                    </button>
                  </div>
                </div>
              </div>
            </div>
          </section>
        </div>
      </div>
    </aside>
  </div>

  <script type="module" nonce="ALGOHIVE">
    import { supabase } from "/js/supabase.js";

    const preloader = document.getElementById("preloader");
    window.addEventListener("load", () => {
      if (!preloader) return;
      preloader.classList.add("preloader--hide");
      setTimeout(() => preloader.remove(), 450);
    });

    function banner(msg, tone = "warn") {
      const stackId = "toast-stack";
      let stack = document.getElementById(stackId);
      if (!stack) {
        stack = document.createElement("div");
        stack.id = stackId;
        stack.className = "toast-stack";
        document.body.appendChild(stack);
      }

      const toast = document.createElement("div");
      toast.className = "toast-card";
      toast.dataset.tone = tone;

      const icon = document.createElement("span");
      icon.className = "toast-icon";
      icon.setAttribute("aria-hidden", "true");
      icon.innerHTML = tone === "ok"
        ? '<svg width="18" height="18" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M16 6L8.5 14L4 9.5" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"/></svg>'
        : '<svg width="18" height="18" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M13.5 6.5L6.5 13.5" stroke="currentColor" stroke-width="1.75" stroke-linecap="round"/><path d="M6.5 6.5L13.5 13.5" stroke="currentColor" stroke-width="1.75" stroke-linecap="round"/></svg>';

      const content = document.createElement("div");
      content.className = "toast-content";
      const message = document.createElement("p");
      message.className = "toast-message";
      message.textContent = msg;
      content.appendChild(message);

      const close = document.createElement("button");
      close.type = "button";
      close.className = "toast-dismiss";
      close.setAttribute("aria-label", "Dismiss notification");
      close.innerHTML = '<svg width="14" height="14" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M12.75 7.25L7.25 12.75" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/><path d="M7.25 7.25L12.75 12.75" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/></svg>';

      toast.append(icon, content, close);
      stack.prepend(toast);

      let isLeaving = false;
      const removeToast = () => {
        if (isLeaving) return;
        isLeaving = true;
        toast.classList.add("toast-card--leaving");
        toast.addEventListener(
          "animationend",
          () => {
            toast.remove();
            if (!stack.hasChildNodes()) {
              stack.remove();
            }
          },
          { once: true },
        );
      };

      const timeout = setTimeout(removeToast, 5000);
      close.addEventListener("click", () => {
        clearTimeout(timeout);
        removeToast();
      });
    }

    const REQUIRED_FIELDS = [
      "first_name",
      "last_name",
      "phone",
      "dob",
      "id_number",
      "nationality",
      "country_residence",
      "employment_status",
      "occupation",
      "employer",
      "income_bracket",
      "source_of_funds",
      "net_worth_range",
      "experience_level",
      "risk_tolerance",
      "objectives",
    ];
    const OBJECTIVES_FIELD_KEY = "objectives";
    const FORM_REQUIRED_FIELDS = REQUIRED_FIELDS.filter((key) => key !== OBJECTIVES_FIELD_KEY);
    const STEP_FIELD_GROUPS = {
      1: ["first_name", "last_name", "phone", "dob", "id_number", "nationality", "country_residence"],
      2: [
        "employment_status",
        "occupation",
        "employer",
        "income_bracket",
        "source_of_funds",
        "net_worth_range",
        "experience_level",
        "risk_tolerance",
        OBJECTIVES_FIELD_KEY,
      ],
    };

    const hasValue = (value) => String(value ?? "").trim().length > 0;
    function computeProfileComplete(row) {
      return REQUIRED_FIELDS.every((key) => {
        if (key === OBJECTIVES_FIELD_KEY) return hasValue(row?.objectives);
        return hasValue(row?.[key]);
      });
    }

    const objectivesGroup = document.getElementById("objectives-group");

    function clearFieldErrors() {
      FORM_REQUIRED_FIELDS.forEach((id) => {
        const el = document.getElementById(id);
        if (el) el.classList.remove("input-error");
      });
      objectivesGroup?.classList.remove("field-error");
    }

    function syncObjectivesHighlight() {
      const checked = document.querySelectorAll('input[name="objectives"]:checked').length > 0;
      if (objectivesGroup) objectivesGroup.classList.toggle("field-error", !checked);
      return checked;
    }

    FORM_REQUIRED_FIELDS.forEach((id) => {
      const el = document.getElementById(id);
      if (!el) return;
      const handle = () => {
        if (hasValue(el.value)) el.classList.remove("input-error");
      };
      el.addEventListener("input", handle);
      el.addEventListener("change", handle);
    });

    document.querySelectorAll('input[name="objectives"]').forEach((cb) => {
      cb.addEventListener("change", () => {
        syncObjectivesHighlight();
      });
    });

    const stepMeta = {
      1: { label: "Step 1 of 5 · Basic info", title: "Tell us about yourself" },
      2: { label: "Step 2 of 5 · Employment & income", title: "Share your work and income profile" },
      3: { label: "Step 3 of 5 · Compliance", title: "Confirm your declarations" },
      4: { label: "Step 4 of 5 · KYC", title: "Verify your identity" },
      5: { label: "Step 5 of 5 · Subscription plans", title: "Choose your AlgoHive access" },
    };

    const panels = Array.from(document.querySelectorAll("[data-panel]"));
    const panelForms = panels.filter((panel) => panel instanceof HTMLFormElement);
    const onboardingFlow = document.getElementById("onboardingFlow");
    const onboardingComplete = document.getElementById("onboardingComplete");
    const stepLabel = document.getElementById("currentStepLabel");
    const stepTitle = document.getElementById("currentStepTitle");
    const stepItems = Array.from(document.querySelectorAll("[data-step-item]"));
    const completedSteps = new Set();
    let currentStep = 1;
    const totalSteps = panels.length;
    let supabaseUser = null;
    let profileRow = null;
    let profileComplete = false;
    let kycDone = false;

    function syncStepIndicators() {
      stepItems.forEach((item) => {
        const index = Number(item.dataset.stepItem);
        if (!index) return;
        const circle = item.querySelector(`[data-step-indicator="${index}"]`);
        const isActive = currentStep === index;
        const isComplete = completedSteps.has(index);
        item.classList.toggle("step-item--active", isActive && !isComplete);
        item.classList.toggle("step-item--complete", isComplete);
        if (circle) {
          circle.textContent = isComplete ? "✓" : String(index);
        }
      });
    }

    function autoCompleteStepsFromProfile(row) {
      const ensureStepFields = (step) => {
        const keys = STEP_FIELD_GROUPS[step];
        if (!keys || !keys.length) return false;
        return keys.every((key) => {
          if (key === OBJECTIVES_FIELD_KEY) return hasValue(row?.objectives);
          return hasValue(row?.[key]);
        });
      };

      if (ensureStepFields(1)) completedSteps.add(1);
      if (ensureStepFields(2)) completedSteps.add(2);
      if (row && row.pep) completedSteps.add(3);
      if (kycDone) completedSteps.add(4);
    }

    const activateStep = (step) => {
      const nextValue = Math.min(Math.max(step, 1), totalSteps);
      currentStep = nextValue;

      panels.forEach((panel) => {
        const panelStep = Number(panel.dataset.panel);
        const isActive = panelStep === nextValue;
        panel.classList.toggle("hidden", !isActive);
        panel.setAttribute("aria-hidden", String(!isActive));
      });

      const meta = stepMeta[nextValue];
      if (meta) {
        if (stepLabel) stepLabel.textContent = meta.label;
        if (stepTitle) stepTitle.textContent = meta.title;
      }

      syncStepIndicators();
    };

    document.querySelectorAll("[data-step-delta]").forEach((button) => {
      if (button.hasAttribute("data-save-profile")) return;
      button.addEventListener("click", () => {
        const delta = Number(button.dataset.stepDelta ?? 0);
        if (Number.isNaN(delta)) return;
        activateStep(currentStep + delta);
      });
    });

    document.querySelectorAll("[data-step-target]").forEach((button) => {
      button.addEventListener("click", () => {
        const target = Number(button.dataset.stepTarget ?? currentStep);
        if (Number.isNaN(target)) return;
        activateStep(target);
      });
    });

    panelForms.forEach((form) => {
      form.addEventListener("submit", (event) => {
        event.preventDefault();
      });
    });

    const BLANK_AVATAR = "data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='64' height='64'><rect width='100%' height='100%' fill='%23e2e8f0'/></svg>";
    const avatarPreview = document.getElementById("avatar-preview");
    const avatarFile = document.getElementById("avatar-file");
    const avatarRemove = document.getElementById("remove-avatar");
    const avatarFilename = document.getElementById("avatar-filename");

    function setAvatarSrc(url) {
      const finalUrl = url ? `${url}${url.includes("?") ? "&" : "?"}v=${Date.now()}` : BLANK_AVATAR;
      if (avatarPreview) avatarPreview.src = finalUrl;
    }

    function setAvatarFilename(text) {
      if (avatarFilename) avatarFilename.textContent = text;
    }

    function getRequiredFieldsUpTo(step) {
      const out = new Set();
      for (let s = 1; s <= step; s += 1) {
        const fields = STEP_FIELD_GROUPS[s];
        if (!fields) continue;
        fields.forEach((key) => out.add(key));
      }
      return Array.from(out);
    }

    function validateProfile(step) {
      clearFieldErrors();
      const requiredKeys = getRequiredFieldsUpTo(step);
      const missing = [];
      requiredKeys.forEach((key) => {
        if (key === OBJECTIVES_FIELD_KEY) {
          if (!syncObjectivesHighlight()) missing.push(key);
          return;
        }
        const el = document.getElementById(key);
        if (!el) return;
        if (!hasValue(el.value)) {
          el.classList.add("input-error");
          missing.push(key);
        }
      });
      return missing;
    }

    function focusFirstMissing(missingKeys) {
      if (!missingKeys.length) return;
      const firstKey = missingKeys[0];
      if (firstKey === OBJECTIVES_FIELD_KEY) {
        objectivesGroup?.scrollIntoView({ behavior: "smooth", block: "center" });
        const firstCb = objectivesGroup?.querySelector('input[name="objectives"]');
        firstCb?.focus();
      } else {
        const el = document.getElementById(firstKey);
        if (el) {
          el.scrollIntoView({ behavior: "smooth", block: "center" });
          if (el instanceof HTMLElement) el.focus();
        }
      }
    }

    function setBusy(button, on) {
      if (!button) return;
      if (!button.dataset.originalText) button.dataset.originalText = button.textContent.trim();
      const savingText = button.dataset.savingText || "Saving…";
      button.disabled = on;
      button.classList.toggle("opacity-70", on);
      button.textContent = on ? savingText : button.dataset.originalText;
    }

    async function ensureProfile(userId, email) {
      let { data, error } = await supabase.from("profiles").select("*").eq("id", userId).maybeSingle();
      if (error && error.code !== "PGRST116") throw error;
      if (data) return data;
      const up = await supabase
        .from("profiles")
        .upsert({ id: userId, email, updated_at: new Date().toISOString() }, { onConflict: "id" })
        .select("*")
        .single();
      if (up.error) throw up.error;
      return up.data;
    }

    function resolveKycBoolean(row) {
      const v = row?.kyc_status;
      if (typeof v === "boolean") return v;
      if (typeof v === "string") return ["verified", "approved", "done", "passed", "kyc_done"].includes(v.toLowerCase());
      return false;
    }

    function setFieldValue(id, value) {
      const el = document.getElementById(id);
      if (!el) return;
      if (el instanceof HTMLInputElement || el instanceof HTMLSelectElement || el instanceof HTMLTextAreaElement) {
        el.value = value ?? "";
      }
    }

    function hydrateObjectives(csv) {
      const set = new Set(
        (csv || "")
          .split(",")
          .map((part) => part.trim().toLowerCase())
          .filter(Boolean),
      );
      document.querySelectorAll('input[name="objectives"]').forEach((cb) => {
        cb.checked = set.has(cb.value.trim().toLowerCase());
      });
    }

    function collectProfilePayload() {
      if (!supabaseUser) throw new Error("Please sign in again.");
      const payload = {
        id: supabaseUser.id,
        first_name: (document.getElementById("first_name")?.value || "").trim(),
        last_name: (document.getElementById("last_name")?.value || "").trim(),
        phone: (document.getElementById("phone")?.value || "").trim(),
        dob: document.getElementById("dob")?.value || null,
        id_number: (document.getElementById("id_number")?.value || "").trim() || null,
        nationality: (document.getElementById("nationality")?.value || "").trim() || null,
        country_residence: (document.getElementById("country_residence")?.value || "").trim() || null,
        employment_status: document.getElementById("employment_status")?.value || null,
        occupation: (document.getElementById("occupation")?.value || "").trim() || null,
        employer: (document.getElementById("employer")?.value || "").trim() || null,
        income_bracket: document.getElementById("income_bracket")?.value || null,
        source_of_funds: document.getElementById("source_of_funds")?.value || null,
        net_worth_range: document.getElementById("net_worth_range")?.value || null,
        experience_level: document.getElementById("experience_level")?.value || null,
        risk_tolerance: document.getElementById("risk_tolerance")?.value || null,
        objectives: Array.from(document.querySelectorAll('input[name="objectives"]:checked'))
          .map((cb) => cb.value)
          .join(", "),
        pep: !!document.getElementById("pep")?.checked,
        fatca_crs: !!document.getElementById("fatca_crs")?.checked,
        updated_at: new Date().toISOString(),
      };
      return payload;
    }

    function determineInitialStep(row) {
      for (let step = 1; step <= totalSteps; step += 1) {
        const fields = STEP_FIELD_GROUPS[step];
        if (!fields) continue;
        for (const key of fields) {
          if (key === OBJECTIVES_FIELD_KEY) {
            if (!hasValue(row?.objectives)) return step;
          } else if (!hasValue(row?.[key])) {
            return step;
          }
        }
      }
      if (!resolveKycBoolean(row)) return 4;
      return totalSteps;
    }

    async function persistProfile(button) {
      if (!supabaseUser) {
        banner("Please sign in again.", "err");
        return false;
      }
      setBusy(button, true);
      try {
        const payload = collectProfilePayload();
        const { data: saved, error } = await supabase
          .from("profiles")
          .upsert(payload, { onConflict: "id" })
          .select("*")
          .single();

        if (error) throw error;

        profileRow = { ...profileRow, ...saved };
        profileComplete = computeProfileComplete(saved);
        if (typeof saved.kyc_status !== "undefined") {
          kycDone = resolveKycBoolean(saved);
        }

        autoCompleteStepsFromProfile(profileRow);

        banner("Profile saved successfully.", "ok");
        document.dispatchEvent(new Event("ah:profile-saved"));
        return true;
      } catch (error) {
        console.error(error);
        banner(error.message || "Save failed", "err");
        return false;
      } finally {
        setBusy(button, false);
      }
    }

    const AVATAR_BUCKET = "avatars";

    async function uploadAvatar(file) {
      if (!supabaseUser) throw new Error("Please sign in again.");
      if (!file) throw new Error("Pick an image");
      if (!file.type.startsWith("image/")) throw new Error("Pick a valid image");
      if (file.size > 2 * 1024 * 1024) throw new Error("Image too large (max 2MB)");

      setAvatarSrc(URL.createObjectURL(file));

      const ext = (file.name.split(".").pop() || "jpg").toLowerCase();
      const path = `${supabaseUser.id}/avatar_${Date.now()}.${ext}`;

      const { error: upErr } = await supabase.storage.from(AVATAR_BUCKET).upload(path, file, {
        upsert: true,
        cacheControl: "3600",
        contentType: file.type,
      });
      if (upErr) throw upErr;

      const { data: pub } = supabase.storage.from(AVATAR_BUCKET).getPublicUrl(path);
      const avatar_url = pub?.publicUrl;
      if (!avatar_url) throw new Error("Could not get public URL");

      const { error: dbErr } = await supabase
        .from("profiles")
        .upsert({ id: supabaseUser.id, avatar_url, updated_at: new Date().toISOString() }, { onConflict: "id" });
      if (dbErr) throw dbErr;

      profileRow = { ...profileRow, avatar_url };
      setAvatarSrc(avatar_url);
      avatarRemove?.classList.remove("hidden");
      setAvatarFilename(file.name);
      banner("Avatar updated successfully.", "ok");
    }

    avatarFile?.addEventListener("change", async () => {
      const file = avatarFile.files?.[0];
      if (!file) return;
      try {
        await uploadAvatar(file);
      } catch (error) {
        console.error(error);
        banner(error.message || "Avatar upload failed", "err");
        setAvatarSrc(profileRow?.avatar_url || null);
        setAvatarFilename(profileRow?.avatar_url ? "Avatar on file" : "No file chosen");
      } finally {
        avatarFile.value = "";
      }
    });

    avatarRemove?.addEventListener("click", async () => {
      if (!supabaseUser) {
        banner("Please sign in again.", "err");
        return;
      }
      try {
        const { error } = await supabase
          .from("profiles")
          .upsert({ id: supabaseUser.id, avatar_url: null, updated_at: new Date().toISOString() }, { onConflict: "id" });
        if (error) throw error;
        profileRow = { ...profileRow, avatar_url: null };
        setAvatarSrc(null);
        setAvatarFilename("No file chosen");
        avatarRemove.classList.add("hidden");
        banner("Avatar removed", "ok");
      } catch (error) {
        console.error(error);
        banner(error.message || "Could not remove avatar", "err");
      }
    });

    document.querySelectorAll("[data-save-profile]").forEach((button) => {
      button.addEventListener("click", async () => {
        const validationStep = button.hasAttribute("data-complete") ? totalSteps : currentStep;
        const missing = validateProfile(validationStep);
        if (missing.length) {
          focusFirstMissing(missing);
          banner("Please fill in the highlighted fields.", "err");
          return;
        }

        const saved = await persistProfile(button);
        if (!saved) return;

        completedSteps.add(currentStep);

        if (button.hasAttribute("data-complete")) {
          for (let step = 1; step <= totalSteps; step += 1) {
            completedSteps.add(step);
          }
          syncStepIndicators();
          button.disabled = true;
          button.textContent = "All steps saved";
          button.classList.add("opacity-80");
          if (onboardingFlow) onboardingFlow.classList.add("hidden");
          if (onboardingComplete) {
            onboardingComplete.classList.remove("hidden");
            onboardingComplete.classList.add("swap-anim");
          }
          if (stepLabel) stepLabel.textContent = "All steps complete";
          if (stepTitle) stepTitle.textContent = "Discover your next AlgoHive move";
          banner("Onboarding complete.", "ok");
          return;
        }

        const delta = Number(button.dataset.stepDelta ?? 0);
        if (!Number.isNaN(delta) && delta !== 0) {
          activateStep(currentStep + delta);
          return;
        }

        syncStepIndicators();
      });
    });

    activateStep(1);

    (async () => {
      try {
        const { data: { session } } = await supabase.auth.getSession();
        if (!session) {
          const next = encodeURIComponent(location.pathname + location.search + location.hash);
          location.replace(`/auth.html?tab=in&redirect=${next}`);
          return;
        }

        const { data: { user } } = await supabase.auth.getUser();
        if (!user) {
          const next = encodeURIComponent(location.pathname + location.search + location.hash);
          location.replace(`/auth.html?tab=in&redirect=${next}`);
          return;
        }

        supabaseUser = user;
        const row = await ensureProfile(user.id, user.email || null);
        profileRow = row;

        setFieldValue("first_name", row?.first_name);
        setFieldValue("last_name", row?.last_name);
        setFieldValue("phone", row?.phone);
        setFieldValue("dob", row?.dob);
        setFieldValue("id_number", row?.id_number);
        setFieldValue("nationality", row?.nationality);
        setFieldValue("country_residence", row?.country_residence);
        setFieldValue("employment_status", row?.employment_status);
        setFieldValue("occupation", row?.occupation);
        setFieldValue("employer", row?.employer);
        setFieldValue("income_bracket", row?.income_bracket);
        setFieldValue("source_of_funds", row?.source_of_funds);
        setFieldValue("net_worth_range", row?.net_worth_range);
        setFieldValue("experience_level", row?.experience_level);
        setFieldValue("risk_tolerance", row?.risk_tolerance);

        hydrateObjectives(row?.objectives || "");
        syncObjectivesHighlight();

        const pepEl = document.getElementById("pep");
        if (pepEl) pepEl.checked = !!row?.pep;
        const fatcaEl = document.getElementById("fatca_crs");
        if (fatcaEl) fatcaEl.checked = !!row?.fatca_crs;

        setAvatarSrc(row?.avatar_url || null);
        setAvatarFilename(row?.avatar_url ? "Avatar on file" : "No file chosen");
        avatarRemove?.classList.toggle("hidden", !row?.avatar_url);

        profileComplete = computeProfileComplete(row);
        kycDone = resolveKycBoolean(row);

        autoCompleteStepsFromProfile(profileRow);

        const initialStep = determineInitialStep(row);
        for (let step = 1; step < initialStep; step += 1) {
          completedSteps.add(step);
        }

        activateStep(initialStep);
      } catch (error) {
        console.error(error);
        banner(error.message || "Could not load your profile.", "err");
      }
    })();
  </script>
</body>
</html>
