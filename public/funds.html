<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Excelsia — Fund Factsheet (Dummy)</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" />
  <style>
    :root{ --ink:#0f172a; --line:#e5e7eb; --bg:#ffffff; --olive:#0B1719; --accent:#0e7490 }
    html,body{ font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif; color:var(--ink); background:var(--bg) }
    .card{ background:#fff; border:1px solid var(--line); border-radius:14px }
    .btn{ height:40px; padding:0 .85rem; border-radius:10px; border:1px solid var(--line); font-weight:600; display:inline-flex; align-items:center; gap:.5rem }
    .tab{ height:34px; padding:0 .7rem; border-radius:8px }
    .tab-active{ background:#111827; color:#fff }
    .ps-tile{ border:1px solid #e5e7eb; border-radius:14px; padding:14px 16px; background:#fff }
    .ps-label{ color:#64748b; font-weight:500; font-size:.85rem }
    .ps-value{ font-weight:700; font-size:1.05rem; margin-top:2px }
    .legend-dot{ width:10px; height:10px; border-radius:9999px; display:inline-block }
  </style>
</head>
<body class="min-h-screen">
  <!-- Header -->
  <header class="border-b border-slate-200 bg-white sticky top-0 z-30">
    <div class="max-w-7xl mx-auto px-5 py-4 flex items-center justify-between gap-4">
      <div class="flex items-center gap-3 min-w-0">
        <img src="https://excelsia.co.za/favicon.ico" alt="Excelsia Logo" class="w-9 h-9 rounded" />
        <div class="min-w-0">
          <div class="text-[15px] font-extrabold tracking-tight">Excelsia Capital</div>
          <div class="text-[12px] text-slate-500 truncate">Independent, owner‑managed investment manager (est. 2016)</div>
        </div>
      </div>
      <div class="hidden md:flex items-center gap-2">
        <a href="https://excelsia.co.za/funds/" target="_blank" class="btn hover:bg-slate-50"><i class="fa-solid fa-up-right-from-square"></i> Funds</a>
        <a href="https://excelsia.co.za/responsible-investing/" target="_blank" class="btn hover:bg-slate-50">Responsible Investing</a>
      </div>
    </div>
  </header>

  <!-- Content -->
  <main class="max-w-7xl mx-auto px-5 py-6 grid grid-cols-12 gap-6">
    <!-- Left: Factsheet -->
    <section class="card col-span-12 lg:col-span-8">
      <div class="px-5 pt-5">
        <div class="text-xs font-semibold text-slate-500">FUND FACTSHEET • <span id="fs-updated"></span></div>
        <h1 class="text-2xl md:text-3xl font-extrabold mt-1" id="fs-title">Excelsia Flexible Income 27four Fund</h1>
        <div class="mt-2 flex flex-wrap items-center gap-2 text-slate-600">
          <span>Managers: <span class="font-medium">Rajay Ambekar, Andrew Bishop</span></span>
          <span class="mx-1 text-slate-400">•</span>
          <span>Domicile: <span class="font-medium">South Africa</span></span>
          <span class="mx-1 text-slate-400">•</span>
          <span>Structure: <span class="font-medium">CIS</span></span>
          <span class="mx-1 text-slate-400">•</span>
          <span>Category: <span class="font-medium">SA Multi‑Asset Income</span></span>
          <span class="mx-1 text-slate-400">•</span>
          <span>Benchmark: <span class="font-medium">STeFI + 3%</span></span>
        </div>
      </div>

      <!-- Range + NAV panel -->
      <div class="flex items-center justify-between px-5 py-4 border-y border-slate-200">
        <div>
          <div class="font-normal text-slate-800">NAV Curve — <span class="font-semibold">Class A (ZAR)</span></div>
          <div class="mt-1 text-sm text-slate-500" id="pf-updated">—</div>
        </div>
        <div class="flex items-center gap-2">
          <button data-range="1M" class="tab tab-active text-[13px]">1M</button>
          <button data-range="6M" class="tab text-[13px]">6M</button>
          <button data-range="1Y" class="tab text-[13px]">1Y</button>
          <button data-range="ALL" class="tab text-[13px]">All</button>
          <button id="pf-refresh" class="ml-2 h-9 w-9 rounded-lg border border-slate-200 hover:bg-slate-50 grid place-items-center" title="Refresh"><i class="fa-solid fa-rotate-right"></i></button>
        </div>
      </div>

      <div class="px-5 pt-4">
        <div class="flex items-baseline gap-3">
          <div class="text-2xl font-bold" id="pf-value">R 0.00</div>
          <div class="text-lg font-normal" id="pf-change">—</div>
        </div>
      </div>
      <div class="px-2 pb-4 pt-2"><div class="h-[260px]"><canvas id="pf-chart"></canvas></div></div>

      <!-- KPIs -->
      <div class="grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-6 gap-4 px-5 pb-5">
        <div class="ps-tile"><div class="ps-label">YTD</div><div id="kpi-ytd" class="ps-value">+3.42%</div></div>
        <div class="ps-tile"><div class="ps-label">1Y</div><div id="kpi-1y" class="ps-value">+7.85%</div></div>
        <div class="ps-tile"><div class="ps-label">Since Inception</div><div id="kpi-since" class="ps-value">+8.20%</div></div>
        <div class="ps-tile"><div class="ps-label">Volatility (ann.)</div><div id="kpi-vol" class="ps-value">2.10%</div></div>
        <div class="ps-tile"><div class="ps-label">Max Drawdown</div><div id="kpi-dd" class="ps-value">-1.90%</div></div>
        <div class="ps-tile"><div class="ps-label">Sharpe</div><div id="kpi-sharpe" class="ps-value">1.05</div></div>
      </div>

      <!-- About -->
      <div class="px-5 pb-6">
        <h3 class="text-lg font-semibold mb-2">About this fund</h3>
        <p class="text-sm text-slate-700">
          Aiming for steady capital growth and income over 3–5 years, the fund targets returns above money‑market rates while
          keeping liquidity high. It is managed within the SA retirement‑fund regulatory framework and benchmarked to STeFI plus a spread.
          (This page uses <span class="font-semibold">dummy performance</span> for demo.)
        </p>
        <ul class="list-disc pl-5 mt-2 text-sm text-slate-700">
          <li>Dealing: monthly; settlement T+3 (demo)</li>
          <li>Income: annual distribution in March (demo)</li>
          <li>Risk level: Low to Moderate (demo)</li>
        </ul>
      </div>
    </section>

    <!-- Right: Firm + Terms + Fees -->
    <aside class="col-span-12 lg:col-span-4 grid gap-6 self-start">
      <!-- Firm blurb -->
      <div class="card p-5">
        <div class="flex items-center gap-3 mb-2">
          <img src="https://excelsia.co.za/favicon.ico" alt="Excelsia" class="w-7 h-7 rounded" />
          <div class="font-semibold">Excelsia Capital</div>
        </div>
        <p class="text-sm text-slate-700">
          Independent, staff‑owned South African investment manager founded in 2016 with a valuation‑driven
          philosophy and long‑term horizon. (Summary based on public site.)
        </p>
        <div class="mt-3 text-xs text-slate-500">Rough demo only — not financial advice.</div>
      </div>

      <!-- Fund terms -->
      <div class="card p-5">
        <div class="font-semibold mb-2">Key Terms (demo)</div>
        <div class="grid grid-cols-2 gap-3 text-sm">
          <div class="p-3 border rounded-xl"><div class="text-slate-500 text-xs">Structure</div><div class="font-semibold">CIS</div></div>
          <div class="p-3 border rounded-xl"><div class="text-slate-500 text-xs">Dealing</div><div class="font-semibold">Monthly</div></div>
          <div class="p-3 border rounded-xl"><div class="text-slate-500 text-xs">Liquidity</div><div class="font-semibold">30 days notice</div></div>
          <div class="p-3 border rounded-xl"><div class="text-slate-500 text-xs">Min Investment</div><div class="font-semibold">R 10,000</div></div>
          <div class="p-3 border rounded-xl"><div class="text-slate-500 text-xs">Benchmark</div><div class="font-semibold">STeFI + 3%</div></div>
          <div class="p-3 border rounded-xl"><div class="text-slate-500 text-xs">Currency</div><div class="font-semibold">ZAR</div></div>
        </div>
      </div>

      <!-- Fees -->
      <div class="card p-5">
        <div class="font-semibold mb-2">Fees (demo)</div>
        <ul class="space-y-2 text-sm text-slate-700">
          <li class="flex items-start gap-2"><span class="font-semibold min-w-[140px]">Management</span><span>0.60% p.a.</span></li>
          <li class="flex items-start gap-2"><span class="font-semibold min-w-[140px]">Performance</span><span>10% over HWM</span></li>
          <li class="flex items-start gap-2"><span class="font-semibold min-w-[140px]">Admin / Platform</span><span>0.15% p.a.</span></li>
          <li class="flex items-start gap-2"><span class="font-semibold min-w-[140px]">Subscriptions/Redemptions</span><span>Cut‑off 11:00 (demo)</span></li>
        </ul>
      </div>

      <!-- Quick switch: the real Excelsia funds (names are real, content is dummy) -->
      <div class="card p-5">
        <div class="font-semibold mb-2">Other Excelsia funds</div>
        <div id="fund-switch" class="space-y-2 text-sm">
          <button data-fund="flex" class="w-full text-left px-3 py-2 rounded-lg border hover:bg-slate-50">Excelsia Flexible Income 27four Fund</button>
          <button data-fund="equity" class="w-full text-left px-3 py-2 rounded-lg border hover:bg-slate-50">Excelsia Equity 27four Fund</button>
          <button data-fund="balanced" class="w-full text-left px-3 py-2 rounded-lg border hover:bg-slate-50">Excelsia Balanced 27four Fund</button>
          <button data-fund="global" class="w-full text-left px-3 py-2 rounded-lg border hover:bg-slate-50">Excelsia Global Equity Fund (USD)</button>
        </div>
      </div>

      <!-- Documents -->
      <div class="card p-5">
        <div class="font-semibold mb-2">Key Documents</div>
        <ul class="space-y-2 text-sm">
          <li><a class="text-[var(--accent)] hover:underline" href="https://excelsia.co.za/funds/" target="_blank"><i class="fa-regular fa-file-lines mr-1"></i>Minimum Disclosure Document (links on site)</a></li>
          <li><a class="text-[var(--accent)] hover:underline" href="https://excelsia.co.za/funds/" target="_blank"><i class="fa-regular fa-file-lines mr-1"></i>Application & T&C forms</a></li>
        </ul>
      </div>

      <!-- Disclaimer -->
      <div class="card p-5">
        <div class="font-semibold mb-2">Regulatory</div>
        <p class="text-sm text-slate-700">Demo content. Not financial advice. Products are offered through authorised FSPs where applicable.</p>
      </div>
    </aside>

    <!-- Allocation & Holdings -->
    <section class="card col-span-12">
      <div class="px-5 pt-5 flex items-center justify-between">
        <h3 class="text-lg font-medium">Asset Allocation (demo)</h3>
        <span class="text-xs text-slate-500">Total = 100%</span>
      </div>
      <div id="asset-allocation" class="p-5 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"></div>
      <div class="px-5 pb-5">
        <h3 class="text-lg font-medium mb-3">Top Holdings (demo)</h3>
        <div class="flex items-center gap-6">
          <svg id="ph-donut" viewBox="0 0 180 180" class="h-40 w-40 shrink-0"></svg>
          <div id="ph-legend" class="text-sm grow"></div>
        </div>
      </div>
    </section>
  </main>

  <!-- libs -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>
  <script>
    // helpers
    const $ = (q, el=document) => el.querySelector(q);
    const $$ = (q, el=document) => Array.from(el.querySelectorAll(q));
    const ZA = { minimumFractionDigits:2, maximumFractionDigits:2 };
    const money = (n, ccy='ZAR') => (ccy==='ZAR'?'R ':'$ ') + Number(n||0).toLocaleString('en-ZA', ZA);

    // dummy NAV series (index level in ZAR)
    const navSeries = {
      flex: {
        ccy:'ZAR', labels:['Sep','Oct','Nov','Dec','Jan','Feb','Mar','Apr','May','Jun','Jul','Aug','Sep'],
        all:[100,100.3,100.7,101.1,101.6,101.9,102.2,102.6,103.0,103.3,103.7,104.0,104.5],
        ytd:[100.5,101.0,101.3,101.9,102.4,102.9,103.3,103.6,104.0],
        kpi:{ ytd:3.42, y1:7.85, since:8.2, vol:2.1, dd:-1.9, sharpe:1.05 },
        alloc:[{label:'Cash & MM',pct:45},{label:'Gov Bonds',pct:25},{label:'Credit',pct:20},{label:'Equity',pct:8},{label:'Others',pct:2}],
        holds:[{label:'SA Govt 2027',pct:14},{label:'SA Govt 2029',pct:12},{label:'ABSA FRN',pct:9},{label:'Nedbank FRN',pct:8},{label:'Standard Bank FRN',pct:7},{label:'Cash',pct:6}]
      },
      equity: {
        ccy:'ZAR', labels:['Sep','Oct','Nov','Dec','Jan','Feb','Mar','Apr','May','Jun','Jul','Aug','Sep'],
        all:[100,98,103,106,104,107,111,114,116,112,118,121,125],
        ytd:[108,109,111,112,115,117,118,121,125],
        kpi:{ ytd:9.80, y1:15.40, since:25.0, vol:12.5, dd:-8.9, sharpe:0.65 },
        alloc:[{label:'SA Equity',pct:98},{label:'Cash',pct:2}],
        holds:[{label:'Naspers/Prosus',pct:12},{label:'Richemont',pct:10},{label:'FirstRand',pct:9},{label:'MTN',pct:7},{label:'Shoprite',pct:6},{label:'Cash',pct:2}]
      },
      balanced: {
        ccy:'ZAR', labels:['Sep','Oct','Nov','Dec','Jan','Feb','Mar','Apr','May','Jun','Jul','Aug','Sep'],
        all:[100,101,102,101.5,103,104,103.8,105.2,106.0,106.8,107.3,108.1,108.9],
        ytd:[102.0,102.7,103.4,104.2,105.0,105.5,106.1,107.2,108.9],
        kpi:{ ytd:6.40, y1:12.10, since:8.9, vol:7.2, dd:-4.2, sharpe:0.72 },
        alloc:[{label:'Equity',pct:55},{label:'Bonds',pct:22},{label:'Property',pct:8},{label:'Offshore',pct:10},{label:'Cash',pct:5}],
        holds:[{label:'SA Equity Basket',pct:20},{label:'SA Bonds 2030',pct:12},{label:'Global ETF',pct:10},{label:'Property REITs',pct:8},{label:'Cash',pct:5},{label:'Other',pct:45}]
      },
      global: {
        ccy:'USD', labels:['Sep','Oct','Nov','Dec','Jan','Feb','Mar','Apr','May','Jun','Jul','Aug','Sep'],
        all:[100,102,104,101,105,108,110,112,115,117,121,123,126],
        ytd:[108,110,111,113,116,118,120,123,126],
        kpi:{ ytd:12.40, y1:18.10, since:26.0, vol:14.5, dd:-6.8, sharpe:0.88 },
        alloc:[{label:'Global Equity',pct:98},{label:'Cash (USD)',pct:2}],
        holds:[{label:'MSFT',pct:7},{label:'AAPL',pct:7},{label:'NVDA',pct:6},{label:'AMZN',pct:5},{label:'META',pct:4},{label:'Others',pct:69}]
      }
    };

    // chart
    let chart, activeKey = 'flex';
    function initChart(){
      const ctx = document.getElementById('pf-chart').getContext('2d');
      const g = ctx.createLinearGradient(0,0,0,260); g.addColorStop(0,'rgba(14,116,144,0.35)'); g.addColorStop(1,'rgba(14,116,144,0.06)');
      chart = new Chart(ctx,{ type:'line', data:{ labels:[], datasets:[{ data:[], tension:.35, borderWidth:2, borderColor:'#0e7490', backgroundColor:g, fill:true, pointRadius:0 }] }, options:{ responsive:true, maintainAspectRatio:false, plugins:{ legend:{display:false}, tooltip:{ displayColors:false, callbacks:{ label:c=> (navSeries[activeKey].ccy==='ZAR'?'R ':'$ ') + c.raw.toLocaleString('en-ZA',ZA) } } }, scales:{ x:{ grid:{display:false}, ticks:{ color:'#94a3b8', maxTicksLimit:6 } }, y:{ ticks:{ color:'#94a3b8', callback:v=> (navSeries[activeKey].ccy==='ZAR'?'R ':'$ ') + Number(v||0).toLocaleString('en-ZA',ZA) } } } });
    }

    function drawDonut(svgEl, items){
      const cx=90, cy=90, r=62, R=72, TAU=Math.PI*2; svgEl.innerHTML='';
      const colors=['#111827','#2563eb','#16a34a','#f59e0b','#ef4444','#6b7280','#10b981','#6366f1','#94a3b8','#3f6212'];
      const sum = items.reduce((s,i)=> s + (Number(i.pct)||0), 0) || 1; let a0 = -Math.PI/2;
      items.forEach((it,idx)=>{ const pct=Number(it.pct)||0; const frac=pct/sum; const a1=a0+frac*TAU; const la=(a1-a0)>Math.PI?1:0; const p0=[cx+R*Math.cos(a0),cy+R*Math.sin(a0)], p1=[cx+R*Math.cos(a1),cy+R*Math.sin(a1)]; const q0=[cx+r*Math.cos(a1),cy+r*Math.sin(a1)], q1=[cx+r*Math.cos(a0),cy+r*Math.sin(a0)]; const d=`M ${p0[0]} ${p0[1]} A ${R} ${R} 0 ${la} 1 ${p1[0]} ${p1[1]} L ${q0[0]} ${q0[1]} A ${r} ${r} 0 ${la} 0 ${q1[0]} ${q1[1]} Z`; const path=document.createElementNS('http://www.w3.org/2000/svg','path'); path.setAttribute('d', d); path.setAttribute('fill', colors[idx%colors.length]); path.setAttribute('opacity','.95'); svgEl.appendChild(path); a0=a1; });
      const tot=document.createElementNS('http://www.w3.org/2000/svg','text'); tot.textContent='100%'; tot.setAttribute('x',cx); tot.setAttribute('y',cy+5); tot.setAttribute('text-anchor','middle'); tot.setAttribute('font-size','16'); tot.setAttribute('font-weight','700'); svgEl.appendChild(tot);
    }

    function renderAllocation(key){
      const wrap = document.getElementById('asset-allocation'); wrap.innerHTML='';
      (navSeries[key].alloc||[]).forEach((i,idx)=>{
        wrap.insertAdjacentHTML('beforeend',`<div><div class='flex items-center justify-between mb-1.5'><span class='text-sm text-slate-700'>${i.label}</span><span class='text-sm font-medium'>${i.pct}%</span></div><div class='h-2.5 w-full rounded-full bg-slate-100 overflow-hidden'><div class='h-full rounded-full' style='width:${i.pct}%; background:${['#111827','#2563eb','#16a34a','#f59e0b','#ef4444','#6b7280'][idx%6]}'></div></div></div>`);
      });
    }

    function renderHoldings(key){
      const svg=document.getElementById('ph-donut'); const legend=document.getElementById('ph-legend'); const items=(navSeries[key].holds||[]);
      drawDonut(svg, items); legend.innerHTML = items.map((h,i)=>`<div class='flex items-center justify-between py-1'><div class='flex items-center gap-2 min-w-0'><span class='legend-dot' style='background: var(--phc-${i});'></span><span class='truncate'>${h.label}</span></div><div class='ml-3 tabular-nums'>${h.pct.toFixed(2)}%</div></div>`).join('');
      const colors=['#111827','#2563eb','#16a34a','#f59e0b','#ef4444','#6b7280','#10b981','#6366f1','#94a3b8','#3f6212']; items.forEach((_,i)=> document.documentElement.style.setProperty(`--phc-${i}`, colors[i%colors.length]));
    }

    function setKPIs(k){
      const m=navSeries[k].kpi; document.getElementById('kpi-ytd').textContent = (m.ytd>=0?'+':'')+m.ytd.toFixed(2)+'%'; document.getElementById('kpi-1y').textContent=(m.y1>=0?'+':'')+m.y1.toFixed(2)+'%'; document.getElementById('kpi-since').textContent=(m.since>=0?'+':'')+m.since.toFixed(2)+'%'; document.getElementById('kpi-vol').textContent=m.vol.toFixed(2)+'%'; document.getElementById('kpi-dd').textContent=m.dd.toFixed(2)+'%'; document.getElementById('kpi-sharpe').textContent=m.sharpe.toFixed(2);
    }

    function setTitle(key){
      const map={flex:'Excelsia Flexible Income 27four Fund', equity:'Excelsia Equity 27four Fund', balanced:'Excelsia Balanced 27four Fund', global:'Excelsia Global Equity Fund (USD)'};
      document.getElementById('fs-title').textContent = map[key];
    }

    function setCurve(key, range){
      const data = navSeries[key]; const labels = (range==='1M'? data.labels.slice(-6) : range==='6M'? data.labels.slice(-6) : range==='1Y'? data.labels : data.labels);
      const series = (range==='1M'? data.ytd.slice(-6) : range==='6M'? data.ytd : range==='1Y'? data.ytd : data.all);
      chart.data.labels = labels; chart.data.datasets[0].data = series; chart.update();
      const first=series[0]||100, last=series.at(-1)||100; const chg=((last-first)/first)*100; document.getElementById('pf-value').textContent = (data.ccy==='ZAR'? 'R ':'$ ')+ Number(last).toLocaleString('en-ZA',ZA); const chgEl=document.getElementById('pf-change'); chgEl.textContent=`${chg>=0?'+':''}${chg.toFixed(2)}%`; chgEl.style.color= chg>=0? '#16a34a':'#dc2626'; document.getElementById('pf-updated').textContent = new Date().toLocaleString('en-ZA',{ month:'long', day:'2-digit', hour:'2-digit', minute:'2-digit'}) + ' SAST';
      document.getElementById('fs-updated').textContent = 'Updated '+ new Date().toLocaleString('en-ZA',{ day:'2-digit', month:'2-digit', year:'numeric', hour:'2-digit', minute:'2-digit'});
    }

    function switchFund(key){ activeKey=key; setTitle(key); setKPIs(key); renderAllocation(key); renderHoldings(key); setCurve(key, document.querySelector('.tab.tab-active')?.dataset.range||'1M'); }

    // boot
    initChart(); switchFund('flex');
    $$('#fund-switch [data-fund]').forEach(b=> b.addEventListener('click', ()=> switchFund(b.dataset.fund)));
    $$('#\u0020.tab').forEach(btn=> btn.addEventListener('click', ()=>{ $$('#\u0020.tab').forEach(b=>b.classList.remove('tab-active')); btn.classList.add('tab-active'); setCurve(activeKey, btn.dataset.range); }));
    document.getElementById('pf-refresh')?.addEventListener('click', ()=> setCurve(activeKey, document.querySelector('.tab.tab-active')?.dataset.range||'1M'));
  </script>
</body>
</html>
