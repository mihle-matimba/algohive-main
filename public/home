<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>AlgoHive â€“ Dashboard (Replica)</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet" />
  <style>
    :root {
      --page: #0b1220;
      --bg: #ffffff;
      --muted: #64748b;
      --ink: #0f172a;
      --olive: #10b981;
      --brand: #f59e0b;
      --line: #e2e8f0;
    }

    html,
    body {
      font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif;
      background: var(--bg);
      color: var(--ink)
    }

    .card {
      background: #fff;
      border: 1px solid var(--line);
      border-radius: 12px
    }

    .btn {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: .5rem;
      height: 40px;
      padding: 0 .875rem;
      border-radius: 10px;
      border: 1px solid var(--line);
      font-weight: 600
    }

    .input {
      height: 40px;
      border: 1px solid var(--line);
      border-radius: 10px;
      padding: 0 .75rem
    }

    .tab {
      height: 36px;
      border-radius: 8px;
      padding: 0 .75rem
    }

    .tab-active {
      background: #111827;
      color: #fff
    }

    /* ===== Sidebar + Layout (CSS var grid) ===== */
    #layout {
      --sb: 220px;
      display: grid;
      grid-template-columns: var(--sb) 1fr;
    }

    #layout.is-collapsed {
      --sb: 64px;
    }

    #ah-sidebar {
      transition: width .2s ease;
      width: var(--sb);
    }

    /* inherits --sb from #layout */
    #ah-sidebar[data-collapsed="true"] .label,
    #ah-sidebar[data-collapsed="true"] .chevron {
      display: none;
    }

    #ah-sidebar details .sub {
      transition: height .2s ease;
    }

    #ah-sidebar[data-collapsed="true"] details>.sub {
      display: none !important;
    }

    #ah-sidebar[data-collapsed="true"] nav a,
    #ah-sidebar[data-collapsed="true"] details>summary {
      justify-content: center;
      gap: .25rem;
    }

    #ah-sidebar[data-collapsed="true"] details>summary span {
      gap: 0;
    }

    #ah-sidebar .footer {
      transition: all .2s ease;
    }

    #ah-sidebar[data-collapsed="true"] .footer {
      justify-content: center;
      flex-direction: column;
      gap: 12px;
    }

    #ah-sidebar[data-collapsed="true"] .btn-collapse {
      order: 1;
    }

    #ah-sidebar[data-collapsed="true"] .btn-settings {
      order: 2;
    }

    .btn-collapse :is(svg, i) {
      display: inline-block;
      transition: transform .25s ease;
    }

    #ah-sidebar[data-collapsed="true"] .btn-collapse :is(svg, i) {
      transform: rotate(180deg);
    }

    /* Perf tiles */
    .ps-tile {
      border: 1px solid #e5e7eb;
      border-radius: 14px;
      padding: 14px 16px;
      background: #fff;
    }

    .ps-label {
      color: #64748b;
      font-weight: 500;
      font-size: .85rem;
    }

    .ps-value {
      font-weight: 600;
      font-size: 1rem;
      margin-top: 2px;
    }

    /* Hide scrollbars (optional) */
    .no-scrollbar::-webkit-scrollbar {
      display: none;
    }

    .no-scrollbar {
      -ms-overflow-style: none;
      scrollbar-width: none;
    }

    /* Safety clamps */
    canvas {
      max-width: 100%;
      height: auto;
    }

    table {
      max-width: 100%;
    }
  </style>
</head>

<body class="min-h-screen overflow-x-hidden">

  <!-- ===== Outer Grid: var(--sb) drives sidebar column ===== -->
  <div id="layout" class="min-h-screen">

    <!-- ===== Sidebar ===== -->
    <aside id="ah-sidebar" data-collapsed="false"
      class="border-r border-slate-200 h-[100vh] sticky top-0 bg-white flex flex-col overflow-hidden">
      <div class="px-4 py-4 flex items-center gap-3 border-b border-slate-200">
        <img src="https://static.wixstatic.com/media/ac771e_af06d86a7a1f4abd87e52e45f3bcbd96~mv2.png"
          alt="AlgoHive Logo" class="w-10 h-10 object-contain" />
        <div class="min-w-0">
          <div class="font-bold text-[15px] text-slate-900 label">AlgoHive</div>
          <div class="text-[11px] text-slate-500 label">ID: PA3C03RVE4RP</div>
        </div>
      </div>

      <nav class="p-2 text-[14px] flex-1 overflow-y-auto">
        <a class="flex items-center gap-3 px-3 py-2 rounded-lg hover:bg-slate-50 font-medium text-slate-900 bg-slate-100"
          href="#" title="Home">
          <i class="fa-solid fa-house text-slate-500 w-4 shrink-0"></i><span class="label">Home</span>
        </a>

        <details class="group mt-1">
          <summary
            class="flex items-center justify-between px-3 py-2 rounded-lg hover:bg-slate-50 cursor-pointer font-medium text-slate-900">
            <span class="flex items-center gap-3"><i class="fa-regular fa-user w-4 text-slate-500"></i><span
                class="label">Portfolio</span></span>
            <i class="fa-solid fa-chevron-down text-slate-400 group-open:rotate-180 transition-transform chevron"></i>
          </summary>
          <div class="ml-8 mt-1 flex flex-col sub">
            <a class="px-3 py-2 rounded-lg hover:bg-slate-50 flex items-center gap-2" href="#" title="Positions"><i
                class="fa-solid fa-chart-pie w-4 text-slate-500"></i><span class="label">Positions</span></a>
            <a class="px-3 py-2 rounded-lg hover:bg-slate-50 flex items-center gap-2" href="#" title="Orders"><i
                class="fa-regular fa-clipboard w-4 text-slate-500"></i><span class="label">Orders</span></a>
            <a class="px-3 py-2 rounded-lg hover:bg-slate-50 flex items-center gap-2" href="#" title="Activity"><i
                class="fa-solid fa-bars w-4 text-slate-500"></i><span class="label">Activity</span></a>
            <a class="px-3 py-2 rounded-lg hover:bg-slate-50 flex items-center gap-2" href="#" title="Balances"><i
                class="fa-solid fa-table w-4 text-slate-500"></i><span class="label">Balances</span></a>
            <a class="px-3 py-2 rounded-lg hover:bg-slate-50 flex items-center gap-2" href="#" title="Funding"><i
                class="fa-solid fa-hand-holding-dollar w-4 text-slate-500"></i><span class="label">Funding</span></a>
          </div>
        </details>

        <details class="group mt-1">
          <summary
            class="flex items-center justify-between px-3 py-2 rounded-lg hover:bg-slate-50 cursor-pointer font-medium text-slate-900">
            <span class="flex items-center gap-3"><i class="fa-solid fa-link w-4 text-slate-500"></i><span
                class="label">Invest</span></span>
            <i class="fa-solid fa-chevron-down text-slate-400 group-open:rotate-180 transition-transform chevron"></i>
          </summary>
          <div class="ml-8 mt-1 flex flex-col sub">
            <a class="px-3 py-2 rounded-lg hover:bg-slate-50 flex items-center gap-2" href="#" title="OpenStrategies"><i
                class="fa-solid fa-chart-line w-4 text-slate-500"></i><span class="label">OpenStrategies</span></a>
            <a class="px-3 py-2 rounded-lg hover:bg-slate-50 flex items-center gap-2" href="#" title="Funds"><i
                class="fa-solid fa-coins w-4 text-slate-500"></i><span class="label">Funds</span></a>
          </div>
        </details>

        <a class="flex items-center gap-3 px-3 py-2 rounded-lg hover:bg-slate-50" href="#" title="Plans & Features"><i
            class="fa-regular fa-square-check w-4 text-slate-500"></i><span class="label">Plans & Features</span></a>
        <a class="flex items-center gap-3 px-3 py-2 rounded-lg hover:bg-slate-50" href="#" title="Community"><i
            class="fa-regular fa-comments w-4 text-slate-500"></i><span class="label">Community</span></a>
        <a class="flex items-center gap-3 px-3 py-2 rounded-lg hover:bg-slate-50" href="#" title="Support"><i
            class="fa-solid fa-life-ring w-4 text-slate-500"></i><span class="label">Support</span></a>
        <a class="flex items-center gap-3 px-3 py-2 rounded-lg hover:bg-slate-50" href="#" title="Legal"><i
            class="fa-solid fa-scale-balanced w-4 text-slate-500"></i><span class="label">Legal</span></a>
      </nav>

      <div class="p-3 border-t border-slate-200 footer flex items-center justify-between gap-2">
        <button id="ah-settings"
          class="btn btn-settings h-10 w-10 p-0 rounded-xl bg-slate-100 hover:bg-slate-200 border-0" title="Settings"><i
            class="fa-solid fa-gear"></i></button>
        <button id="ah-collapse"
          class="btn btn-collapse h-10 w-10 p-0 rounded-xl bg-slate-100 hover:bg-slate-200 border-0" title="Collapse"><i
            class="fa-solid fa-arrow-left"></i></button>
      </div>
    </aside>

    <!-- ===== Main ===== -->
    <main class="flex-1 min-w-0">
      <div class="flex items-center justify-between px-6 py-4 border-b border-slate-200 bg-white">
        <div class="flex items-center gap-3 flex-1 min-w-0 max-w-[460px]">
          <div class="relative w-full">
            <input class="input w-full pl-9" placeholder="Search" />
            <svg class="w-4 h-4 absolute left-3 top-1/2 -translate-y-1/2 text-slate-400" viewBox="0 0 24 24" fill="none"
              stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <circle cx="11" cy="11" r="8" />
              <path d="m21 21-4.3-4.3" />
            </svg>
          </div>
        </div>

        <!-- Profile -->
        <div class="flex items-center gap-3">
          <button
            class="relative h-10 w-10 rounded-full border border-slate-200 grid place-items-center hover:bg-slate-50"
            aria-label="Notifications">
            <i class="fa-regular fa-bell text-slate-500"></i>
            <span class="absolute -top-0.5 -right-0.5 h-2.5 w-2.5 rounded-full bg-orange-500 ring-2 ring-white"></span>
          </button>

          <img
            src="https://media.licdn.com/dms/image/v2/D5603AQE0LbldGSWZCw/profile-displayphoto-shrink_200_200/profile-displayphoto-shrink_200_200/0/1703831323139?e=2147483647&v=beta&t=GO4aIrwPAXgnWMhLFAzq44dNh7wZSni1YzsnNzmQbU0"
            alt="Profile" class="w-9 h-9 rounded-full object-cover border border-slate-200" />

          <button class="flex items-center gap-2 text-slate-900 font-medium hover:text-slate-700">
            <span>John Doe</span>
            <i class="fa-solid fa-chevron-down text-slate-500 text-xs"></i>
          </button>
        </div>
      </div>

      <!-- GRID -->
      <div class="px-6 py-6 grid grid-cols-12 gap-6 min-w-0">
        <!-- Portfolio -->
        <section id="portfolio-card" class="card border border-slate-200 shadow-none col-span-12 lg:col-span-9 min-w-0">
          <div class="flex items-center justify-between px-5 py-4 border-b border-slate-200">
            <div>
              <h3 class="font-normal text-slate-800">Your portfolio</h3>
              <div class="mt-1 text-sm text-slate-500" id="pf-updated">â€”</div>
            </div>
            <div class="flex items-center gap-2">
              <button data-range="1D" class="tab tab-active text-[13px]">1D</button>
              <button data-range="1M" class="tab text-[13px]">1M</button>
              <button data-range="1Y" class="tab text-[13px]">1Y</button>
              <button data-range="ALL" class="tab text-[13px]">All</button>
              <button id="pf-refresh"
                class="ml-2 h-9 w-9 rounded-lg border border-slate-200 hover:bg-slate-50 grid place-items-center"
                title="Refresh">
                <i class="fa-solid fa-rotate-right"></i>
              </button>
            </div>
          </div>
          <div class="px-5 pt-4">
            <div class="flex items-baseline gap-3">
              <div class="text-2xl font-bold" id="pf-value">$ 100,568.50</div>
              <div class="text-lg font-normal" id="pf-change" data-sign="-">-0.62%</div>
            </div>
          </div>
          <div class="px-2 pb-4 pt-2">
            <div class="h-[260px]"><canvas id="pf-chart" class="max-w-full"></canvas></div>
            <div class="px-3 mt-1 text-[12px] text-slate-400 flex justify-between select-none">
              <span>10 AM</span><span>11 AM</span><span>2 PM</span><span>4 PM</span>
            </div>
          </div>
        </section>

        <!-- Right column -->
        <aside class="col-span-12 lg:col-span-3 lg:row-span-5 grid gap-6 lg:sticky lg:top-4 self-start min-w-0">
          <!-- 6 months earnings (unchanged) -->
          <div class="card p-5 border border-slate-200">
            <div class="flex items-center justify-between mb-3">
              <h3 class="text-base font-medium text-slate-900">6 months earnings</h3>
              <a href="#" class="text-sm text-olive-600 hover:underline">View all</a>
            </div>
            <div class="h-[180px]">
              <canvas id="six-months-earnings" class="max-w-full"></canvas>
            </div>
          </div>

          <!-- Strategies (replaces Buying Power / Cash) -->
          <div class="card p-5 border border-slate-200">
            <div class="flex items-center justify-between mb-3">
              <h3 class="text-base font-medium text-slate-900">Strategies</h3>
              <a href="#" class="text-sm text-olive-600 hover:underline">View all</a>
            </div>

            <!-- tiny list preview; swap with live data later -->
            <ul class="space-y-3">
              <li class="flex items-center justify-between">
                <div class="min-w-0">
                  <div class="text-sm text-slate-900 truncate">AlgoForge â€¢ Trend</div>
                  <div class="text-xs text-slate-500">Min: R163.15 â€¢ TCM: R164.2k</div>
                </div>
                <span class="text-xs px-2 py-0.5 rounded-full bg-green-100 text-green-700">+0.8%</span>
              </li>
              <li class="flex items-center justify-between">
                <div class="min-w-0">
                  <div class="text-sm text-slate-900 truncate">QuantBee â€¢ Mean</div>
                  <div class="text-xs text-slate-500">Min: R198.93 â€¢ TCM: R2.2m</div>
                </div>
                <span class="text-xs px-2 py-0.5 rounded-full bg-green-100 text-green-700">+0.4%</span>
              </li>
              <li class="flex items-center justify-between">
                <div class="min-w-0">
                  <div class="text-sm text-slate-900 truncate">GridOps â€¢ Grid</div>
                  <div class="text-xs text-slate-500">Min: R164.01 â€¢ TCM: R2.1m</div>
                </div>
                <span class="text-xs px-2 py-0.5 rounded-full bg-red-100 text-red-700">-0.2%</span>
              </li>
            </ul>
          </div>

          <!-- Asset class allocation (new) -->
          <div class="card p-5 border border-slate-200">
            <div class="flex items-center justify-between mb-3">
              <h3 class="text-base font-medium text-slate-900">Asset class allocation</h3>
              <span class="text-xs text-slate-500">Total = 100%</span>
            </div>

            <div class="space-y-4" id="asset-allocation">
              <!-- rows are auto-filled by the script below -->
            </div>
          </div>
        </aside>

        <script>
          // ===== Asset Class Allocation (simple, lightweight) =====
          (function () {
            // tweak these numbers or wire them to live data
            const data = [
              { label: 'Stocks', pct: 56, color: '#111827' },
              { label: 'ETFs', pct: 22, color: '#2563eb' },
              { label: 'Crypto', pct: 17, color: '#16a34a' },
              { label: 'Cash', pct: 5, color: '#f59e0b' },
            ];

            const wrap = document.getElementById('asset-allocation');
            if (!wrap) return;

            const row = (item) => `
      <div>
        <div class="flex items-center justify-between mb-1.5">
          <span class="text-sm text-slate-700">${item.label}</span>
          <span class="text-sm font-medium text-slate-900">${item.pct}%</span>
        </div>
        <div class="h-2.5 w-full rounded-full bg-slate-100 overflow-hidden">
          <div class="h-full rounded-full" style="width:${item.pct}%; background:${item.color}"></div>
        </div>
      </div>
    `;
            wrap.innerHTML = data.map(row).join('');
          })();
        </script>



        <!-- Performance Summary -->
        <section class="col-span-12 lg:col-span-9 min-w-0">
          <div class="card p-6 rounded-2xl border border-slate-200">
            <h3 class="text-lg font-medium text-slate-900 mb-5">Performance Summary</h3>
            <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-6 gap-4">
              <div class="ps-tile">
                <div class="ps-label">Best Day</div>
                <div id="ps-best" class="ps-value text-slate-800">+4.25%</div>
              </div>
              <div class="ps-tile">
                <div class="ps-label">Worst Day</div>
                <div id="ps-worst" class="ps-value text-slate-800">-2.67%</div>
              </div>
              <div class="ps-tile">
                <div class="ps-label">Avg Daily Return</div>
                <div id="ps-avg" class="ps-value text-slate-800">+0.12%</div>
              </div>
              <div class="ps-tile">
                <div class="ps-label">Positive Days</div>
                <div id="ps-pos" class="ps-value text-slate-800">61%</div>
              </div>
              <div class="ps-tile">
                <div class="ps-label">Trading Days</div>
                <div id="ps-days" class="ps-value text-slate-800">245</div>
              </div>
              <div class="ps-tile">
                <div class="ps-label">CAGR (sim.)</div>
                <div id="ps-cagr" class="ps-value text-slate-800">+7.8%</div>
              </div>
            </div>
          </div>
        </section>

        <!-- Current holdings -->
        <section class="col-span-12 lg:col-span-9 min-w-0">
          <div class="card p-6 rounded-2xl border border-slate-200">
            <div class="flex items-center justify-between mb-5">
              <h3 class="text-lg font-medium text-slate-900">Current holdings</h3>
              <div class="flex gap-2">
                <button id="hold-prev"
                  class="h-9 w-9 rounded-lg border border-slate-200 grid place-items-center hover:bg-slate-50"
                  aria-label="Previous">
                  <i class="fa-solid fa-chevron-left text-slate-500"></i>
                </button>
                <button id="hold-next"
                  class="h-9 w-9 rounded-lg border border-slate-200 grid place-items-center hover:bg-slate-50"
                  aria-label="Next">
                  <i class="fa-solid fa-chevron-right text-slate-500"></i>
                </button>
              </div>
            </div>
            <div id="hold-track" class="flex gap-4 overflow-x-auto no-scrollbar snap-x"></div>
          </div>
        </section>

        <!-- Top Positions -->
        <section class="col-span-12 lg:col-span-9 min-w-0">
          <div class="card rounded-2xl border border-slate-200 p-6">
            <div class="flex items-center justify-between">
              <h3 class="text-lg font-medium text-slate-900">Top Positions</h3>
              <a href="#" class="text-sm text-slate-500 hover:text-slate-700">View All</a>
            </div>

            <div class="mt-4 flex flex-wrap items-center gap-3">
              <label class="text-sm text-slate-500">Asset Class</label>
              <select class="h-9 rounded-lg border border-slate-200 px-3 text-sm">
                <option>All</option>
                <option>Stocks</option>
                <option>Crypto</option>
                <option>ETFs</option>
              </select>
              <label class="ml-2 text-sm text-slate-500">Side</label>
              <select class="h-9 rounded-lg border border-slate-200 px-3 text-sm">
                <option>All</option>
                <option>Buy</option>
                <option>Sell</option>
              </select>
            </div>

            <div class="mt-4 overflow-x-auto">
              <table class="w-full text-sm">
                <thead>
                  <tr class="text-slate-500">
                    <th class="py-3 text-left font-normal">Asset</th>
                    <th class="py-3 text-left font-normal">Price</th>
                    <th class="py-3 text-left font-normal">Qty</th>
                    <th class="py-3 text-left font-normal">Market Value</th>
                    <th class="py-3 text-left font-normal">Total P/L ($)</th>
                    <th class="py-3 text-center font-normal"> </th>
                  </tr>
                </thead>
                <tbody class="divide-y divide-slate-100">
                  <tr class="hover:bg-slate-50">
                    <td class="py-3"><a class="text-slate-800 hover:underline" href="#">AAPL</a></td>
                    <td class="py-3">$255.46</td>
                    <td class="py-3">399</td>
                    <td class="py-3">$101,928.54</td>
                    <td class="py-3 text-green-600">+$1,121.19</td>
                    <td class="py-3 text-center"></td>
                  </tr>
                  <tr class="hover:bg-slate-50">
                    <td class="py-3"><a class="text-slate-800 hover:underline" href="#">NVDA</a></td>
                    <td class="py-3">$178.19</td>
                    <td class="py-3">301</td>
                    <td class="py-3">$53,635.19</td>
                    <td class="py-3 text-red-600">-$343.50</td>
                    <td class="py-3 text-center"></td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>
        </section>

        <!-- Recent Orders -->
        <section class="col-span-12 lg:col-span-9 min-w-0">
          <div class="card rounded-2xl border border-slate-200 p-6">
            <div class="flex items-center justify-between">
              <h3 class="text-lg font-medium text-slate-900">Recent Orders</h3>
              <a href="#" class="text-sm text-slate-500 hover:text-slate-700">View All</a>
            </div>

            <div class="mt-4 flex flex-wrap items-center gap-3">
              <div class="relative">
                <input class="h-9 w-64 rounded-lg border border-slate-200 pl-9 pr-3 text-sm" placeholder="Search..." />
                <i
                  class="fa-solid fa-magnifying-glass absolute left-3 top-1/2 -translate-y-1/2 text-slate-400 text-xs"></i>
              </div>
              <button id="cancel-selected"
                class="h-9 rounded-lg bg-amber-100 text-amber-900 px-3 text-sm disabled:opacity-40 disabled:cursor-not-allowed"
                disabled>
                Cancel <span id="sel-count">0</span> selected
              </button>
              <button class="h-9 rounded-lg border border-slate-200 px-3 text-sm">
                <i class="fa-solid fa-table-cells-large mr-2 text-slate-500"></i> Columns
              </button>
            </div>

            <div class="mt-3 text-xs text-slate-400" id="clear-selection" hidden>Clear Selection</div>

            <div class="mt-2 overflow-x-auto">
              <table class="w-full text-sm">
                <thead>
                  <tr class="text-slate-500">
                    <th class="py-3 pl-3"></th>
                    <th class="py-3 text-left font-normal">Asset</th>
                    <th class="py-3 text-left font-normal">Order Type</th>
                    <th class="py-3 text-left font-normal">Side</th>
                    <th class="py-3 text-left font-normal">Qty</th>
                    <th class="py-3 text-left font-normal">Filled Qty</th>
                    <th class="py-3 text-left font-normal">Avg. Fill Price</th>
                    <th class="py-3 text-left font-normal">Status</th>
                    <th class="py-3 text-left font-normal">Source</th>
                    <th class="py-3 text-left font-normal">Submitted At</th>
                  </tr>
                </thead>
                <tbody class="divide-y divide-slate-100">
                  <tr class="hover:bg-slate-50">
                    <td class="py-3 pl-3"><input type="checkbox" class="row-chk h-4 w-4 rounded border-slate-300" />
                    </td>
                    <td class="py-3"><a class="text-slate-800 hover:underline" href="#">AAPL</a></td>
                    <td class="py-3">Market</td>
                    <td class="py-3">sell</td>
                    <td class="py-3">1.00</td>
                    <td class="py-3">1.00</td>
                    <td class="py-3">254.81</td>
                    <td class="py-3">filled</td>
                    <td class="py-3">-</td>
                    <td class="py-3">Sep 26, 2025, 10:34</td>
                  </tr>
                  <tr class="hover:bg-slate-50">
                    <td class="py-3 pl-3"><input type="checkbox" class="row-chk h-4 w-4 rounded border-slate-300" />
                    </td>
                    <td class="py-3"><a class="text-slate-800 hover:underline" href="#">AAPL</a></td>
                    <td class="py-3">Market</td>
                    <td class="py-3">buy</td>
                    <td class="py-3">300.00</td>
                    <td class="py-3">300.00</td>
                    <td class="py-3">252.66</td>
                    <td class="py-3">filled</td>
                    <td class="py-3">-</td>
                    <td class="py-3">Sep 25, 2025, 09:02</td>
                  </tr>
                  <tr class="hover:bg-slate-50">
                    <td class="py-3 pl-3"><input type="checkbox" class="row-chk h-4 w-4 rounded border-slate-300" />
                    </td>
                    <td class="py-3"><a class="text-slate-800 hover:underline" href="#">NVDA</a></td>
                    <td class="py-3">Market</td>
                    <td class="py-3">buy</td>
                    <td class="py-3">300.00</td>
                    <td class="py-3">300.00</td>
                    <td class="py-3">179.33</td>
                    <td class="py-3">filled</td>
                    <td class="py-3">-</td>
                    <td class="py-3">Sep 25, 2025, 08:41</td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>
        </section>

        <!-- selection helper -->
        <script>
          (function () {
            const all = document.getElementById('chk-all');
            const rows = () => Array.from(document.querySelectorAll('.row-chk'));
            const sel = document.getElementById('sel-count');
            const btn = document.getElementById('cancel-selected');
            const clear = document.getElementById('clear-selection');

            function refresh() {
              const n = rows().filter(c => c.checked).length;
              sel.textContent = n; btn.disabled = n === 0; clear.hidden = n === 0;
              if (n === rows().length && n > 0 && all) all.checked = true;
              else if (n === 0 && all) all.checked = false;
            }
            all?.addEventListener('change', () => { rows().forEach(c => c.checked = all.checked); refresh(); });
            document.addEventListener('change', e => { if (e.target.classList?.contains('row-chk')) refresh(); });
            clear?.addEventListener('click', () => { rows().forEach(c => c.checked = false); all && (all.checked = false); refresh(); });
            refresh();
          })();
        </script>

        <style>
          .scrollbar-hide::-webkit-scrollbar {
            display: none;
          }

          .scrollbar-hide {
            -ms-overflow-style: none;
            scrollbar-width: none;
          }
        </style>

      </div>

      <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>
      <script>
        (() => {
          const series = {
            "1D": [100.9, 100.6, 100.3, 100.4, 100.5, 100.2, 100.0, 100.1, 99.8, 100.0, 100.6, 100.3, 100.45, 100.56, 100.57],
            "1M": Array.from({ length: 30 }, (_, i) => 95 + Math.sin(i / 3) * 1.2 + i * 0.12),
            "1Y": Array.from({ length: 52 }, (_, i) => 72 + Math.sin(i / 2) * 4 + i * 0.7),
            "ALL": Array.from({ length: 120 }, (_, i) => 40 + Math.sin(i / 5) * 6 + i * 0.5)
          };
          const fmtMoney = v => `$ ${v.toLocaleString('en-US', { minimumFractionDigits: 2, maximumFractionDigits: 2 })}`;
          const percent = (a, b) => ((a - b) / b * 100);

          const elUpdated = document.getElementById('pf-updated');
          const elVal = document.getElementById('pf-value');
          const elChg = document.getElementById('pf-change');
          const tabs = document.querySelectorAll('#portfolio-card .tab');
          const refreshBtn = document.getElementById('pf-refresh');

          function setTimestamp() {
            const now = new Date();
            const opts = { month: 'long', day: '2-digit', hour: '2-digit', minute: '2-digit' };
            elUpdated.textContent = `${now.toLocaleString('en-ZA', opts)} SAST`;
          }

          const ctx = document.getElementById('pf-chart').getContext('2d');
          const gradient = ctx.createLinearGradient(0, 0, 0, 260);
          gradient.addColorStop(0, 'rgba(85,107,47,0.35)');
          gradient.addColorStop(1, 'rgba(85,107,47,0.06)');

          let chart = new Chart(ctx, {
            type: 'line',
            data: { labels: series["1D"].map((_, i) => i), datasets: [{ data: series["1D"], tension: .35, borderWidth: 2, borderColor: '#556B2F', backgroundColor: gradient, fill: true, pointRadius: 0 }] },
            options: {
              responsive: true, maintainAspectRatio: false,
              plugins: { legend: { display: false }, tooltip: { enabled: true, mode: 'index', intersect: false, displayColors: false } },
              scales: {
                x: { display: false, grid: { display: false } },
                y: { display: true, ticks: { color: '#94a3b8', autoSkip: true, maxTicksLimit: 3, callback: (v) => `$${v.toFixed(2)}k`.replace('$$', '$') }, grid: { display: false } }
              }
            }
          });

          function updateHeader(arr) {
            const base = 100000;
            const last = base + (arr[arr.length - 1] - arr[0]) * 1000;
            const pct = percent(arr[arr.length - 1], arr[0]);
            elVal.textContent = fmtMoney(last);
            elChg.textContent = `${pct >= 0 ? '+' : ''}${pct.toFixed(2)}%`;
            elChg.style.color = pct >= 0 ? '#16a34a' : '#ef4444';
          }

          function setRange(range) {
            tabs.forEach(t => t.classList.toggle('tab-active', t.dataset.range === range));
            const data = series[range];
            chart.data.labels = data.map((_, i) => i);
            chart.data.datasets[0].data = data;
            chart.update();
            updateHeader(data);
            setTimestamp();
          }
          setRange('1D');

          tabs.forEach(btn => btn.addEventListener('click', () => setRange(btn.dataset.range)));
          refreshBtn.addEventListener('click', () => {
            refreshBtn.classList.add('spin');
            setTimeout(() => {
              refreshBtn.classList.remove('spin');
              const active = document.querySelector('#portfolio-card .tab.tab-active').dataset.range;
              series[active] = series[active].map(v => v + (Math.random() - .5) * 0.08);
              setRange(active);
            }, 600);
          });

          // Holdings slider
          const holdings = [
            { ticker: 'AAPL', name: 'Apple, Inc', price: 1232.00, pct: 11.01, bg: '#111827' },
            { ticker: 'PYPL', name: 'PayPal, Inc', price: 965.00, pct: -9.05, bg: '#2563eb' },
            { ticker: 'TSLA', name: 'Tesla, Inc', price: 1232.00, pct: 11.01, bg: '#dc2626' },
            { ticker: 'AMZN', name: 'Amazon.com', price: 2567.99, pct: 11.01, bg: '#d97706' },
            { ticker: 'NVDA', name: 'NVIDIA Corp', price: 876.12, pct: 2.44, bg: '#16a34a' },
            { ticker: 'MSFT', name: 'Microsoft', price: 412.33, pct: -1.32, bg: '#0ea5e9' },
          ];
          const track = document.getElementById('hold-track');
          const fmt = v => `$${v.toLocaleString('en-US', { minimumFractionDigits: 2, maximumFractionDigits: 2 })}`;
          const chip = p => `<span class="px-2.5 py-1 rounded-full text-xs font-normal ${p >= 0 ? 'bg-green-100 text-green-700' : 'bg-red-100 text-red-700'}">${p >= 0 ? 'â†‘' : 'â†“'} ${Math.abs(p).toFixed(2)}%</span>`;
          const logo = (t, bg) => `<div class="w-10 h-10 rounded-full flex items-center justify-center text-white font-normal" style="background:${bg}">${t[0]}</div>`;
          track.innerHTML = holdings.map(h => `
            <article class="min-w-[280px] max-w-[280px] snap-start bg-white border border-slate-200 rounded-2xl p-5 flex justify-between items-center">
              <div class="flex items-center gap-3">
                ${logo(h.ticker, h.bg)}
                <div>
                  <div class="text-sm font-normal text-slate-900">${h.ticker}</div>
                  <div class="text-xs text-slate-500">${h.name}</div>
                </div>
              </div>
              <div class="text-right">
                <div class="text-lg font-normal text-slate-900">${fmt(h.price)}</div>
                <div class="mt-2">${chip(h.pct)}</div>
              </div>
            </article>
          `).join('');
          const CARD_W = 284;
          document.getElementById('hold-prev').onclick = () => track.scrollBy({ left: -CARD_W, behavior: 'smooth' });
          document.getElementById('hold-next').onclick = () => track.scrollBy({ left: CARD_W, behavior: 'smooth' });
        })();
      </script>

      <script>
        (() => {
          const ctx = document.getElementById('six-months-earnings').getContext('2d');
          const allMonths = [
            { m: 'Jan', v: 420 }, { m: 'Feb', v: 610 }, { m: 'Mar', v: 455 },
            { m: 'Apr', v: 630 }, { m: 'May', v: 405 }, { m: 'Jun', v: 660 },
            { m: 'Jul', v: 520 }, { m: 'Aug', v: 480 }, { m: 'Sep', v: 590 },
            { m: 'Oct', v: 530 }, { m: 'Nov', v: 610 }, { m: 'Dec', v: 700 }
          ];
          const last6 = allMonths.slice(-6);
          const labels = last6.map(x => x.m);
          const data = last6.map(x => x.v);
          const OLIVE = '#556B2F', MUTED = 'rgba(2,6,23,.08)', MUTED_BORDER = 'rgba(2,6,23,.18)';
          const fmtUSD = new Intl.NumberFormat('en-US', { style: 'currency', currency: 'USD', maximumFractionDigits: 0 });

          new Chart(ctx, {
            type: 'bar',
            data: {
              labels, datasets: [{
                data,
                backgroundColor: data.map((_, i) => i === data.length - 1 ? OLIVE : MUTED),
                borderColor: data.map((_, i) => i === data.length - 1 ? OLIVE : MUTED_BORDER),
                borderWidth: 1, borderRadius: 6, barThickness: 16,
                hoverBackgroundColor: data.map((_, i) => i === data.length - 1 ? OLIVE : MUTED),
              }]
            },
            options: {
              responsive: true, maintainAspectRatio: false,
              plugins: { legend: { display: false }, tooltip: { displayColors: false, callbacks: { label: (c) => fmtUSD.format(c.raw) } } },
              scales: {
                x: { grid: { display: false }, ticks: { color: '#94a3b8', font: { size: 11, weight: '400' }, maxRotation: 0, minRotation: 0, autoSkip: false } },
                y: {
                  beginAtZero: true, grid: { color: 'rgba(148,163,184,.18)', borderDash: [4, 4] },
                  ticks: { color: '#94a3b8', font: { size: 11, weight: '400' }, maxTicksLimit: 6, callback: (v) => fmtUSD.format(v) }
                }
              }
            }
          });
        })();
      </script>

    </main>
  </div>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/js/all.min.js" defer></script>
  <script>
    (function () {
      const layout = document.getElementById('layout');
      const aside = document.getElementById('ah-sidebar');
      const btn = document.getElementById('ah-collapse');

      const saved = localStorage.getItem('ah_collapsed') === 'true';
      if (saved) { aside.setAttribute('data-collapsed', 'true'); layout.classList.add('is-collapsed'); }

      btn.addEventListener('click', () => {
        const isCollapsed = aside.getAttribute('data-collapsed') === 'true';
        if (!isCollapsed) aside.querySelectorAll('details[open]').forEach(d => d.removeAttribute('open'));
        aside.setAttribute('data-collapsed', String(!isCollapsed));
        layout.classList.toggle('is-collapsed', !isCollapsed);
        localStorage.setItem('ah_collapsed', String(!isCollapsed));

        // ensure grid + charts recalc immediately
        layout.offsetHeight;               // reflow
        window.dispatchEvent(new Event('resize')); // Chart.js responsive nudge
      });
    })();
  </script>
</body>

</html>
